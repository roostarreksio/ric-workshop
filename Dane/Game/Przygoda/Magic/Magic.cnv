OBJECT=VARIX
VARIX:TYPE=INTEGER

OBJECT=VARIY
VARIY:TYPE=INTEGER

OBJECT=VARILASTX
VARILASTX:TYPE=INTEGER

OBJECT=VARILASTY
VARILASTY:TYPE=INTEGER

OBJECT=VARIDIRX
VARIDIRX:TYPE=INTEGER

OBJECT=VARIDIRY
VARIDIRY:TYPE=INTEGER

OBJECT=VARILASTDIRX
VARILASTDIRX:TYPE=INTEGER

OBJECT=VARILASTDIRY
VARILASTDIRY:TYPE=INTEGER

OBJECT=VARIDOT
VARIDOT:TYPE=INTEGER

OBJECT=VARITER
VARITER:TYPE=INTEGER

OBJECT=VARITER2
VARITER2:TYPE=INTEGER

OBJECT=VARILENGTH0
VARILENGTH0:TYPE=INTEGER

OBJECT=VARILENGTH1
VARILENGTH1:TYPE=INTEGER

OBJECT=VARICOUNT
VARICOUNT:TYPE=INTEGER

OBJECT=VARSTEMP0
VARSTEMP0:TYPE=STRING

OBJECT=VARSTEMP1
VARSTEMP1:TYPE=STRING

OBJECT=VARITEMP0
VARITEMP0:TYPE=INTEGER

OBJECT=VARITEMP1
VARITEMP1:TYPE=INTEGER

OBJECT=VARITEMP2
VARITEMP2:TYPE=INTEGER

OBJECT=VARDTEMP0
VARDTEMP0:TYPE=DOUBLE

OBJECT=VARDTEMP1
VARDTEMP1:TYPE=DOUBLE

OBJECT=VARDTAN
VARDTAN:TYPE=DOUBLE

OBJECT=VARDLASTTAN
VARDLASTTAN:TYPE=DOUBLE

OBJECT=VARILASTCLONE
VARILASTCLONE:TYPE=INTEGER

OBJECT=VARILASTCLONE2
VARILASTCLONE2:TYPE=INTEGER

OBJECT=VARIDOMAGIC
VARIDOMAGIC:TYPE=INTEGER

OBJECT=VARDFRAME
VARDFRAME:TYPE=DOUBLE

OBJECT=VARSCOMPSPELL
VARSCOMPSPELL:TYPE=STRING

OBJECT=VARILASTSPELL
VARILASTSPELL:TYPE=INTEGER

OBJECT=VARSDEBUG
VARSDEBUG:TYPE=STRING

OBJECT=VARSDEBUG1
VARSDEBUG1:TYPE=STRING

OBJECT=VARIDEBUG
VARIDEBUG:TYPE=INTEGER

OBJECT=VARILASTDBG
VARILASTDBG:TYPE=INTEGER

OBJECT=VARISPELLREADY
VARISPELLREADY:TYPE=INTEGER

OBJECT=VARICURSORX
VARICURSORX:TYPE=INTEGER
VARICURSORX:VALUE=400

OBJECT=VARICURSORY
VARICURSORY:TYPE=INTEGER
VARICURSORY:VALUE=300

OBJECT=VARDSPEEDX
VARDSPEEDX:TYPE=DOUBLE

OBJECT=VARDSPEEDY
VARDSPEEDY:TYPE=DOUBLE

OBJECT=VARSRETURNTO
VARSRETURNTO:TYPE=STRING

OBJECT=VARIOFFSETX
VARIOFFSETX:TYPE=INTEGER

OBJECT=VARIOFFSETY
VARIOFFSETY:TYPE=INTEGER

OBJECT=VARDTIME
VARDTIME:TYPE=DOUBLE

OBJECT=VARSFLY
VARSFLY:TYPE=STRING

OBJECT=VARIFLYTIME
VARIFLYTIME:TYPE=INTEGER

OBJECT=VARITIMETOEXIT
VARITIMETOEXIT:TYPE=INTEGER
VARITIMETOEXIT:VALUE=5
VARITIMETOEXIT:ONCHANGED^0={@IF("VARIWINNER","_","1","BFITMP5","BFITMP6");}

OBJECT=VARIWINNER
VARIWINNER:TYPE=INTEGER
VARIWINNER:VALUE=-1

OBJECT=VARINUMREXSPELLS
VARINUMREXSPELLS:TYPE=INTEGER
VARINUMREXSPELLS:VALUE=0

OBJECT=VARITUTORIAL
VARITUTORIAL:TYPE=INTEGER
VARITUTORIAL:ONBRUTALCHANGED^1={VARISPELLREADY^SET(0);ARRROUTEX^REMOVEALL();ARRROUTEY^REMOVEALL();ARRANGLES^REMOVEALL();VARDLASTTAN^SET(-1.0);VARIDOMAGIC^SET(0);VARILASTDBG^SET(0);}

#ADD NEW INTEGER TO TRACK WHETHER A DEFENSIVE SPELL IS LEARNED FOR THE FIRST TIME OR PRACTICED AGAIN
OBJECT=VARITRAINING
VARITRAINING:TYPE=INTEGER
VARITRAINING:VALUE=0

OBJECT=VARITUTCOUNT
VARITUTCOUNT:TYPE=INTEGER
VARITUTCOUNT:ONCHANGED^100={@IF("VARITUTORIAL'2&&VARIDEFTOPRACTICE'-1","BFITMP7","");}

OBJECT=VARITUTREPEAT
VARITUTREPEAT:TYPE=INTEGER
VARITUTREPEAT:VALUE=10

#ADD DIFFERENT VARITUTORIAL VALUES FOR OFFENSIVE SPELLS OF DIFFERENT TEACHERS
OBJECT=VARIPOSTTUT
VARIPOSTTUT:TYPE=INTEGER
VARIPOSTTUT:ONBRUTALCHANGED^4={SNDTUT9^PLAY();}
VARIPOSTTUT:ONBRUTALCHANGED^5={SNDTUT10^PLAY();}
VARIPOSTTUT:ONBRUTALCHANGED^6={BEHLEARNEDDEF^RUN();}
VARIPOSTTUT:ONBRUTALCHANGED^8={BEHSNDTRYAGAIN^RUN();}
VARIPOSTTUT:ONBRUTALCHANGED^9={SNDLEARNEDOFF^PLAY();}
VARIPOSTTUT:ONBRUTALCHANGED^10={SNDLEARNEDOFFSNEJK^PLAY();}
VARIPOSTTUT:ONBRUTALCHANGED^11={SNDLEARNEDOFFWALDI^PLAY();}

OBJECT=VARIDEFTOPRACTICE
VARIDEFTOPRACTICE:TYPE=INTEGER

OBJECT=VARIREPEATSPELL
VARIREPEATSPELL:TYPE=INTEGER

OBJECT=VARSREPEATSPELL
VARSREPEATSPELL:TYPE=STRING

#PATCHED
#CANCEL STL8 TIMER STOPPING AND THUS RESTORE EFFECTS OF THE FLY AND WHIRLS SPELLS
#EXECUTE A SLIGHTLY MODIFIED VERSION OF BEHDOSPELL-BFITMP126 STARTING STLMAGIC TIMER (FOR FURTHER PAUSING AND RESUMING IT) IN ORDER TO MITIGATE A POSSIBILITY OF GAME ENTERING AN ENDLESS LOOP
OBJECT=VARIWAIT
VARIWAIT:TYPE=INTEGER
VARIWAIT:VALUE=8
VARIWAIT:ONCHANGED^0={@IF(ARRFIGHTERSPELLS^GETSIZE(),">","0","BFITMP126FIRSTTIME","");}

OBJECT=VARBLEARNED
VARBLEARNED:TYPE=BOOL

OBJECT=VARBFLEE
VARBFLEE:TYPE=BOOL

OBJECT=ANNBODY0
ANNBODY0:TYPE=ANIMO
ANNBODY0:VISIBLE=TRUE
ANNBODY0:FILENAME=REX_KORPUS.ANN
ANNBODY0:TOCANVAS=TRUE
ANNBODY0:PRIORITY=60
ANNBODY0:FPS=16
ANNBODY0:PRELOAD=TRUE
ANNBODY0:RELEASE=TRUE
ANNBODY0:MONITORCOLLISION=FALSE
ANNBODY0:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNBODY1
ANNBODY1:TYPE=ANIMO
ANNBODY1:VISIBLE=TRUE
ANNBODY1:FILENAME=GES_KORPUS.ANN
ANNBODY1:TOCANVAS=TRUE
ANNBODY1:PRIORITY=10
ANNBODY1:FPS=16
ANNBODY1:PRELOAD=TRUE
ANNBODY1:RELEASE=TRUE
ANNBODY1:MONITORCOLLISION=FALSE
ANNBODY1:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNCLOUD
ANNCLOUD:TYPE=ANIMO
ANNCLOUD:VISIBLE=FALSE
ANNCLOUD:FILENAME=CZAR.ANN
ANNCLOUD:TOCANVAS=TRUE
ANNCLOUD:PRIORITY=40
ANNCLOUD:FPS=16
ANNCLOUD:PRELOAD=TRUE
ANNCLOUD:RELEASE=TRUE
ANNCLOUD:MONITORCOLLISION=FALSE
ANNCLOUD:MONITORCOLLISIONALPHA=FALSE
ANNCLOUD:ONFINISHED={THIS^HIDE();}

OBJECT=ANNDARK0
ANNDARK0:TYPE=ANIMO
ANNDARK0:VISIBLE=FALSE
ANNDARK0:FILENAME=REX_CIEMNOSC.ANN
ANNDARK0:TOCANVAS=TRUE
ANNDARK0:PRIORITY=30
ANNDARK0:FPS=16
ANNDARK0:PRELOAD=TRUE
ANNDARK0:RELEASE=TRUE
ANNDARK0:MONITORCOLLISION=FALSE
ANNDARK0:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNDARK1
ANNDARK1:TYPE=ANIMO
ANNDARK1:VISIBLE=FALSE
ANNDARK1:FILENAME=CIEMNOSC.ANN
ANNDARK1:TOCANVAS=TRUE
ANNDARK1:PRIORITY=25
ANNDARK1:FPS=16
ANNDARK1:PRELOAD=TRUE
ANNDARK1:RELEASE=TRUE
ANNDARK1:MONITORCOLLISION=FALSE
ANNDARK1:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNEXIT
ANNEXIT:TYPE=ANIMO
ANNEXIT:VISIBLE=TRUE
ANNEXIT:FILENAME=POWROT.ANN
ANNEXIT:TOCANVAS=TRUE
ANNEXIT:PRIORITY=110
ANNEXIT:FPS=16
ANNEXIT:PRELOAD=TRUE
ANNEXIT:RELEASE=TRUE
ANNEXIT:MONITORCOLLISION=FALSE
ANNEXIT:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNFLIES1
ANNFLIES1:TYPE=ANIMO
ANNFLIES1:VISIBLE=FALSE
ANNFLIES1:FILENAME=MUCHY.ANN
ANNFLIES1:TOCANVAS=TRUE
ANNFLIES1:PRIORITY=22
ANNFLIES1:FPS=16
ANNFLIES1:PRELOAD=TRUE
ANNFLIES1:RELEASE=TRUE
ANNFLIES1:MONITORCOLLISION=FALSE
ANNFLIES1:MONITORCOLLISIONALPHA=FALSE
ANNFLIES1:ONFINISHED^START={THIS^PLAY("PLAY");}

OBJECT=ANNHEAD0
ANNHEAD0:TYPE=ANIMO
ANNHEAD0:VISIBLE=TRUE
ANNHEAD0:FILENAME=REX_GLOWA.ANN
ANNHEAD0:TOCANVAS=TRUE
ANNHEAD0:PRIORITY=55
ANNHEAD0:FPS=16
ANNHEAD0:PRELOAD=TRUE
ANNHEAD0:RELEASE=TRUE
ANNHEAD0:MONITORCOLLISION=FALSE
ANNHEAD0:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNHEAD1
ANNHEAD1:TYPE=ANIMO
ANNHEAD1:VISIBLE=TRUE
ANNHEAD1:FILENAME=GES_GLOWA.ANN
ANNHEAD1:TOCANVAS=TRUE
ANNHEAD1:PRIORITY=15
ANNHEAD1:FPS=16
ANNHEAD1:PRELOAD=TRUE
ANNHEAD1:RELEASE=TRUE
ANNHEAD1:MONITORCOLLISION=FALSE
ANNHEAD1:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNMAGIC
ANNMAGIC:TYPE=ANIMO
ANNMAGIC:VISIBLE=FALSE
ANNMAGIC:FILENAME=CZAROWANIE.ANN
ANNMAGIC:TOCANVAS=TRUE
ANNMAGIC:PRIORITY=45
ANNMAGIC:FPS=16
ANNMAGIC:PRELOAD=TRUE
ANNMAGIC:RELEASE=TRUE
ANNMAGIC:MONITORCOLLISION=FALSE
ANNMAGIC:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNMAGIC2
ANNMAGIC2:TYPE=ANIMO
ANNMAGIC2:VISIBLE=FALSE
ANNMAGIC2:FILENAME=CZAROWANIE2.ANN
ANNMAGIC2:TOCANVAS=TRUE
ANNMAGIC2:PRIORITY=25
ANNMAGIC2:FPS=16
ANNMAGIC2:PRELOAD=TRUE
ANNMAGIC2:RELEASE=TRUE
ANNMAGIC2:MONITORCOLLISION=FALSE
ANNMAGIC2:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNMOVEMENT
ANNMOVEMENT:TYPE=ANIMO
ANNMOVEMENT:VISIBLE=TRUE
ANNMOVEMENT:FILENAME=MOVEMENT.ANN
ANNMOVEMENT:TOCANVAS=TRUE
ANNMOVEMENT:PRIORITY=0
ANNMOVEMENT:FPS=16
ANNMOVEMENT:PRELOAD=TRUE
ANNMOVEMENT:RELEASE=TRUE
ANNMOVEMENT:MONITORCOLLISION=FALSE
ANNMOVEMENT:MONITORCOLLISIONALPHA=FALSE
ANNMOVEMENT:ONFRAMECHANGED^MOVE1={VARITEMP0^SET(ANNMOVEMENT^GETPOSITIONX());VARITEMP1^SET(ANNMOVEMENT^GETPOSITIONY());GRPMOVE^SETPOSITION(VARITEMP0,VARITEMP1);}
ANNMOVEMENT:ONFINISHED^MOVE1={ANNMOVEMENT^PLAY("MOVE1");}

OBJECT=ANNMUCHA1
ANNMUCHA1:TYPE=ANIMO
ANNMUCHA1:VISIBLE=FALSE
ANNMUCHA1:FILENAME=MUCHA1.ANN
ANNMUCHA1:TOCANVAS=TRUE
ANNMUCHA1:PRIORITY=40
ANNMUCHA1:FPS=16
ANNMUCHA1:PRELOAD=TRUE
ANNMUCHA1:RELEASE=TRUE
ANNMUCHA1:MONITORCOLLISION=FALSE
ANNMUCHA1:MONITORCOLLISIONALPHA=FALSE
ANNMUCHA1:ONFINISHED^PLAY={THIS^PLAY("PLAY");}
ANNMUCHA1:ONFRAMECHANGED^PLAY={@IF("VARSFLY'"ANNMUCHA1"&&VARIFLYTIME<4","BFITMP8","");}

OBJECT=ANNMUCHA2
ANNMUCHA2:TYPE=ANIMO
ANNMUCHA2:VISIBLE=FALSE
ANNMUCHA2:FILENAME=MUCHA2.ANN
ANNMUCHA2:TOCANVAS=TRUE
ANNMUCHA2:PRIORITY=40
ANNMUCHA2:FPS=16
ANNMUCHA2:PRELOAD=TRUE
ANNMUCHA2:RELEASE=TRUE
ANNMUCHA2:MONITORCOLLISION=FALSE
ANNMUCHA2:MONITORCOLLISIONALPHA=FALSE
ANNMUCHA2:ONFINISHED^PLAY={THIS^PLAY("PLAY");}
ANNMUCHA2:ONFRAMECHANGED^PLAY={@IF("VARSFLY'"ANNMUCHA2"&&VARIFLYTIME<4","BFITMP9","");}

OBJECT=ANNMUCHA3
ANNMUCHA3:TYPE=ANIMO
ANNMUCHA3:VISIBLE=FALSE
ANNMUCHA3:FILENAME=MUCHA3.ANN
ANNMUCHA3:TOCANVAS=TRUE
ANNMUCHA3:PRIORITY=40
ANNMUCHA3:FPS=16
ANNMUCHA3:PRELOAD=TRUE
ANNMUCHA3:RELEASE=TRUE
ANNMUCHA3:MONITORCOLLISION=FALSE
ANNMUCHA3:MONITORCOLLISIONALPHA=FALSE
ANNMUCHA3:ONFINISHED^PLAY={THIS^PLAY("PLAY");}
ANNMUCHA3:ONFRAMECHANGED^PLAY={@IF("VARSFLY'"ANNMUCHA3"&&VARIFLYTIME<4","BFITMP10","");}

OBJECT=ANNMUCHA4
ANNMUCHA4:TYPE=ANIMO
ANNMUCHA4:VISIBLE=FALSE
ANNMUCHA4:FILENAME=MUCHA4.ANN
ANNMUCHA4:TOCANVAS=TRUE
ANNMUCHA4:PRIORITY=40
ANNMUCHA4:FPS=16
ANNMUCHA4:PRELOAD=TRUE
ANNMUCHA4:RELEASE=TRUE
ANNMUCHA4:MONITORCOLLISION=FALSE
ANNMUCHA4:MONITORCOLLISIONALPHA=FALSE
ANNMUCHA4:ONFINISHED^PLAY={THIS^PLAY("PLAY");}
ANNMUCHA4:ONFRAMECHANGED^PLAY={@IF("VARSFLY'"ANNMUCHA4"&&VARIFLYTIME<4","BFITMP11","");}

OBJECT=ANNMUCHA5
ANNMUCHA5:TYPE=ANIMO
ANNMUCHA5:VISIBLE=FALSE
ANNMUCHA5:FILENAME=MUCHA5.ANN
ANNMUCHA5:TOCANVAS=TRUE
ANNMUCHA5:PRIORITY=16
ANNMUCHA5:FPS=16
ANNMUCHA5:PRELOAD=TRUE
ANNMUCHA5:RELEASE=TRUE
ANNMUCHA5:MONITORCOLLISION=FALSE
ANNMUCHA5:MONITORCOLLISIONALPHA=FALSE
ANNMUCHA5:ONFINISHED^PLAY={THIS^PLAY("PLAY");}
ANNMUCHA5:ONFRAMECHANGED^PLAY={@IF("VARSFLY'"ANNMUCHA5"&&VARIFLYTIME<4","BFITMP12","");}

OBJECT=ANNPUDDING0
ANNPUDDING0:TYPE=ANIMO
ANNPUDDING0:VISIBLE=FALSE
ANNPUDDING0:FILENAME=REX_BUDYN.ANN
ANNPUDDING0:TOCANVAS=TRUE
ANNPUDDING0:PRIORITY=62
ANNPUDDING0:FPS=16
ANNPUDDING0:PRELOAD=TRUE
ANNPUDDING0:RELEASE=TRUE
ANNPUDDING0:MONITORCOLLISION=FALSE
ANNPUDDING0:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNPUDDING1
ANNPUDDING1:TYPE=ANIMO
ANNPUDDING1:VISIBLE=FALSE
ANNPUDDING1:FILENAME=FIGHTER_BUDYN.ANN
ANNPUDDING1:TOCANVAS=TRUE
ANNPUDDING1:PRIORITY=22
ANNPUDDING1:FPS=16
ANNPUDDING1:PRELOAD=TRUE
ANNPUDDING1:RELEASE=TRUE
ANNPUDDING1:MONITORCOLLISION=FALSE
ANNPUDDING1:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNSCIAGA
ANNSCIAGA:TYPE=ANIMO
ANNSCIAGA:VISIBLE=TRUE
ANNSCIAGA:FILENAME=SCIAGA.ANN
ANNSCIAGA:TOCANVAS=TRUE
ANNSCIAGA:PRIORITY=99
ANNSCIAGA:FPS=16
ANNSCIAGA:PRELOAD=TRUE
ANNSCIAGA:RELEASE=TRUE
ANNSCIAGA:MONITORCOLLISION=FALSE
ANNSCIAGA:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNSHIELD
ANNSHIELD:TYPE=ANIMO
ANNSHIELD:VISIBLE=FALSE
ANNSHIELD:FILENAME=REX_OSLONA.ANN
ANNSHIELD:TOCANVAS=TRUE
ANNSHIELD:PRIORITY=65
ANNSHIELD:FPS=16
ANNSHIELD:PRELOAD=TRUE
ANNSHIELD:RELEASE=TRUE
ANNSHIELD:MONITORCOLLISION=FALSE
ANNSHIELD:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNSPELL
ANNSPELL:TYPE=ANIMO
ANNSPELL:VISIBLE=FALSE
ANNSPELL:FILENAME=CZAROWANIE1.ANN
ANNSPELL:TOCANVAS=TRUE
ANNSPELL:PRIORITY=45
ANNSPELL:FPS=16
ANNSPELL:PRELOAD=TRUE
ANNSPELL:RELEASE=TRUE
ANNSPELL:MONITORCOLLISION=FALSE
ANNSPELL:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNSPELL2
ANNSPELL2:TYPE=ANIMO
ANNSPELL2:VISIBLE=FALSE
ANNSPELL2:FILENAME=CZAROWANIE3.ANN
ANNSPELL2:TOCANVAS=TRUE
ANNSPELL2:PRIORITY=25
ANNSPELL2:FPS=16
ANNSPELL2:PRELOAD=TRUE
ANNSPELL2:RELEASE=TRUE
ANNSPELL2:MONITORCOLLISION=FALSE
ANNSPELL2:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNWAND0
ANNWAND0:TYPE=ANIMO
ANNWAND0:VISIBLE=TRUE
ANNWAND0:FILENAME=REX_ROZDZKA.ANN
ANNWAND0:TOCANVAS=TRUE
ANNWAND0:PRIORITY=50
ANNWAND0:FPS=16
ANNWAND0:PRELOAD=TRUE
ANNWAND0:RELEASE=TRUE
ANNWAND0:MONITORCOLLISION=FALSE
ANNWAND0:MONITORCOLLISIONALPHA=FALSE
ANNWAND0:ONFINISHED^STRZAL={VARISPELLREADY^SET(0);ARRROUTEX^REMOVEALL();ARRROUTEY^REMOVEALL();ARRANGLES^REMOVEALL();VARDLASTTAN^SET(-1.0);VARIDOMAGIC^SET(0);VARILASTX^SET(VARICURSORX);VARILASTY^SET(VARICURSORY);ANNWAND0^PLAY("IDLE");}
ANNWAND0:ONFRAMECHANGED^LADUJE={ARRTIMEELAPSED^ADDAT(0,1);@IF(ARRTIMEELAPSED^GET(0),">",ARRENERGIZETIME^GET(0),"BFITMP13","");}

OBJECT=ANNWAND1
ANNWAND1:TYPE=ANIMO
ANNWAND1:VISIBLE=TRUE
ANNWAND1:FILENAME=FIGHTER_WAND.ANN
ANNWAND1:TOCANVAS=TRUE
ANNWAND1:PRIORITY=20
ANNWAND1:FPS=16
ANNWAND1:PRELOAD=TRUE
ANNWAND1:RELEASE=TRUE
ANNWAND1:MONITORCOLLISION=FALSE
ANNWAND1:MONITORCOLLISIONALPHA=FALSE
ANNWAND1:ONFINISHED^STRZAL={VARITEMP0^RANDOM(0,100);VARITEMP1^SET(ARREFFECTLEVEL1^GET(4));VARITEMP1^MUL(20);@IF("VARITEMP0","<","VARITEMP1","BFITMP16","");VARITEMP1^SET(ARREFFECTLEVEL1^GET(5));VARITEMP1^MUL(15);@IF("VARITEMP0","<","VARITEMP1","BFITMP19","");BEHAPPLYSPELL^RUN(0,ARRSPELLTYPE^GET(1));ANNCLOUD^SETPOSITION(ANNBODY0^GETPOSITIONX(),ANNBODY1^GETPOSITIONY());ANNCLOUD^PLAY("PLAY");ANNCLOUD^SHOW();ANNWAND1^PLAY("IDLE");@IF("VARITUTORIAL'0||VARITUTORIAL'7","BFITMP21","");}
ANNWAND1:ONFRAMECHANGED^LADUJE={ARRTIMEELAPSED^ADDAT(1,1);@IF(ARRTIMEELAPSED^GET(1),">",ARRENERGIZETIME^GET(1),"BFITMP22","");}

OBJECT=ANNWHIRL1
ANNWHIRL1:TYPE=ANIMO
ANNWHIRL1:VISIBLE=FALSE
ANNWHIRL1:FILENAME=WIR.ANN
ANNWHIRL1:TOCANVAS=TRUE
ANNWHIRL1:PRIORITY=22
ANNWHIRL1:FPS=16
ANNWHIRL1:PRELOAD=TRUE
ANNWHIRL1:RELEASE=TRUE
ANNWHIRL1:MONITORCOLLISION=FALSE
ANNWHIRL1:MONITORCOLLISIONALPHA=FALSE

OBJECT=STL10
STL10:TYPE=ANIMO
STL10:VISIBLE=TRUE
STL10:FILENAME=$COMMON\STL10.ANN
STL10:TOCANVAS=TRUE
STL10:PRIORITY=0
STL10:FPS=16
STL10:PRELOAD=TRUE
STL10:RELEASE=TRUE
STL10:MONITORCOLLISION=FALSE
STL10:MONITORCOLLISIONALPHA=FALSE
STL10:ONFRAMECHANGED^ELAPSE={VARITIMETOEXIT^DEC();}

OBJECT=STL7
STL7:TYPE=ANIMO
STL7:VISIBLE=TRUE
STL7:FILENAME=$COMMON\STL7.ANN
STL7:TOCANVAS=TRUE
STL7:PRIORITY=0
STL7:FPS=16
STL7:PRELOAD=TRUE
STL7:RELEASE=TRUE
STL7:MONITORCOLLISION=FALSE
STL7:MONITORCOLLISIONALPHA=FALSE
STL7:ONFRAMECHANGED^ELAPSE={VARIWAIT^DEC();}

OBJECT=STL8
STL8:TYPE=ANIMO
STL8:VISIBLE=TRUE
STL8:FILENAME=$COMMON\STL8.ANN
STL8:TOCANVAS=TRUE
STL8:PRIORITY=0
STL8:FPS=30
STL8:PRELOAD=TRUE
STL8:RELEASE=TRUE
STL8:MONITORCOLLISION=FALSE
STL8:MONITORCOLLISIONALPHA=FALSE
STL8:ONFRAMECHANGED^ELAPSE={VARDTIME^ADD(1.0);VARITER^SET(0);@IF(ARRSLIDE^GET(0),">","0.0","BFITMP24","");VARSTEMP0^SET(CANVASOBSERVER^GETGRAPHICSAT(VARICURSORX,VARICURSORY,TRUE,40,40,TRUE));@IF("VARSTEMP0^FIND("MUCHA")>-1&&VARSTEMP0!'VARSFLY","BFITMP25","");}

OBJECT=STLEFFECT0_0
STLEFFECT0_0:TYPE=ANIMO
STLEFFECT0_0:VISIBLE=TRUE
STLEFFECT0_0:FILENAME=$COMMON\STL3.ANN
STLEFFECT0_0:TOCANVAS=TRUE
STLEFFECT0_0:PRIORITY=0
STLEFFECT0_0:FPS=16
STLEFFECT0_0:PRELOAD=TRUE
STLEFFECT0_0:RELEASE=TRUE
STLEFFECT0_0:MONITORCOLLISION=FALSE
STLEFFECT0_0:MONITORCOLLISIONALPHA=FALSE
STLEFFECT0_0:ONFRAMECHANGED^ELAPSE={VARITEMP0^SET([ARREFFECTLEVEL0^GET(0)*30]);@IF(ARREFFECTELAPSED0^GET(0),"_","0","BFITMP26","");@IF(ARREFFECTELAPSED0^GET(0),"_","320","BFITMP27","");@IF(ARREFFECTELAPSED0^GET(0),"_","VARITEMP0","BFITMP30","");ARREFFECTELAPSED0^ADDAT(0,1);}

OBJECT=STLEFFECT0_1
STLEFFECT0_1:TYPE=ANIMO
STLEFFECT0_1:VISIBLE=TRUE
STLEFFECT0_1:FILENAME=$COMMON\STL6.ANN
STLEFFECT0_1:TOCANVAS=TRUE
STLEFFECT0_1:PRIORITY=0
STLEFFECT0_1:FPS=16
STLEFFECT0_1:PRELOAD=TRUE
STLEFFECT0_1:RELEASE=TRUE
STLEFFECT0_1:MONITORCOLLISION=FALSE
STLEFFECT0_1:MONITORCOLLISIONALPHA=FALSE
STLEFFECT0_1:ONFRAMECHANGED^ELAPSE={VARITEMP0^SET([ARREFFECTLEVEL1^GET(0)*30]);@IF(ARREFFECTELAPSED1^GET(0),"_","0","BFITMP31","");@IF(ARREFFECTELAPSED1^GET(0),"_","320","BFITMP32","");@IF(ARREFFECTELAPSED1^GET(0),"_","VARITEMP0","BFITMP34","");ARREFFECTELAPSED1^ADDAT(0,1);}

OBJECT=STLEFFECT1_0
STLEFFECT1_0:TYPE=ANIMO
STLEFFECT1_0:VISIBLE=TRUE
STLEFFECT1_0:FILENAME=$COMMON\STL4.ANN
STLEFFECT1_0:TOCANVAS=TRUE
STLEFFECT1_0:PRIORITY=0
STLEFFECT1_0:FPS=16
STLEFFECT1_0:PRELOAD=TRUE
STLEFFECT1_0:RELEASE=TRUE
STLEFFECT1_0:MONITORCOLLISION=FALSE
STLEFFECT1_0:MONITORCOLLISIONALPHA=FALSE
STLEFFECT1_0:ONFRAMECHANGED^ELAPSE={VARITEMP0^SET([40@ARREFFECTLEVEL0^GET(1)]);@IF(ARREFFECTELAPSED0^GET(1),"_","0","BFITMP35","");@IF(ARREFFECTELAPSED0^GET(1),"_","VARITEMP0","BFITMP36","");ARREFFECTELAPSED0^ADDAT(1,1);}

OBJECT=STLEFFECT1_1
STLEFFECT1_1:TYPE=ANIMO
STLEFFECT1_1:VISIBLE=TRUE
STLEFFECT1_1:FILENAME=$COMMON\STL5.ANN
STLEFFECT1_1:TOCANVAS=TRUE
STLEFFECT1_1:PRIORITY=0
STLEFFECT1_1:FPS=16
STLEFFECT1_1:PRELOAD=TRUE
STLEFFECT1_1:RELEASE=TRUE
STLEFFECT1_1:MONITORCOLLISION=FALSE
STLEFFECT1_1:MONITORCOLLISIONALPHA=FALSE
STLEFFECT1_1:ONFRAMECHANGED^ELAPSE={VARITEMP0^SET([40@ARREFFECTLEVEL1^GET(1)]);@IF(ARREFFECTELAPSED1^GET(1),"_","0","BFITMP37","");@IF(ARREFFECTELAPSED1^GET(1),"_","VARITEMP0","BFITMP38","");ARREFFECTELAPSED1^ADDAT(1,1);}

OBJECT=STLMAGIC
STLMAGIC:TYPE=ANIMO
STLMAGIC:VISIBLE=TRUE
STLMAGIC:FILENAME=$COMMON\STL0.ANN
STLMAGIC:TOCANVAS=TRUE
STLMAGIC:PRIORITY=0
STLMAGIC:FPS=5
STLMAGIC:PRELOAD=TRUE
STLMAGIC:RELEASE=TRUE
STLMAGIC:MONITORCOLLISION=FALSE
STLMAGIC:MONITORCOLLISIONALPHA=FALSE
STLMAGIC:ONFRAMECHANGED^ELAPSE={BEHKAZAM^RUN();}

OBJECT=STLFALL
STLFALL:TYPE=ANIMO
STLFALL:VISIBLE=TRUE
STLFALL:FILENAME=$COMMON\STL9.ANN
STLFALL:TOCANVAS=TRUE
STLFALL:PRIORITY=0
STLFALL:FPS=16
STLFALL:PRELOAD=TRUE
STLFALL:RELEASE=TRUE
STLFALL:MONITORCOLLISION=FALSE
STLFALL:MONITORCOLLISIONALPHA=FALSE
STLFALL:ONFRAMECHANGED^ELAPSE={GRPMOVE^MOVE(0,15);}

OBJECT=ANNSZATY
ANNSZATY:TYPE=ANIMO
ANNSZATY:VISIBLE=FALSE
ANNSZATY:FILENAME=ZLY_UBRANIE.ANN
ANNSZATY:TOCANVAS=TRUE
ANNSZATY:PRIORITY=21
ANNSZATY:FPS=16
ANNSZATY:PRELOAD=TRUE
ANNSZATY:RELEASE=TRUE
ANNSZATY:MONITORCOLLISION=FALSE
ANNSZATY:MONITORCOLLISIONALPHA=FALSE

OBJECT=IMGZOOM
IMGZOOM:TYPE=IMAGE
IMGZOOM:VISIBLE=TRUE
IMGZOOM:FILENAME=TEMP.IMG
IMGZOOM:TOCANVAS=TRUE
IMGZOOM:PRIORITY=0
IMGZOOM:PRELOAD=TRUE
IMGZOOM:RELEASE=TRUE
IMGZOOM:MONITORCOLLISION=FALSE
IMGZOOM:MONITORCOLLISIONALPHA=FALSE

OBJECT=IMGOVER1
IMGOVER1:TYPE=IMAGE
IMGOVER1:VISIBLE=TRUE
IMGOVER1:FILENAME=$COMMON\NAKLADKA1.IMG
IMGOVER1:TOCANVAS=TRUE
IMGOVER1:PRIORITY=100
IMGOVER1:PRELOAD=TRUE
IMGOVER1:RELEASE=TRUE
IMGOVER1:MONITORCOLLISION=FALSE
IMGOVER1:MONITORCOLLISIONALPHA=FALSE

OBJECT=IMGOVER2
IMGOVER2:TYPE=IMAGE
IMGOVER2:VISIBLE=TRUE
IMGOVER2:FILENAME=$COMMON\NAKLADKA2.IMG
IMGOVER2:TOCANVAS=TRUE
IMGOVER2:PRIORITY=100
IMGOVER2:PRELOAD=TRUE
IMGOVER2:RELEASE=TRUE
IMGOVER2:MONITORCOLLISION=FALSE
IMGOVER2:MONITORCOLLISIONALPHA=FALSE

OBJECT=IMGOVER3
IMGOVER3:TYPE=IMAGE
IMGOVER3:VISIBLE=TRUE
IMGOVER3:FILENAME=$COMMON\NAKLADKA3.IMG
IMGOVER3:TOCANVAS=TRUE
IMGOVER3:PRIORITY=100
IMGOVER3:PRELOAD=TRUE
IMGOVER3:RELEASE=TRUE
IMGOVER3:MONITORCOLLISION=FALSE
IMGOVER3:MONITORCOLLISIONALPHA=FALSE

OBJECT=IMGOVER4
IMGOVER4:TYPE=IMAGE
IMGOVER4:VISIBLE=TRUE
IMGOVER4:FILENAME=$COMMON\NAKLADKA4.IMG
IMGOVER4:TOCANVAS=TRUE
IMGOVER4:PRIORITY=100
IMGOVER4:PRELOAD=TRUE
IMGOVER4:RELEASE=TRUE
IMGOVER4:MONITORCOLLISION=FALSE
IMGOVER4:MONITORCOLLISIONALPHA=FALSE

OBJECT=BTNEXIT
BTNEXIT:TYPE=BUTTON
BTNEXIT:VISIBLE=TRUE
BTNEXIT:ENABLE=TRUE
BTNEXIT:DRAGGABLE=FALSE
BTNEXIT:GFXSTANDARD=ANNEXIT
BTNEXIT:ONCLICKED={G_SLASTOBJECTS^SET(["MAGIC_"+S_SMAGICPLACE+S_IMAGICFIGHTER]);G_SARCADEOBJECTS^SET(VARSRETURNTO);__SCREENSHOT__^RUN();PRZYGODA^GOTO("ARCADE");@BREAK();}

OBJECT=GRPMOVE
GRPMOVE:TYPE=GROUP

OBJECT=SNDREXFAILED
SNDREXFAILED:TYPE=SOUND
SNDREXFAILED:FILENAME=NAR_M263.WAV
SNDREXFAILED:PRELOAD=FALSE
SNDREXFAILED:FLUSHAFTERPLAYED=FALSE
SNDREXFAILED:ONFINISHED={G_SARCADEOBJECTS^SET(VARSRETURNTO);__SCREENSHOT__^RUN();PRZYGODA^GOTO("LIMBO");@BREAK();}

OBJECT=SNDREXKILL
SNDREXKILL:TYPE=SOUND
SNDREXKILL:FILENAME=REX_R043.WAV
SNDREXKILL:PRELOAD=FALSE
SNDREXKILL:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDREXWINGES
SNDREXWINGES:TYPE=SOUND
SNDREXWINGES:FILENAME=NAR_M233.WAV
SNDREXWINGES:PRELOAD=FALSE
SNDREXWINGES:FLUSHAFTERPLAYED=FALSE
SNDREXWINGES:ONFINISHED={G_SLASTOBJECTS^SET(["MAGIC_"+S_SMAGICPLACE]);G_SARCADEOBJECTS^SET(VARSRETURNTO);__SCREENSHOT__^RUN();PRZYGODA^GOTO("ARCADE");@BREAK();}

OBJECT=SNDREXWINKURA
SNDREXWINKURA:TYPE=SOUND
SNDREXWINKURA:FILENAME=NAR_M234.WAV
SNDREXWINKURA:PRELOAD=FALSE
SNDREXWINKURA:FLUSHAFTERPLAYED=FALSE
SNDREXWINKURA:ONFINISHED={G_SLASTOBJECTS^SET(["MAGIC_"+S_SMAGICPLACE]);G_SARCADEOBJECTS^SET(VARSRETURNTO);__SCREENSHOT__^RUN();PRZYGODA^GOTO("ARCADE");@BREAK();}

OBJECT=SNDTUT0
SNDTUT0:TYPE=SOUND
SNDTUT0:FILENAME=GUL_M348.WAV
SNDTUT0:PRELOAD=FALSE
SNDTUT0:FLUSHAFTERPLAYED=FALSE
SNDTUT0:ONSTARTED={VARITUTORIAL^SET(1);MAGIC^SETMUSICVOLUME(G_ARRSETTINGS^GET(1));}
SNDTUT0:ONFINISHED={VARITUTORIAL^SET(0);MAGIC^SETMUSICVOLUME(G_ARRSETTINGS^GET(1));SNDTUT1^PLAY();}

OBJECT=SNDTUT1
SNDTUT1:TYPE=SOUND
SNDTUT1:FILENAME=GUL_M349.WAV
SNDTUT1:PRELOAD=FALSE
SNDTUT1:FLUSHAFTERPLAYED=FALSE
SNDTUT1:ONSTARTED={VARITUTORIAL^SET(1);}
SNDTUT1:ONFINISHED={VARITUTORIAL^SET(2);}

OBJECT=SNDTUT2
SNDTUT2:TYPE=SOUND
SNDTUT2:FILENAME=GUL_M350.WAV
SNDTUT2:PRELOAD=FALSE
SNDTUT2:FLUSHAFTERPLAYED=FALSE
SNDTUT2:ONSTARTED={VARITUTORIAL^SET(1);}
SNDTUT2:ONFINISHED={VARITUTORIAL^SET(0);SNDTUT3^PLAY();}

OBJECT=SNDTUT3
SNDTUT3:TYPE=SOUND
SNDTUT3:FILENAME=GUL_M351.WAV
SNDTUT3:PRELOAD=FALSE
SNDTUT3:FLUSHAFTERPLAYED=FALSE
SNDTUT3:ONSTARTED={VARITUTORIAL^SET(1);}
SNDTUT3:ONFINISHED={VARITUTORIAL^SET(0);SNDTUT4^PLAY();}

OBJECT=SNDTUT4
SNDTUT4:TYPE=SOUND
SNDTUT4:FILENAME=GUL_M352.WAV
SNDTUT4:PRELOAD=FALSE
SNDTUT4:FLUSHAFTERPLAYED=FALSE
SNDTUT4:ONSTARTED={VARITUTORIAL^SET(1);}
SNDTUT4:ONFINISHED={VARITUTORIAL^SET(0);SNDTUT5^PLAY();}

OBJECT=SNDTUT5
SNDTUT5:TYPE=SOUND
SNDTUT5:FILENAME=GUL_M353.WAV
SNDTUT5:PRELOAD=FALSE
SNDTUT5:FLUSHAFTERPLAYED=FALSE
SNDTUT5:ONSTARTED={VARITUTORIAL^SET(1);}
SNDTUT5:ONFINISHED={VARITUTORIAL^SET(0);SNDTUT6^PLAY();}

OBJECT=SNDTUT6
SNDTUT6:TYPE=SOUND
SNDTUT6:FILENAME=GUL_M354.WAV
SNDTUT6:PRELOAD=FALSE
SNDTUT6:FLUSHAFTERPLAYED=FALSE
SNDTUT6:ONSTARTED={VARITUTORIAL^SET(1);BEHDOTUTSPELL^RUN("TUT_PUDDING_");}
SNDTUT6:ONFINISHED={VARITUTORIAL^SET(3);}

OBJECT=SNDTUT7
SNDTUT7:TYPE=SOUND
SNDTUT7:FILENAME=GUL_M355.WAV
SNDTUT7:PRELOAD=FALSE
SNDTUT7:FLUSHAFTERPLAYED=FALSE
SNDTUT7:ONSTARTED={VARITUTORIAL^SET(1);}
SNDTUT7:ONFINISHED={VARITUTORIAL^SET(4);VARITUTREPEAT^SET(3);}

OBJECT=SNDTUT8
SNDTUT8:TYPE=SOUND
SNDTUT8:FILENAME=GUL_M356.WAV
SNDTUT8:PRELOAD=FALSE
SNDTUT8:FLUSHAFTERPLAYED=FALSE
SNDTUT8:ONSTARTED={VARITUTORIAL^SET(1);}
SNDTUT8:ONFINISHED={VARITUTORIAL^SET(4);}

OBJECT=SNDTUT9
SNDTUT9:TYPE=SOUND
SNDTUT9:FILENAME=GUL_M357.WAV
SNDTUT9:PRELOAD=FALSE
SNDTUT9:FLUSHAFTERPLAYED=FALSE
SNDTUT9:ONSTARTED={VARITUTORIAL^SET(1);}
SNDTUT9:ONFINISHED={VARITUTORIAL^SET(0);SNDTUT10^PLAY();}

OBJECT=SNDTUT10
SNDTUT10:TYPE=SOUND
SNDTUT10:FILENAME=GUL_M358.WAV
SNDTUT10:PRELOAD=FALSE
SNDTUT10:FLUSHAFTERPLAYED=FALSE
SNDTUT10:ONSTARTED={VARITUTORIAL^SET(1);VARBLEARNED^SET(TRUE);}
SNDTUT10:ONFINISHED={VARITUTORIAL^SET(0);BEHRESETEFFECTS^RUN();BTNEXIT^ENABLE();@IF("VARITUTCOUNT",">","-2","BFITMP39","");}

OBJECT=SNDTUT11
SNDTUT11:TYPE=SOUND
SNDTUT11:FILENAME=GUL_M359.WAV
SNDTUT11:PRELOAD=FALSE
SNDTUT11:FLUSHAFTERPLAYED=FALSE
SNDTUT11:ONSTARTED={VARITUTORIAL^SET(1);}
SNDTUT11:ONFINISHED={VARITUTORIAL^SET(5);}

#ADD NEW BEH TO DETERMINE WHICH SND TO PLAY
OBJECT=BEHSNDPRACTICE
BEHSNDPRACTICE:TYPE=BEHAVIOUR
BEHSNDPRACTICE:CODE={@IF("S_SMAGICPLACE'WMWNETRZE","{SNDPRACTICEWALDI^PLAY();}","{SNDPRACTICE^PLAY();}");}

OBJECT=SNDPRACTICEWALDI
SNDPRACTICEWALDI:TYPE=SOUND
SNDPRACTICEWALDI:FILENAME=WALDI_W033.WAV
SNDPRACTICEWALDI:PRELOAD=FALSE
SNDPRACTICEWALDI:FLUSHAFTERPLAYED=FALSE
SNDPRACTICEWALDI:ONSTARTED={VARITUTORIAL^SET(1);BEHDOTUTSPELL^RUN(ARRTUTSPELLS^GET(VARIREPEATSPELL));VARITRAINING^SET(1);}
SNDPRACTICEWALDI:ONFINISHED={@IF("VARIREPEATSPELL",">","5","BFITMP40","BFITMP41");}

OBJECT=SNDPRACTICE
SNDPRACTICE:TYPE=SOUND
SNDPRACTICE:FILENAME=GUL_M368.WAV
SNDPRACTICE:PRELOAD=FALSE
SNDPRACTICE:FLUSHAFTERPLAYED=FALSE
SNDPRACTICE:ONSTARTED={VARITUTORIAL^SET(1);BEHDOTUTSPELL^RUN(ARRTUTSPELLS^GET(VARIREPEATSPELL));VARITRAINING^SET(1);}
SNDPRACTICE:ONFINISHED={@IF("VARIREPEATSPELL",">","5","BFITMP40","BFITMP41");}

OBJECT=SNDTUTWHIRLSENTER
SNDTUTWHIRLSENTER:TYPE=SOUND
SNDTUTWHIRLSENTER:FILENAME=WALDI_W023.WAV
SNDTUTWHIRLSENTER:PRELOAD=FALSE
SNDTUTWHIRLSENTER:FLUSHAFTERPLAYED=FALSE
SNDTUTWHIRLSENTER:ONSTARTED={VARITUTORIAL^SET(1);BEHDOTUTSPELL^RUN("TUT_WHIRLS_");}
SNDTUTWHIRLSENTER:ONFINISHED={VARITUTORIAL^SET(11);}

OBJECT=SNDTUTDARKENTER
SNDTUTDARKENTER:TYPE=SOUND
SNDTUTDARKENTER:FILENAME=WALDI_W022.WAV
SNDTUTDARKENTER:PRELOAD=FALSE
SNDTUTDARKENTER:FLUSHAFTERPLAYED=FALSE
SNDTUTDARKENTER:ONSTARTED={VARITUTORIAL^SET(1);BEHDOTUTSPELL^RUN("TUT_DARK_");}
SNDTUTDARKENTER:ONFINISHED={VARITUTORIAL^SET(11);}

OBJECT=SNDTUTFROGENTER
SNDTUTFROGENTER:TYPE=SOUND
SNDTUTFROGENTER:FILENAME=SNEJK_M399.WAV
SNDTUTFROGENTER:PRELOAD=FALSE
SNDTUTFROGENTER:FLUSHAFTERPLAYED=FALSE
SNDTUTFROGENTER:ONSTARTED={VARITUTORIAL^SET(1);BEHDOTUTSPELL^RUN("TUT_FROG_");}
SNDTUTFROGENTER:ONFINISHED={VARITUTORIAL^SET(10);}

OBJECT=SNDTUTFLIESENTER
SNDTUTFLIESENTER:TYPE=SOUND
SNDTUTFLIESENTER:FILENAME=SNEJK_M398.WAV
SNDTUTFLIESENTER:PRELOAD=FALSE
SNDTUTFLIESENTER:FLUSHAFTERPLAYED=FALSE
SNDTUTFLIESENTER:ONSTARTED={VARITUTORIAL^SET(1);BEHDOTUTSPELL^RUN("TUT_FLIES_");}
SNDTUTFLIESENTER:ONFINISHED={VARITUTORIAL^SET(10);}

OBJECT=SNDTUTFROGDEFENTER
SNDTUTFROGDEFENTER:TYPE=SOUND
SNDTUTFROGDEFENTER:FILENAME=WALDI_W024.WAV
SNDTUTFROGDEFENTER:PRELOAD=FALSE
SNDTUTFROGDEFENTER:FLUSHAFTERPLAYED=FALSE
SNDTUTFROGDEFENTER:ONSTARTED={VARITUTORIAL^SET(1);BEHDOTUTSPELL^RUN("TUT_FROGDEF_");}
SNDTUTFROGDEFENTER:ONFINISHED={VARITUTORIAL^SET(2);}

OBJECT=SNDTUTWHIRLSDEFENTER
SNDTUTWHIRLSDEFENTER:TYPE=SOUND
SNDTUTWHIRLSDEFENTER:FILENAME=WALDI_W025.WAV
SNDTUTWHIRLSDEFENTER:PRELOAD=FALSE
SNDTUTWHIRLSDEFENTER:FLUSHAFTERPLAYED=FALSE
SNDTUTWHIRLSDEFENTER:ONSTARTED={VARITUTORIAL^SET(1);BEHDOTUTSPELL^RUN("TUT_WHIRLSDEF_");}
SNDTUTWHIRLSDEFENTER:ONFINISHED={VARITUTORIAL^SET(2);}

OBJECT=SNDTUTFLIESDEFENTER
SNDTUTFLIESDEFENTER:TYPE=SOUND
SNDTUTFLIESDEFENTER:FILENAME=SNEJK_M402.WAV
SNDTUTFLIESDEFENTER:PRELOAD=FALSE
SNDTUTFLIESDEFENTER:FLUSHAFTERPLAYED=FALSE
SNDTUTFLIESDEFENTER:ONSTARTED={VARITUTORIAL^SET(1);BEHDOTUTSPELL^RUN("TUT_FLIESDEF_");}
SNDTUTFLIESDEFENTER:ONFINISHED={VARITUTORIAL^SET(2);}

OBJECT=SNDTUTDARKNESSDEFENTER
SNDTUTDARKNESSDEFENTER:TYPE=SOUND
SNDTUTDARKNESSDEFENTER:FILENAME=SNEJK_M400.WAV
SNDTUTDARKNESSDEFENTER:PRELOAD=FALSE
SNDTUTDARKNESSDEFENTER:FLUSHAFTERPLAYED=FALSE
SNDTUTDARKNESSDEFENTER:ONSTARTED={VARITUTORIAL^SET(1);BEHDOTUTSPELL^RUN("TUT_DARKDEF_");}
SNDTUTDARKNESSDEFENTER:ONFINISHED={VARITUTORIAL^SET(2);}

OBJECT=SNDTUTSENENTER
SNDTUTSENENTER:TYPE=SOUND
SNDTUTSENENTER:FILENAME=GUL_M365.WAV
SNDTUTSENENTER:PRELOAD=FALSE
SNDTUTSENENTER:FLUSHAFTERPLAYED=FALSE
SNDTUTSENENTER:ONSTARTED={VARITUTORIAL^SET(1);BEHDOTUTSPELL^RUN("TUT_SLEEP_");}
SNDTUTSENENTER:ONFINISHED={VARITUTORIAL^SET(9);}

OBJECT=SNDTUTSENDEFENTER
SNDTUTSENDEFENTER:TYPE=SOUND
SNDTUTSENDEFENTER:FILENAME=GUL_M360.WAV
SNDTUTSENDEFENTER:PRELOAD=FALSE
SNDTUTSENDEFENTER:FLUSHAFTERPLAYED=FALSE
SNDTUTSENDEFENTER:ONSTARTED={VARITUTORIAL^SET(1);BEHDOTUTSPELL^RUN("TUT_SLEEPDEF_");}
SNDTUTSENDEFENTER:ONFINISHED={VARITUTORIAL^SET(2);}

OBJECT=SNDTUTBUDDEFENTER
SNDTUTBUDDEFENTER:TYPE=SOUND
SNDTUTBUDDEFENTER:FILENAME=GUL_M364.WAV
SNDTUTBUDDEFENTER:PRELOAD=FALSE
SNDTUTBUDDEFENTER:FLUSHAFTERPLAYED=FALSE
SNDTUTBUDDEFENTER:ONSTARTED={VARITUTORIAL^SET(1);BEHDOTUTSPELL^RUN("TUT_PUDDINGDEF_");}
SNDTUTBUDDEFENTER:ONFINISHED={VARITUTORIAL^SET(2);}

#ADD NEW BEH TO DETERMINE WHICH SND TO PLAY
OBJECT=BEHSNDLEARNEDSHAPE
BEHSNDLEARNEDSHAPE:TYPE=BEHAVIOUR
BEHSNDLEARNEDSHAPE:CODE={@IF("S_SMAGICPLACE'WMWNETRZE","{BEHLEARNEDSHAPEWALDI^RUN();}","{SNDLEARNEDSHAPE^PLAY();}");}

OBJECT=SNDLEARNEDSHAPE
SNDLEARNEDSHAPE:TYPE=SOUND
SNDLEARNEDSHAPE:FILENAME=GUL_M361.WAV
SNDLEARNEDSHAPE:PRELOAD=FALSE
SNDLEARNEDSHAPE:FLUSHAFTERPLAYED=FALSE
SNDLEARNEDSHAPE:ONSTARTED={VARITUTORIAL^SET(1);}
SNDLEARNEDSHAPE:ONFINISHED={VARITUTORIAL^SET(0);BEHSNDATTACK^RUN();}

#ADD NEW BEH TO RANDOMIZE WHICH SND TO PLAY
OBJECT=BEHLEARNEDSHAPEWALDI
BEHLEARNEDSHAPEWALDI:TYPE=BEHAVIOUR
BEHLEARNEDSHAPEWALDI:CODE={@STRING("SNDNAME","SNDLEARNEDSHAPEWALDI");SNDNAME^ADD(RANDOM^GET(2));*SNDNAME^PLAY();}

OBJECT=SNDLEARNEDSHAPEWALDI0
SNDLEARNEDSHAPEWALDI0:TYPE=SOUND
SNDLEARNEDSHAPEWALDI0:FILENAME=WALDI_W128.WAV
SNDLEARNEDSHAPEWALDI0:PRELOAD=FALSE
SNDLEARNEDSHAPEWALDI0:FLUSHAFTERPLAYED=FALSE
SNDLEARNEDSHAPEWALDI0:ONSTARTED={VARITUTORIAL^SET(1);}
SNDLEARNEDSHAPEWALDI0:ONFINISHED={VARITUTORIAL^SET(0);BEHSNDATTACK^RUN();}

OBJECT=SNDLEARNEDSHAPEWALDI1
SNDLEARNEDSHAPEWALDI1:TYPE=SOUND
SNDLEARNEDSHAPEWALDI1:FILENAME=WALDI_W130.WAV
SNDLEARNEDSHAPEWALDI1:PRELOAD=FALSE
SNDLEARNEDSHAPEWALDI1:FLUSHAFTERPLAYED=FALSE
SNDLEARNEDSHAPEWALDI1:ONSTARTED={VARITUTORIAL^SET(1);}
SNDLEARNEDSHAPEWALDI1:ONFINISHED={VARITUTORIAL^SET(0);BEHSNDATTACK^RUN();}

#ADD NEW BEH TO DETERMINE WHICH SND TO PLAY
OBJECT=BEHSNDATTACK
BEHSNDATTACK:TYPE=BEHAVIOUR
BEHSNDATTACK:CODE={@IF("S_SMAGICPLACE'WMWNETRZE","{SNDMANEKINUS^PLAY();}","{SNDATTACK^PLAY();}");}

OBJECT=SNDATTACK
SNDATTACK:TYPE=SOUND
SNDATTACK:FILENAME=GUL_M362.WAV
SNDATTACK:PRELOAD=FALSE
SNDATTACK:FLUSHAFTERPLAYED=FALSE
SNDATTACK:ONSTARTED={VARITUTORIAL^SET(1);}
SNDATTACK:ONFINISHED={VARITUTORIAL^SET(7);BEHDOSPELL^RUN();}

OBJECT=SNDMANEKINUS
SNDMANEKINUS:TYPE=SOUND
SNDMANEKINUS:FILENAME=WALDI_W029.WAV
SNDMANEKINUS:PRELOAD=FALSE
SNDMANEKINUS:FLUSHAFTERPLAYED=FALSE
SNDMANEKINUS:ONSTARTED={VARITUTORIAL^SET(1);}
SNDMANEKINUS:ONFINISHED={VARITUTORIAL^SET(7);BEHDOSPELL^RUN();}

OBJECT=SNDLEARNEDOFF
SNDLEARNEDOFF:TYPE=SOUND
SNDLEARNEDOFF:FILENAME=GUL_M366.WAV
SNDLEARNEDOFF:PRELOAD=FALSE
SNDLEARNEDOFF:FLUSHAFTERPLAYED=FALSE
SNDLEARNEDOFF:ONSTARTED={VARITUTORIAL^SET(1);G_MENU^LEVELUP();VARBLEARNED^SET(TRUE);}
SNDLEARNEDOFF:ONFINISHED={VARITUTORIAL^SET(0);BEHSNDTRYAGAIN^RUN();}

OBJECT=SNDLEARNEDOFFSNEJK
SNDLEARNEDOFFSNEJK:TYPE=SOUND
SNDLEARNEDOFFSNEJK:FILENAME=SNEJK_M407.WAV
SNDLEARNEDOFFSNEJK:PRELOAD=FALSE
SNDLEARNEDOFFSNEJK:FLUSHAFTERPLAYED=FALSE
SNDLEARNEDOFFSNEJK:ONSTARTED={VARITUTORIAL^SET(1);G_MENU^LEVELUP();VARBLEARNED^SET(TRUE);}
SNDLEARNEDOFFSNEJK:ONFINISHED={VARITUTORIAL^SET(0);BEHSNDTRYAGAIN^RUN();}

OBJECT=SNDLEARNEDOFFWALDI
SNDLEARNEDOFFWALDI:TYPE=SOUND
SNDLEARNEDOFFWALDI:FILENAME=WALDI_W031.WAV
SNDLEARNEDOFFWALDI:PRELOAD=FALSE
SNDLEARNEDOFFWALDI:FLUSHAFTERPLAYED=FALSE
SNDLEARNEDOFFWALDI:ONSTARTED={VARITUTORIAL^SET(1);G_MENU^LEVELUP();VARBLEARNED^SET(TRUE);}
SNDLEARNEDOFFWALDI:ONFINISHED={VARITUTORIAL^SET(0);BEHSNDTRYAGAIN^RUN();}

#ADD NEW BEH TO DETERMINE WHICH SND TO PLAY
OBJECT=BEHLEARNEDDEF
BEHLEARNEDDEF:TYPE=BEHAVIOUR
BEHLEARNEDDEF:CODE={@IF("S_SMAGICPLACE'WMWNETRZE","{BEHLEARNEDDEFWALDI^RUN();}","{SNDLEARNEDDEF^PLAY();}");}

OBJECT=SNDLEARNEDDEF
SNDLEARNEDDEF:TYPE=SOUND
SNDLEARNEDDEF:FILENAME=GUL_M363.WAV
SNDLEARNEDDEF:PRELOAD=FALSE
SNDLEARNEDDEF:FLUSHAFTERPLAYED=FALSE
SNDLEARNEDDEF:ONSTARTED={VARITUTORIAL^SET(1);@IF("VARITRAINING'0","{G_MENU^LEVELUP();VARITRAINING^SET(1);}","");VARBLEARNED^SET(TRUE);}
SNDLEARNEDDEF:ONFINISHED={VARITUTORIAL^SET(0);BEHSNDTRYAGAIN^RUN();}

#ADD NEW BEH TO RANDOMIZE WHICH SND TO PLAY
OBJECT=BEHLEARNEDDEFWALDI
BEHLEARNEDDEFWALDI:TYPE=BEHAVIOUR
BEHLEARNEDDEFWALDI:CODE={@STRING("SNDNAME","SNDLEARNEDDEFWALDI");SNDNAME^ADD(RANDOM^GET(2));*SNDNAME^PLAY();}

OBJECT=SNDLEARNEDDEFWALDI0
SNDLEARNEDDEFWALDI0:TYPE=SOUND
SNDLEARNEDDEFWALDI0:FILENAME=WALDI_W028.WAV
SNDLEARNEDDEFWALDI0:PRELOAD=FALSE
SNDLEARNEDDEFWALDI0:FLUSHAFTERPLAYED=FALSE
SNDLEARNEDDEFWALDI0:ONSTARTED={VARITUTORIAL^SET(1);@IF("VARITRAINING'0","{G_MENU^LEVELUP();VARITRAINING^SET(1);}","");VARBLEARNED^SET(TRUE);}
SNDLEARNEDDEFWALDI0:ONFINISHED={VARITUTORIAL^SET(0);BEHSNDTRYAGAIN^RUN();}

OBJECT=SNDLEARNEDDEFWALDI1
SNDLEARNEDDEFWALDI1:TYPE=SOUND
SNDLEARNEDDEFWALDI1:FILENAME=WALDI_W030.WAV
SNDLEARNEDDEFWALDI1:PRELOAD=FALSE
SNDLEARNEDDEFWALDI1:FLUSHAFTERPLAYED=FALSE
SNDLEARNEDDEFWALDI1:ONSTARTED={VARITUTORIAL^SET(1);@IF("VARITRAINING'0","{G_MENU^LEVELUP();VARITRAINING^SET(1);}","");VARBLEARNED^SET(TRUE);}
SNDLEARNEDDEFWALDI1:ONFINISHED={VARITUTORIAL^SET(0);BEHSNDTRYAGAIN^RUN();}

#ADD NEW BEH TO DETERMINE WHICH SND TO PLAY
OBJECT=BEHSNDTRYAGAIN
BEHSNDTRYAGAIN:TYPE=BEHAVIOUR
BEHSNDTRYAGAIN:CODE={@IF("S_SMAGICPLACE'WMWNETRZE","{SNDTRYAGAINWALDI^PLAY();}","{SNDTRYAGAIN^PLAY();}");}

OBJECT=SNDTRYAGAIN
SNDTRYAGAIN:TYPE=SOUND
SNDTRYAGAIN:FILENAME=GUL_M367.WAV
SNDTRYAGAIN:PRELOAD=FALSE
SNDTRYAGAIN:FLUSHAFTERPLAYED=FALSE
SNDTRYAGAIN:ONSTARTED={VARBLEARNED^SET(TRUE);VARITUTORIAL^SET(1);}
SNDTRYAGAIN:ONFINISHED={BEHRESETEFFECTS^RUN();BTNEXIT^ENABLE();@IF("VARIDEFTOPRACTICE","_","-1","BFITMP42","BFITMP43");}

OBJECT=SNDTRYAGAINWALDI
SNDTRYAGAINWALDI:TYPE=SOUND
SNDTRYAGAINWALDI:FILENAME=WALDI_W032.WAV
SNDTRYAGAINWALDI:PRELOAD=FALSE
SNDTRYAGAINWALDI:FLUSHAFTERPLAYED=FALSE
SNDTRYAGAINWALDI:ONSTARTED={VARBLEARNED^SET(TRUE);VARITUTORIAL^SET(1);}
SNDTRYAGAINWALDI:ONFINISHED={BEHRESETEFFECTS^RUN();BTNEXIT^ENABLE();@IF("VARIDEFTOPRACTICE","_","-1","BFITMP42","BFITMP43");}

OBJECT=SNDSTART
SNDSTART:TYPE=SOUND
SNDSTART:FILENAME=NAR_M232.WAV
SNDSTART:PRELOAD=FALSE
SNDSTART:FLUSHAFTERPLAYED=FALSE
SNDSTART:ONFINISHED={SNDREXZDEN^PLAY();}

OBJECT=SNDSTARTNOSPELL
SNDSTARTNOSPELL:TYPE=SOUND
SNDSTARTNOSPELL:FILENAME=NAR_M231.WAV
SNDSTARTNOSPELL:PRELOAD=FALSE
SNDSTARTNOSPELL:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDGESPAIN0
SNDGESPAIN0:TYPE=SOUND
SNDGESPAIN0:FILENAME=DROB_M245.WAV
SNDGESPAIN0:PRELOAD=TRUE
SNDGESPAIN0:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDGESPAIN8
SNDGESPAIN8:TYPE=SOUND
SNDGESPAIN8:FILENAME=DROB_M253.WAV
SNDGESPAIN8:PRELOAD=TRUE
SNDGESPAIN8:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDGESPAIN7
SNDGESPAIN7:TYPE=SOUND
SNDGESPAIN7:FILENAME=DROB_M252.WAV
SNDGESPAIN7:PRELOAD=TRUE
SNDGESPAIN7:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDGESPAIN6
SNDGESPAIN6:TYPE=SOUND
SNDGESPAIN6:FILENAME=DROB_M251.WAV
SNDGESPAIN6:PRELOAD=TRUE
SNDGESPAIN6:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDGESPAIN5
SNDGESPAIN5:TYPE=SOUND
SNDGESPAIN5:FILENAME=DROB_M250.WAV
SNDGESPAIN5:PRELOAD=TRUE
SNDGESPAIN5:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDGESPAIN4
SNDGESPAIN4:TYPE=SOUND
SNDGESPAIN4:FILENAME=DROB_M249.WAV
SNDGESPAIN4:PRELOAD=TRUE
SNDGESPAIN4:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDGESPAIN3
SNDGESPAIN3:TYPE=SOUND
SNDGESPAIN3:FILENAME=DROB_M248.WAV
SNDGESPAIN3:PRELOAD=TRUE
SNDGESPAIN3:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDGESPAIN2
SNDGESPAIN2:TYPE=SOUND
SNDGESPAIN2:FILENAME=DROB_M247.WAV
SNDGESPAIN2:PRELOAD=TRUE
SNDGESPAIN2:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDGESPAIN1
SNDGESPAIN1:TYPE=SOUND
SNDGESPAIN1:FILENAME=DROB_M246.WAV
SNDGESPAIN1:PRELOAD=TRUE
SNDGESPAIN1:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDZLYPAIN0
SNDZLYPAIN0:TYPE=SOUND
SNDZLYPAIN0:FILENAME=KRETES_F055.WAV
SNDZLYPAIN0:PRELOAD=TRUE
SNDZLYPAIN0:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDZLYPAIN1
SNDZLYPAIN1:TYPE=SOUND
SNDZLYPAIN1:FILENAME=KRETES_F056.WAV
SNDZLYPAIN1:PRELOAD=TRUE
SNDZLYPAIN1:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDZLYPAIN2
SNDZLYPAIN2:TYPE=SOUND
SNDZLYPAIN2:FILENAME=KRETES_F055.WAV
SNDZLYPAIN2:PRELOAD=TRUE
SNDZLYPAIN2:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDZLYPAIN3
SNDZLYPAIN3:TYPE=SOUND
SNDZLYPAIN3:FILENAME=KRETES_F056.WAV
SNDZLYPAIN3:PRELOAD=TRUE
SNDZLYPAIN3:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDZLYPAIN4
SNDZLYPAIN4:TYPE=SOUND
SNDZLYPAIN4:FILENAME=KRETES_F055.WAV
SNDZLYPAIN4:PRELOAD=TRUE
SNDZLYPAIN4:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDZLYPAIN5
SNDZLYPAIN5:TYPE=SOUND
SNDZLYPAIN5:FILENAME=CZARO_F060.WAV
SNDZLYPAIN5:PRELOAD=TRUE
SNDZLYPAIN5:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDZLYPAIN6
SNDZLYPAIN6:TYPE=SOUND
SNDZLYPAIN6:FILENAME=KRETES_F056.WAV
SNDZLYPAIN6:PRELOAD=TRUE
SNDZLYPAIN6:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDZLYPAIN7
SNDZLYPAIN7:TYPE=SOUND
SNDZLYPAIN7:FILENAME=KRETES_F055.WAV
SNDZLYPAIN7:PRELOAD=TRUE
SNDZLYPAIN7:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDZLYTRAFIL0
SNDZLYTRAFIL0:TYPE=SOUND
SNDZLYTRAFIL0:FILENAME=KRETES_F054.WAV
SNDZLYTRAFIL0:PRELOAD=TRUE
SNDZLYTRAFIL0:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDZLYTRAFIL1
SNDZLYTRAFIL1:TYPE=SOUND
SNDZLYTRAFIL1:FILENAME=KRETES_F055.WAV
SNDZLYTRAFIL1:PRELOAD=TRUE
SNDZLYTRAFIL1:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDREXTRAFIL0
SNDREXTRAFIL0:TYPE=SOUND
SNDREXTRAFIL0:FILENAME=KRETES_F056.WAV
SNDREXTRAFIL0:PRELOAD=TRUE
SNDREXTRAFIL0:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDREXTRAFIL1
SNDREXTRAFIL1:TYPE=SOUND
SNDREXTRAFIL1:FILENAME=KRETES_F057.WAV
SNDREXTRAFIL1:PRELOAD=TRUE
SNDREXTRAFIL1:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDKURAPAIN0
SNDKURAPAIN0:TYPE=SOUND
SNDKURAPAIN0:FILENAME=DROB_M254.WAV
SNDKURAPAIN0:PRELOAD=TRUE
SNDKURAPAIN0:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDKURAPAIN1
SNDKURAPAIN1:TYPE=SOUND
SNDKURAPAIN1:FILENAME=DROB_M255.WAV
SNDKURAPAIN1:PRELOAD=TRUE
SNDKURAPAIN1:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDKURAPAIN2
SNDKURAPAIN2:TYPE=SOUND
SNDKURAPAIN2:FILENAME=DROB_M256.WAV
SNDKURAPAIN2:PRELOAD=TRUE
SNDKURAPAIN2:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDKURAPAIN3
SNDKURAPAIN3:TYPE=SOUND
SNDKURAPAIN3:FILENAME=DROB_M257.WAV
SNDKURAPAIN3:PRELOAD=TRUE
SNDKURAPAIN3:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDKURAPAIN4
SNDKURAPAIN4:TYPE=SOUND
SNDKURAPAIN4:FILENAME=DROB_M258.WAV
SNDKURAPAIN4:PRELOAD=TRUE
SNDKURAPAIN4:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDKURAPAIN5
SNDKURAPAIN5:TYPE=SOUND
SNDKURAPAIN5:FILENAME=DROB_M259.WAV
SNDKURAPAIN5:PRELOAD=TRUE
SNDKURAPAIN5:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDKURAPAIN6
SNDKURAPAIN6:TYPE=SOUND
SNDKURAPAIN6:FILENAME=DROB_M260.WAV
SNDKURAPAIN6:PRELOAD=TRUE
SNDKURAPAIN6:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDKURAPAIN7
SNDKURAPAIN7:TYPE=SOUND
SNDKURAPAIN7:FILENAME=DROB_M261.WAV
SNDKURAPAIN7:PRELOAD=TRUE
SNDKURAPAIN7:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDKURAPAIN8
SNDKURAPAIN8:TYPE=SOUND
SNDKURAPAIN8:FILENAME=DROB_M262.WAV
SNDKURAPAIN8:PRELOAD=TRUE
SNDKURAPAIN8:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDREXZDEN
SNDREXZDEN:TYPE=SOUND
SNDREXZDEN:FILENAME=REX_R028.WAV
SNDREXZDEN:PRELOAD=FALSE
SNDREXZDEN:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDREXPAIN
SNDREXPAIN:TYPE=SOUND
SNDREXPAIN:FILENAME=REX_R042.WAV
SNDREXPAIN:PRELOAD=FALSE
SNDREXPAIN:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDREXSLEEP
SNDREXSLEEP:TYPE=SOUND
SNDREXSLEEP:FILENAME=REX_R047.WAV
SNDREXSLEEP:PRELOAD=FALSE
SNDREXSLEEP:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDREXFINALWIN
SNDREXFINALWIN:TYPE=SOUND
SNDREXFINALWIN:FILENAME=CZARO_F058.WAV
SNDREXFINALWIN:PRELOAD=FALSE
SNDREXFINALWIN:FLUSHAFTERPLAYED=FALSE
SNDREXFINALWIN:ONFINISHED={SNDREXFINALWIN2^PLAY();}

OBJECT=SNDREXFINALWIN2
SNDREXFINALWIN2:TYPE=SOUND
SNDREXFINALWIN2:FILENAME=KRETES_F059.WAV
SNDREXFINALWIN2:PRELOAD=FALSE
SNDREXFINALWIN2:FLUSHAFTERPLAYED=FALSE
SNDREXFINALWIN2:ONFINISHED={G_SLASTOBJECTS^SET(["MAGIC_"+S_SMAGICPLACE]);G_SARCADEOBJECTS^SET(VARSRETURNTO);__SCREENSHOT__^RUN();PRZYGODA^GOTO("ARCADE");@BREAK();}

OBJECT=ARRPATHX
ARRPATHX:TYPE=ARRAY

OBJECT=ARRPATHY
ARRPATHY:TYPE=ARRAY

OBJECT=ARRROUTEX
ARRROUTEX:TYPE=ARRAY

OBJECT=ARRROUTEY
ARRROUTEY:TYPE=ARRAY

OBJECT=ARRENEMYROUTEX
ARRENEMYROUTEX:TYPE=ARRAY

OBJECT=ARRENEMYROUTEY
ARRENEMYROUTEY:TYPE=ARRAY

OBJECT=ARRANGLES
ARRANGLES:TYPE=ARRAY

OBJECT=ARRPATTERN0
ARRPATTERN0:TYPE=ARRAY

OBJECT=ARRPATTERN1
ARRPATTERN1:TYPE=ARRAY

OBJECT=ARRPATTERN2
ARRPATTERN2:TYPE=ARRAY

OBJECT=ARRPATTERN3
ARRPATTERN3:TYPE=ARRAY

OBJECT=ARRPATTERN4
ARRPATTERN4:TYPE=ARRAY

OBJECT=ARRPATTERN5
ARRPATTERN5:TYPE=ARRAY

OBJECT=ARRPATTERN6
ARRPATTERN6:TYPE=ARRAY

OBJECT=ARRCOMPSPELLS
ARRCOMPSPELLS:TYPE=ARRAY

OBJECT=ARRSPELLTYPE
ARRSPELLTYPE:TYPE=ARRAY

OBJECT=ARRPATTERN7
ARRPATTERN7:TYPE=ARRAY

OBJECT=ARRPATTERN8
ARRPATTERN8:TYPE=ARRAY

OBJECT=ARRPATTERN9
ARRPATTERN9:TYPE=ARRAY

OBJECT=ARRPATTERN10
ARRPATTERN10:TYPE=ARRAY

OBJECT=ARRPATTERN11
ARRPATTERN11:TYPE=ARRAY

OBJECT=ARRENERGIZETIME
ARRENERGIZETIME:TYPE=ARRAY

OBJECT=ARRTIMEELAPSED
ARRTIMEELAPSED:TYPE=ARRAY

OBJECT=ARREFFECTELAPSED0
ARREFFECTELAPSED0:TYPE=ARRAY

OBJECT=ARREFFECTELAPSED1
ARREFFECTELAPSED1:TYPE=ARRAY

OBJECT=ARRENEMYPARTS
ARRENEMYPARTS:TYPE=ARRAY

OBJECT=ARREFFECTLEVEL0
ARREFFECTLEVEL0:TYPE=ARRAY

OBJECT=ARREFFECTLEVEL1
ARREFFECTLEVEL1:TYPE=ARRAY

OBJECT=ARRSPEEDFACTOR
ARRSPEEDFACTOR:TYPE=ARRAY

OBJECT=ARRIDLENAME
ARRIDLENAME:TYPE=ARRAY

OBJECT=ARRJUMP
ARRJUMP:TYPE=ARRAY

OBJECT=ARRSLIDE
ARRSLIDE:TYPE=ARRAY

OBJECT=ARRVELOCITY
ARRVELOCITY:TYPE=ARRAY

OBJECT=ARRREXDIR
ARRREXDIR:TYPE=ARRAY

OBJECT=ARRFIGHTERSPELLS
ARRFIGHTERSPELLS:TYPE=ARRAY

OBJECT=ARRFIGHTERDEFENSE
ARRFIGHTERDEFENSE:TYPE=ARRAY

OBJECT=ARRDEFENSE
ARRDEFENSE:TYPE=ARRAY

OBJECT=ARRTUTSPELLS
ARRTUTSPELLS:TYPE=ARRAY

OBJECT=ARRACTIVESPELLS
ARRACTIVESPELLS:TYPE=ARRAY

OBJECT=MOUSE
MOUSE:TYPE=MOUSE
MOUSE:ONMOVE={VARDTEMP0^SET([MOUSE^GETPOSX()-400]);VARDTEMP1^SET([MOUSE^GETPOSY()-300]);VARDTEMP0^DIV(ARRSPEEDFACTOR^GET(0));VARDTEMP1^DIV(ARRSPEEDFACTOR^GET(0));ARRREXDIR^CHANGEAT(0,VARDTEMP0);ARRREXDIR^CHANGEAT(1,VARDTEMP1);VARICURSORX^ADD(VARDTEMP0);VARICURSORY^ADD([VARDTEMP1+ARRJUMP^GET(0)]);ARRJUMP^CHANGEAT(0,0);VARICURSORX^CLAMP(0,800);VARICURSORY^CLAMP(0,600);G_CURSOR^SETPOSITIONNOCALL(VARICURSORX,VARICURSORY);MOUSE^SETPOSITION(400,300);@IF(ANNHEAD0^GETEVENTNAME(),"_",""SPI"","BFITMP44","");@IF("VARIDOMAGIC'1&&STL10^ISPLAYING()'FALSE&&VARINUMREXSPELLS>0&&VARITUTORIAL!'1","BFITMP46","");}
MOUSE:ONCLICK^LEFT={@IF("VARIWINNER>-1||VARITUTORIAL'1","BFITMP47","");VARSTEMP0^SET(CANVASOBSERVER^GETGRAPHICSAT(VARICURSORX,VARICURSORY,TRUE,110,110,TRUE));@IF("VARSTEMP0","_",""ANNEXIT"","BFITMP52","");@IF(ANNWAND0^ISPLAYING(),"_","TRUE","BFITMP54","");@IF("VARISPELLREADY","<","1","BFITMP55","");@IF("VARISPELLREADY'2&&VARITUTORIAL!'1","BFITMP56","");}
MOUSE:ONRELEASE^LEFT={@IF("VARIWINNER>-1||VARITUTORIAL'1","BFITMP57","");@IF(ANNWAND0^ISPLAYING(),"_","TRUE","BFITMP59","");@IF("ANNWAND0^GETEVENTNAME()!'"STRZAL"&&ANNWAND0^GETEVENTNAME()!'"LADUJE"&&ANNWAND0^GETEVENTNAME()!'"NALADOWANA"","BFITMP60","");}

OBJECT=CNVLOADER
CNVLOADER:TYPE=CNVLOADER

OBJECT=CANVASOBSERVER
CANVASOBSERVER:TYPE=CANVAS_OBSERVER

OBJECT=FBLUR
FBLUR:TYPE=STATICFILTER
FBLUR:ACTION=BLUR

OBJECT=FJITTER
FJITTER:TYPE=STATICFILTER
FJITTER:ACTION=RANDOMJITTER

OBJECT=SFIGHTER
SFIGHTER:TYPE=STRUCT
SFIGHTER:FIELDS=ID<INTEGER>,PLACE<STRING>,TYPE<INTEGER>,SPELLS<STRING>,TIME<INTEGER>

OBJECT=DBFIGHTERS
DBFIGHTERS:TYPE=DATABASE
DBFIGHTERS:MODEL=SFIGHTER

OBJECT=KEYBOARD
KEYBOARD:TYPE=KEYBOARD

OBJECT=__INIT__
__INIT__:TYPE=BEHAVIOUR
__INIT__:CODE={G_AMBIENT^SETAMBIENT("MAGIC");ARRACTIVESPELLS^ADD(G_ARRREXSPELLS^GET(0),G_ARRREXSPELLS^GET(1),G_ARRREXSPELLS^GET(2),G_ARRREXSPELLS^GET(3),G_ARRREXSPELLS^GET(4));ARRACTIVESPELLS^ADD(G_ARRREXSPELLS^GET(5),G_ARRREXSPELLS^GET(6),G_ARRREXSPELLS^GET(7),G_ARRREXSPELLS^GET(8),G_ARRREXSPELLS^GET(9));ARRACTIVESPELLS^ADD(G_ARRREXSPELLS^GET(10),G_ARRREXSPELLS^GET(11));DBFIGHTERS^LOAD("$COMMON\FIGHTERS.DTA");DBFIGHTERS^SELECT(S_IMAGICFIGHTER);SFIGHTER^SET("DBFIGHTERS_CURSOR");S_SMAGICPLACE^SET(SFIGHTER|PLACE);BEHGETFIGHTERSPELLS^RUN();BEHLOADFIGHTER^RUN();VARBFLEE^SET(TRUE);ARRTUTSPELLS^ADD("TUT_SLEEP_","TUT_FROG_","TUT_FLIES_","TUT_PUDDING_","TUT_WHIRLS_","TUT_DARK_");ARRTUTSPELLS^ADD("TUT_SLEEPDEF_","TUT_FROGDEF_","TUT_FLIESDEF_","TUT_PUDDINGDEF_","TUT_WHIRLSDEF_","TUT_DARKDEF_");ANNFLIES1^CLONE(2);G_CURSOR^SETSCENE("MAGIC");G_MENU^SETSCENE("MAGIC");G_MENU^SHOWWAND(TRUE);G_MENU^SHOW(FALSE);@IF("S_IMAGICFIGHTER",">","1","BFITMP63","BFITMP64");@LOOP("{VARINUMREXSPELLS^ADD(ARRACTIVESPELLS^GET(_I_));}",0,12,1);S_SLIMBORETURN^SET(G_SLASTOBJECTS);VARSRETURNTO^SET(G_SLASTOBJECTS);G_SLASTOBJECTS^SET("MAGIC");ANNSPELL^CLONE(1000);ANNSPELL2^CLONE(1000);MOUSE^SETPOSITION(400,300);VARILASTX^SET(400);VARILASTY^SET(300);ANNMAGIC^CLONE(10);ANNMAGIC2^CLONE(10);VARIOFFSETX^SET([ANNSPELL^GETWIDTH()@2]);VARIOFFSETY^SET([ANNSPELL^GETHEIGHT()@2]);ARRENERGIZETIME^ADD(G_ARRREXSPELLS^GET(12),SFIGHTER|TIME);ARRDEFENSE^ADD(-1,-1);ARRTIMEELAPSED^ADD(0,0);ARREFFECTELAPSED0^ADD(0,0);ARREFFECTELAPSED1^ADD(0,0);ARREFFECTLEVEL0^ADD(0,0,0,0,0,0);ARREFFECTLEVEL1^ADD(0,0,0,0,0,0);ARRSPEEDFACTOR^ADD(1,1);ARRIDLENAME^ADD("IDLE","IDLE");ARRJUMP^ADD(0,0);ARRSLIDE^ADD(0.0,0.0);ARRREXDIR^ADD(0.0,0.0);ARRVELOCITY^ADD(0.0,0.0);ARRPATTERN0^ADD(270,45,315,90);ARRPATTERN1^ADD(90,0,270,180,45,135);ARRPATTERN2^ADD(90,225,0,225);ARRPATTERN3^ADD(180,90,0,90,180);ARRPATTERN4^ADD(270,45,270,135,0);ARRPATTERN5^ADD(0,225,315,180);ARRPATTERN6^ADD(0,90,180,270,0);ARRPATTERN7^ADD(280,0,90,0,270,135);ARRPATTERN8^ADD(225,135,45,315,180);ARRPATTERN9^ADD(270,180,90,180,270);ARRPATTERN10^ADD(45,180,315,180);ARRPATTERN11^ADD(180,45,135,0);ARRENEMYPARTS^ADD("ANNHEAD1","ANNBODY1","ANNWAND1");GRPMOVE^ADD("ANNBODY1","ANNWAND1","ANNHEAD1");@IF("SFIGHTER|TYPE","_","-1","BFITMP65","");@IF("SFIGHTER|TYPE","<","2","BFITMP66","");ARRSPELLTYPE^ADD(-1,-1);@LOOP("{VARSTEMP0^SET(["ANNMAGIC_"+_I_]);}",1,10,1);@LOOP("{VARSTEMP0^SET(["ITEM"+_I_]);}",0,12,1);ARRCOMPSPELLS^ADD("SPELL0_","SPELL1_","SPELL2_","SPELL3_","SPELL4_","SPELL5_","TUT_SLEEPDEF_","TUT_FROGDEF_","TUT_FIESDEF_","TUT_PUDDINGDEF_","TUT_WHIRLSDEF_","TUT_DARKDEF_");STL8^PLAY("ELAPSE");ANNBODY0^PLAY("IDLE");@IF("VARINUMREXSPELLS",">","0","BFITMP68","BFITMP69");ANNHEAD0^PLAY("IDLE");ANNBODY1^PLAY("IDLE");ANNWAND1^PLAY("IDLE");ANNHEAD1^PLAY("IDLE");MAGIC^STARTMUSIC("POJEDYNEK.WAV");MAGIC^SETMUSICVOLUME(G_ARRSETTINGS^GET(1));@IF("S_IMAGICFIGHTER","_","13","BFITMP70","");@IF("S_IMAGICFIGHTER","_","14","BFITMP71","");@IF("S_IMAGICFIGHTER","_","15","BFITMP72","");@IF("S_IMAGICFIGHTER","_","16","BFITMP73","");@IF("S_IMAGICFIGHTER","_","17","BFITMP74","");@IF("S_IMAGICFIGHTER","_","18","BFITMP75","");@IF("S_IMAGICFIGHTER","_","19","BFITMP76","");@IF("S_IMAGICFIGHTER","_","20","BFITMP77","");@IF("S_IMAGICFIGHTER","_","21","BFITMP78","");@IF("S_IMAGICFIGHTER","_","22","BFITMP79","");@IF("S_IMAGICFIGHTER","_","23","BFITMP80","");@IF("S_IMAGICFIGHTER","_","24","BFITMP81","");@IF("S_IMAGICFIGHTER",">","39","BFITMP82","");@IF("S_IMAGICFIGHTER<13||S_IMAGICFIGHTER'30","BFITMP83","BFITMP84");}


OBJECT=__MMOVE__
__MMOVE__:TYPE=BEHAVIOUR
__MMOVE__:CODE={@IF("VARIWINNER>-1||VARITUTORIAL'1","BFITMP85","");VARIX^SET(VARICURSORX);VARIY^SET(VARICURSORY);VARIDIRX^SET([VARIX-VARILASTX]);VARIDIRY^SET([VARIY-VARILASTY]);VARIDOT^SET([VARIDIRX*VARILASTDIRX]);VARIDOT^ADD([VARIDIRY*VARILASTDIRY]);VARDTEMP1^ARCTANEX(VARIDIRY,VARIDIRX);VARDTEMP0^LENGTH(VARIDIRX,VARIDIRY);@IF("VARDTEMP0","<","30","BFITMP86","");VARDTAN^ARCTANEX(VARIDIRY,VARIDIRX);@IF("VARDLASTTAN","<","0.0","BFITMP87","BFITMP88");@IF("VARDTEMP0","<","0.0","BFITMP89","");@IF("VARDTEMP0>45.0&&VARDTEMP0<315.0","BFITMP90","");ARRROUTEX^ADD([VARIX-VARIOFFSETX]);ARRROUTEY^ADD([VARIY-VARIOFFSETY]);VARDLASTTAN^SET(VARDTAN);VARILASTDIRX^SET(VARIDIRX);VARILASTDIRY^SET(VARIDIRY);VARILASTX^SET(VARIX);VARILASTY^SET(VARIY);VARITUTCOUNT^INC();VARILASTCLONE^INC();@IF("VARILASTCLONE",">","10","BFITMP91","");VARSTEMP0^SET(["ANNMAGIC_"+VARILASTCLONE]);*VARSTEMP0^SETPOSITION([VARIX-VARIOFFSETX],[VARIY-VARIOFFSETY]);*VARSTEMP0^SHOW();*VARSTEMP0^PLAY("PLAY");}


OBJECT=BEHKAZAM
BEHKAZAM:TYPE=BEHAVIOUR
BEHKAZAM:CODE={@IF("VARIWINNER",">","-1","BFITMP92","");@IF(ARRENEMYROUTEX^GETSIZE(),"_","0","BFITMP95","");VARIX^SET(ARRENEMYROUTEX^GET(0));VARIY^SET(ARRENEMYROUTEY^GET(0));VARITEMP0^RANDOM(0,100);VARITEMP1^SET(ARREFFECTLEVEL1^GET(1));VARITEMP1^MUL(10);@IF("VARITEMP0","<","VARITEMP1","BFITMP98","");VARITEMP1^SET(ARREFFECTLEVEL1^GET(2));VARITEMP1^MUL(15);@IF("VARITEMP0","<","VARITEMP1","BFITMP101","");VARILASTCLONE2^INC();@IF("VARILASTCLONE2",">","10","BFITMP102","");VARSTEMP0^SET(["ANNMAGIC2_"+VARILASTCLONE2]);*VARSTEMP0^SETPOSITION(VARIX,VARIY);*VARSTEMP0^SHOW();*VARSTEMP0^PLAY("PLAY");ARRENEMYROUTEX^REMOVEAT(0);ARRENEMYROUTEY^REMOVEAT(0);}


OBJECT=BEHCOMPPATTERN
BEHCOMPPATTERN:TYPE=BEHAVIOUR
BEHCOMPPATTERN:CODE={VARITEMP0^SET(0);VARITEMP1^SET(0);@LOOP("{VARITER^SET(_I_);@IF("VARITEMP0","_","0","BFITMP113","");}",0,VARITEMP2,1);@IF("VARITEMP0","_","1","BFITMP114","");}


OBJECT=BEHCOMPARE
BEHCOMPARE:TYPE=BEHAVIOUR
BEHCOMPARE:CODE={@LOOP("{VARITER2^SET(_I_);ARRSPELLTYPE^CHANGEAT(0,_I_);VARSTEMP0^SET(["ARRPATTERN"+_I_]);VARITEMP2^SET(*VARSTEMP0^GETSIZE());VARITEMP0^SET(ARRANGLES^GETSIZE());@IF("VARITEMP2","_","VARITEMP0","BFITMP118","");}",0,12,1);ARRSPELLTYPE^CHANGEAT(0,-1);}


OBJECT=BEHSPELL
BEHSPELL:TYPE=BEHAVIOUR
BEHSPELL:CODE={@LOOP("{VARSTEMP0^SET(["ANNSPELL_"+_I_]);*VARSTEMP0^SETPOSITION(ARRROUTEX^GET(_I_),ARRROUTEY^GET(_I_));*VARSTEMP0^SHOW();*VARSTEMP0^PLAY("PLAY");}",0,ARRROUTEX^GETSIZE(),1);VARITEMP0^SET([ARRSPELLTYPE^GET(0)-6]);@IF(ARRSPELLTYPE^GET(0),">","5","BFITMP119","BFITMP120");}


OBJECT=BEHCOMPSPELL
BEHCOMPSPELL:TYPE=BEHAVIOUR
BEHCOMPSPELL:CODE={@LOOP("{VARSTEMP0^SET(["ANNSPELL2_"+_I_]);*VARSTEMP0^SETPOSITION(ARRENEMYROUTEX^GET(_I_),ARRENEMYROUTEY^GET(_I_));*VARSTEMP0^SHOW();*VARSTEMP0^PLAY("PLAY");}",0,ARRENEMYROUTEX^GETSIZE(),1);}


OBJECT=BEHLOADSPELL
BEHLOADSPELL:TYPE=BEHAVIOUR
BEHLOADSPELL:CODE={VARSTEMP1^SET($1);VARSTEMP0^SET([VARSTEMP1+"0.ARR"]);ARRENEMYROUTEX^LOAD(VARSTEMP0);VARSTEMP0^SET([VARSTEMP1+"1.ARR"]);ARRENEMYROUTEY^LOAD(VARSTEMP0);}


OBJECT=BEHCASTSPELL
BEHCASTSPELL:TYPE=BEHAVIOUR
BEHCASTSPELL:CODE={VARSTEMP0^SET(CANVASOBSERVER^GETGRAPHICSAT(VARICURSORX,VARICURSORY,TRUE,10,20,FALSE));@IF(ARRENEMYPARTS^FIND(VARSTEMP0),">","-1","BFITMP123","");}


OBJECT=BEHDOSPELL
BEHDOSPELL:TYPE=BEHAVIOUR
BEHDOSPELL:CODE={@IF(ARRFIGHTERSPELLS^GETSIZE(),">","0","BFITMP126","");}


OBJECT=BEHDOTUTSPELL
BEHDOTUTSPELL:TYPE=BEHAVIOUR
BEHDOTUTSPELL:CODE={VARSCOMPSPELL^SET($1);BEHLOADSPELL^RUN(VARSCOMPSPELL);ANNWAND1^PLAY("CZARUJE");STLMAGIC^PLAY("ELAPSE");}


OBJECT=BEHAPPLYSPELL
BEHAPPLYSPELL:TYPE=BEHAVIOUR
BEHAPPLYSPELL:CODE={VARITEMP0^SET($1);VARITEMP1^SET($2);@IF(ARRDEFENSE^GET(VARITEMP0),"_","VARITEMP1","BFITMP167","BFITMP168");}


OBJECT=_CURSORMOVE_
_CURSORMOVE_:TYPE=BEHAVIOUR
_CURSORMOVE_:CODE={G_CURSOR^SETOBJECT(CANVASOBSERVER^GETGRAPHICSAT(MOUSE^GETPOSX(),MOUSE^GETPOSY(),TRUE,0,5000,TRUE));}


OBJECT=BEHGETFIGHTERSPELLS
BEHGETFIGHTERSPELLS:TYPE=BEHAVIOUR
BEHGETFIGHTERSPELLS:CODE={VARSTEMP0^SET(SFIGHTER|SPELLS);@IF("SFIGHTER|TYPE",">","1","BFITMP169","BFITMP170");@WHILE("VARITEMP2","!_","0","{VARITEMP0^SET(VARSTEMP0^FIND("_"));@IF("VARITEMP0","_","-1","BFITMP175","BFITMP176");}");}


OBJECT=BEHLOADFIGHTER
BEHLOADFIGHTER:TYPE=BEHAVIOUR
BEHLOADFIGHTER:CODE={@IF("SFIGHTER|TYPE","_","-1","BFITMP177","");@IF("SFIGHTER|TYPE","_","0","BFITMP178","");@IF("SFIGHTER|TYPE","_","1","BFITMP179","");@IF("SFIGHTER|TYPE","_","2","BFITMP180","");@IF("SFIGHTER|TYPE","_","3","BFITMP181","");@IF("SFIGHTER|TYPE","_","4","BFITMP182","");@IF("SFIGHTER|TYPE",">","1","BFITMP183","");ANNHEAD1^SETPRIORITY(15);ANNBODY1^SETPRIORITY(10);}


OBJECT=BEHRESETEFFECTS
BEHRESETEFFECTS:TYPE=BEHAVIOUR
BEHRESETEFFECTS:CODE={ARREFFECTLEVEL0^CHANGEAT(0,0);ARREFFECTLEVEL0^CHANGEAT(1,0);ARREFFECTLEVEL0^CHANGEAT(2,0);ARREFFECTLEVEL0^CHANGEAT(3,0);ARREFFECTLEVEL0^CHANGEAT(4,0);ARREFFECTLEVEL0^CHANGEAT(5,0);ARREFFECTLEVEL1^CHANGEAT(0,0);ARREFFECTLEVEL1^CHANGEAT(1,0);ARREFFECTLEVEL1^CHANGEAT(2,0);ARREFFECTLEVEL1^CHANGEAT(3,0);ARREFFECTLEVEL1^CHANGEAT(4,0);ARREFFECTLEVEL1^CHANGEAT(5,0);VARITUTREPEAT^SET(3);VARITUTCOUNT^SET(0);ANNPUDDING0^HIDE();ANNPUDDING1^HIDE();STLMAGIC^SETFPS(5);VARIWINNER^SET(-1);ARRENERGIZETIME^REMOVEALL();ARRENERGIZETIME^ADD(G_ARRREXSPELLS^GET(12),SFIGHTER|TIME);ARRDEFENSE^REMOVEALL();ARRDEFENSE^ADD(-1,-1);ARRTIMEELAPSED^REMOVEALL();ARRTIMEELAPSED^ADD(0,0);ARREFFECTELAPSED0^REMOVEALL();ARREFFECTELAPSED0^ADD(0,0);ARREFFECTELAPSED1^REMOVEALL();ARREFFECTELAPSED1^ADD(0,0);ARREFFECTLEVEL0^REMOVEALL();ARREFFECTLEVEL0^ADD(0,0,0,0,0,0);ARREFFECTLEVEL1^REMOVEALL();ARREFFECTLEVEL1^ADD(0,0,0,0,0,0);ARRSPEEDFACTOR^REMOVEALL();ARRSPEEDFACTOR^ADD(1,1);ARRIDLENAME^REMOVEALL();ARRIDLENAME^ADD("IDLE","IDLE");ARRJUMP^REMOVEALL();ARRJUMP^ADD(0,0);ARRSLIDE^REMOVEALL();ARRSLIDE^ADD(0.0,0.0);STLEFFECT0_0^STOP(FALSE);STLEFFECT0_1^STOP(FALSE);STLEFFECT1_0^STOP(FALSE);STLEFFECT1_1^STOP(FALSE);ANNMUCHA1^STOP(FALSE);ANNMUCHA1^HIDE();ANNMUCHA2^STOP(FALSE);ANNMUCHA2^HIDE();ANNMUCHA3^STOP(FALSE);ANNMUCHA3^HIDE();ANNMUCHA4^STOP(FALSE);ANNMUCHA4^HIDE();ANNMUCHA5^STOP(FALSE);ANNMUCHA5^HIDE();ANNWHIRL1^STOP(FALSE);ANNWHIRL1^HIDE();ANNDARK0^STOP(FALSE);ANNDARK0^HIDE();ANNDARK1^STOP(FALSE);ANNDARK1^HIDE();ANNFLIES1^HIDE();ANNFLIES1_1^HIDE();ANNFLIES1_2^HIDE();VARITIMETOEXIT^SET(5);ANNHEAD0^PLAY("IDLE");ANNHEAD1^PLAY("IDLE");ANNWAND0^PLAY("IDLE");ANNWAND1^PLAY("IDLE");GRPMOVE^REMOVEALL();GRPMOVE^ADD("ANNBODY1","ANNWAND1","ANNHEAD1");STL10^STOP(FALSE);STL8^PLAY("ELAPSE");}


OBJECT=BEHSETACTIVESPELL
BEHSETACTIVESPELL:TYPE=BEHAVIOUR
BEHSETACTIVESPELL:CODE={VARITEMP0^SET($1);VARIREPEATSPELL^SET(VARITEMP0);VARBFLEE^SET(FALSE);VARBLEARNED^SET(FALSE);@LOOP("{VARITEMP1^SET(_I_);@IF("VARITEMP0","_","VARITEMP1","BFITMP184","BFITMP185");}",0,12,1);@IF("VARITEMP0",">","5","BFITMP186","BFITMP187");}


OBJECT=__PAUSESTART__
__PAUSESTART__:TYPE=BEHAVIOUR
__PAUSESTART__:CODE={SCENENAME^SET(PRZYGODA^GETCURRENTSCENE());MOUSE^DISABLESIGNAL();__KEYB__^SET(KEYBOARD^ISENABLED());KEYBOARD^DISABLE();__HSPOTMAX__^SET(*SCENENAME^GETMAXHSPRIORITY());__HSPOTMIN__^SET(*SCENENAME^GETMINHSPRIORITY());*SCENENAME^GETPLAYINGANIMO("__GRHELP__");}


OBJECT=__PAUSEEND__
__PAUSEEND__:TYPE=BEHAVIOUR
__PAUSEEND__:CODE={MOUSE^ENABLESIGNAL();KEYBOARD^ENABLE();MAGIC^SETMUSICVOLUME(G_ARRSETTINGS^GET(1));__GRHELP__^REMOVEALL();}


OBJECT=__HELPSTART__
__HELPSTART__:TYPE=BEHAVIOUR
__HELPSTART__:CODE={SCENENAME^SET(PRZYGODA^GETCURRENTSCENE());MOUSE^DISABLESIGNAL();__KEYB__^SET(KEYBOARD^ISENABLED());KEYBOARD^DISABLE();__HSPOTMAX__^SET(*SCENENAME^GETMAXHSPRIORITY());__HSPOTMIN__^SET(*SCENENAME^GETMINHSPRIORITY());*SCENENAME^GETPLAYINGANIMO("__GRHELP__");CNVLOADER^LOAD([G_SCUTSCENE+".CNV"]);G_MENU^SHOW(FALSE);}


OBJECT=__HELPEND__
__HELPEND__:TYPE=BEHAVIOUR
__HELPEND__:CODE={MOUSE^ENABLESIGNAL();@IF("__KEYB__","_","TRUE","BFITMP188","BFITMP189");CNVLOADER^RELEASE([G_SCUTSCENE+".CNV"]);__GRHELP__^REMOVEALL();G_MENU^SHOW(TRUE);}


OBJECT=BEH_AI_BESTSPELL
BEH_AI_BESTSPELL:TYPE=BEHAVIOUR
BEH_AI_BESTSPELL:CODE={VARITEMP0^SET(0);VARITEMP1^SET(0);VARITER2^SET(0);@LOOP("{VARITER^SET(_I_);VARITEMP0^ADD(ARREFFECTLEVEL0^GET(VARITER));@IF(ARREFFECTLEVEL0^GET(VARITER),">","VARITEMP1","BFITMP190","");}",0,6,1);VARITEMP2^SET(RANDOM^GET(0,100));@IF("VARITEMP2",">","50","BFITMP196","BFITMP197");@IF("VARITEMP2","_","-1","BFITMP200","");@RETURN(VARITEMP2);}


OBJECT=BEHPLAYSOUND
BEHPLAYSOUND:TYPE=BEHAVIOUR
BEHPLAYSOUND:CODE={VARITER^SET($1);@IF("SFIGHTER|TYPE","_","-1","BFITMP203","BFITMP204");}


OBJECT=BEHPLAYRANDSOUND
BEHPLAYRANDSOUND:TYPE=BEHAVIOUR
BEHPLAYRANDSOUND:CODE={@IF("SFIGHTER|TYPE","_","-1","BFITMP207","BFITMP208");}

#PLAY SND FILE WHEN REKSIO IS HIT BY TKTPM
OBJECT=BEHREXTRAFIONY
BEHREXTRAFIONY:TYPE=BEHAVIOUR
BEHREXTRAFIONY:CODE={@IF("SFIGHTER|TYPE'-1&&SNDREXTRAFIL0^ISPLAYING()'FALSE&&SNDREXTRAFIL1^ISPLAYING()'FALSE","{@STRING("SNDNAME","SNDZLYTRAFIL");SNDNAME^ADD(RANDOM^GET(2));*SNDNAME^PLAY();}","");}

#PLAY SND FILE WHEN REKSIO HITS TKTPM
OBJECT=BEHSPELLHIT
BEHSPELLHIT:TYPE=BEHAVIOUR
BEHSPELLHIT:CODE={@IF("SFIGHTER|TYPE'-1&&SNDZLYTRAFIL0^ISPLAYING()'FALSE&&SNDZLYTRAFIL1^ISPLAYING()'FALSE","{@STRING("SNDNAME","SNDREXTRAFIL");SNDNAME^ADD(RANDOM^GET(2));*SNDNAME^PLAY();}","");}

OBJECT=BFITMP0
BFITMP0:TYPE=BEHAVIOUR
BFITMP0:CODE={SNDREXFINALWIN^PLAY();ANNMOVEMENT^STOP(FALSE);STLFALL^PLAY("ELAPSE");}


OBJECT=BFITMP1
BFITMP1:TYPE=BEHAVIOUR
BFITMP1:CODE={SNDREXWINGES^PLAY();ANNMOVEMENT^STOP(FALSE);STLFALL^PLAY("ELAPSE");}


OBJECT=BFITMP2
BFITMP2:TYPE=BEHAVIOUR
BFITMP2:CODE={SNDREXWINKURA^PLAY();ANNMOVEMENT^STOP(FALSE);STLFALL^PLAY("ELAPSE");}


OBJECT=BFITMP3
BFITMP3:TYPE=BEHAVIOUR
BFITMP3:CODE={@IF("SFIGHTER|TYPE","_","-1","BFITMP0","");@IF("SFIGHTER|TYPE","_","0","BFITMP1","");@IF("SFIGHTER|TYPE","_","1","BFITMP2","");};


OBJECT=BFITMP4
BFITMP4:TYPE=BEHAVIOUR
BFITMP4:CODE={VARIPOSTTUT^SET(VARITUTORIAL);}


OBJECT=BFITMP5
BFITMP5:TYPE=BEHAVIOUR
BFITMP5:CODE={@IF("VARITUTORIAL","_","0","BFITMP3","BFITMP4");};


OBJECT=BFITMP6
BFITMP6:TYPE=BEHAVIOUR
BFITMP6:CODE={SNDREXFAILED^PLAY();SNDREXKILL^PLAY();}


OBJECT=BFITMP7
BFITMP7:TYPE=BEHAVIOUR
BFITMP7:CODE={SNDTUT2^PLAY();}


OBJECT=BFITMP8
BFITMP8:TYPE=BEHAVIOUR
BFITMP8:CODE={VARICURSORX^SET(ANNMUCHA1^GETPOSITIONX());VARICURSORY^SET(ANNMUCHA1^GETPOSITIONY());VARICURSORX^CLAMP(0,800);VARICURSORY^CLAMP(0,600);G_CURSOR^SETPOSITIONNOCALL(VARICURSORX,VARICURSORY);VARIFLYTIME^INC();}


OBJECT=BFITMP9
BFITMP9:TYPE=BEHAVIOUR
BFITMP9:CODE={VARICURSORX^SET(ANNMUCHA2^GETPOSITIONX());VARICURSORY^SET(ANNMUCHA2^GETPOSITIONY());VARICURSORX^CLAMP(0,800);VARICURSORY^CLAMP(0,600);G_CURSOR^SETPOSITIONNOCALL(VARICURSORX,VARICURSORY);VARIFLYTIME^INC();}


OBJECT=BFITMP10
BFITMP10:TYPE=BEHAVIOUR
BFITMP10:CODE={VARICURSORX^SET(ANNMUCHA3^GETPOSITIONX());VARICURSORY^SET(ANNMUCHA3^GETPOSITIONY());VARICURSORX^CLAMP(0,800);VARICURSORY^CLAMP(0,600);G_CURSOR^SETPOSITIONNOCALL(VARICURSORX,VARICURSORY);VARIFLYTIME^INC();}


OBJECT=BFITMP11
BFITMP11:TYPE=BEHAVIOUR
BFITMP11:CODE={VARICURSORX^SET(ANNMUCHA4^GETPOSITIONX());VARICURSORY^SET(ANNMUCHA4^GETPOSITIONY());VARICURSORX^CLAMP(0,800);VARICURSORY^CLAMP(0,600);G_CURSOR^SETPOSITIONNOCALL(VARICURSORX,VARICURSORY);VARIFLYTIME^INC();}


OBJECT=BFITMP12
BFITMP12:TYPE=BEHAVIOUR
BFITMP12:CODE={VARICURSORX^SET(ANNMUCHA5^GETPOSITIONX());VARICURSORY^SET(ANNMUCHA5^GETPOSITIONY());VARICURSORX^CLAMP(0,800);VARICURSORY^CLAMP(0,600);G_CURSOR^SETPOSITIONNOCALL(VARICURSORX,VARICURSORY);VARIFLYTIME^INC();}


OBJECT=BFITMP13
BFITMP13:TYPE=BEHAVIOUR
BFITMP13:CODE={ARRTIMEELAPSED^CHANGEAT(0,0);ANNWAND0^STOP(FALSE);VARISPELLREADY^SET(2);ANNWAND0^PLAY("NALADOWANA");}


OBJECT=BFITMP14
BFITMP14:TYPE=BEHAVIOUR
BFITMP14:CODE={BEHDOSPELL^RUN();}


OBJECT=BFITMP15
BFITMP15:TYPE=BEHAVIOUR
BFITMP15:CODE={@IF(STL10^ISPLAYING(),"_","FALSE","BFITMP14","");};


OBJECT=BFITMP16
BFITMP16:TYPE=BEHAVIOUR
BFITMP16:CODE={ANNWAND1^PLAY("IDLE");@IF("VARITUTORIAL'0||VARITUTORIAL'7","BFITMP15","");@BREAK();};


OBJECT=BFITMP17
BFITMP17:TYPE=BEHAVIOUR
BFITMP17:CODE={BEHDOSPELL^RUN();}


OBJECT=BFITMP18
BFITMP18:TYPE=BEHAVIOUR
BFITMP18:CODE={@IF(STL10^ISPLAYING(),"_","FALSE","BFITMP17","");};


OBJECT=BFITMP19
BFITMP19:TYPE=BEHAVIOUR
BFITMP19:CODE={ANNWAND1^PLAY("IDLE");@IF("VARITUTORIAL'0||VARITUTORIAL'7","BFITMP18","");@BREAK();};


OBJECT=BFITMP20
BFITMP20:TYPE=BEHAVIOUR
BFITMP20:CODE={BEHDOSPELL^RUN();}


OBJECT=BFITMP21
BFITMP21:TYPE=BEHAVIOUR
BFITMP21:CODE={@IF(STL10^ISPLAYING(),"_","FALSE","BFITMP20","");};


OBJECT=BFITMP22
BFITMP22:TYPE=BEHAVIOUR
BFITMP22:CODE={ARRTIMEELAPSED^CHANGEAT(1,0);ANNWAND1^STOP(FALSE);ANNWAND1^PLAY("STRZAL");}


OBJECT=BFITMP23
BFITMP23:TYPE=BEHAVIOUR
BFITMP23:CODE={VARDTIME^ADD(1.0);}


OBJECT=BFITMP24
BFITMP24:TYPE=BEHAVIOUR
BFITMP24:CODE={@IF(ARRSLIDE^GET(0),">","3","BFITMP23","");VARDTEMP0^SINUS(VARDTIME);VARDTEMP1^COSINUS(VARDTIME);VARDTEMP0^MUL(ARRSLIDE^GET(0));VARDTEMP1^MUL(ARRSLIDE^GET(0));VARICURSORX^ADD(VARDTEMP0);VARICURSORY^ADD(VARDTEMP1);VARITER^SET(1);VARICURSORX^CLAMP(0,800);VARICURSORY^CLAMP(0,600);G_CURSOR^SETPOSITIONNOCALL(VARICURSORX,VARICURSORY);};


OBJECT=BFITMP25
BFITMP25:TYPE=BEHAVIOUR
BFITMP25:CODE={VARSFLY^SET(VARSTEMP0);VARIFLYTIME^SET(0);VARITER^SET(1);}


OBJECT=BFITMP26
BFITMP26:TYPE=BEHAVIOUR
BFITMP26:CODE={VARISPELLREADY^SET(0);ARRROUTEX^REMOVEALL();ARRROUTEY^REMOVEALL();ARRANGLES^REMOVEALL();VARDLASTTAN^SET(-1.0);VARIDOMAGIC^SET(0);VARILASTDBG^SET(0);SNDREXSLEEP^PLAY();ANNWAND0^TOP(FALSE);ANNHEAD0^TOP(FALSE);ANNHEAD0^PLAY("SPI");ANNWAND0^STOP(FALSE);ANNWAND0^PLAY("ZWISA");ARRTIMEELAPSED^CHANGEAT(0,0);}


OBJECT=BFITMP27
BFITMP27:TYPE=BEHAVIOUR
BFITMP27:CODE={ARREFFECTELAPSED0^CHANGEAT(0,-1);}


OBJECT=BFITMP28
BFITMP28:TYPE=BEHAVIOUR
BFITMP28:CODE={ANNHEAD0^PLAY("ROZKOJARZONY");}


OBJECT=BFITMP29
BFITMP29:TYPE=BEHAVIOUR
BFITMP29:CODE={ANNHEAD0^PLAY("IDLE");}


OBJECT=BFITMP30
BFITMP30:TYPE=BEHAVIOUR
BFITMP30:CODE={ANNWAND0^TOP(FALSE);ANNHEAD0^TOP(FALSE);@IF(ARREFFECTLEVEL0^GET(4),">","0","BFITMP28","BFITMP29");ANNWAND0^PLAY("IDLE");};

#PATCHED
#PAUSE THE STLMAGIC TIMER INSTEAD OF STOPPING IT IN ORDER TO MITIGATE A POSSIBILITY OF GAME ENTERING AN ENDLESS LOOP
OBJECT=BFITMP31
BFITMP31:TYPE=BEHAVIOUR
BFITMP31:CODE={BEHPLAYSOUND^RUN(5;);ANNHEAD1^STOP(FALSE);ANNHEAD1^PLAY("SPI");ANNWAND1^STOP(FALSE);ANNWAND1^PLAY("ZWISA");STLMAGIC^PAUSE();ARRTIMEELAPSED^CHANGEAT(1,0);}


OBJECT=BFITMP32
BFITMP32:TYPE=BEHAVIOUR
BFITMP32:CODE={ARREFFECTELAPSED1^CHANGEAT(0,-1);}


OBJECT=BFITMP33
BFITMP33:TYPE=BEHAVIOUR
BFITMP33:CODE={BEHDOSPELL^RUN();}


OBJECT=BFITMP34
BFITMP34:TYPE=BEHAVIOUR
BFITMP34:CODE={ANNWAND1^STOP(FALSE);ANNHEAD1^STOP(FALSE);ANNHEAD1^PLAY("IDLE");ANNWAND1^PLAY("IDLE");@IF("VARITUTORIAL","_","0","BFITMP33","");};


OBJECT=BFITMP35
BFITMP35:TYPE=BEHAVIOUR
BFITMP35:CODE={ARRJUMP^CHANGEAT(0,[ARREFFECTLEVEL0^GET(1)*20]);}


OBJECT=BFITMP36
BFITMP36:TYPE=BEHAVIOUR
BFITMP36:CODE={ARREFFECTELAPSED0^CHANGEAT(1,-1);}


OBJECT=BFITMP37
BFITMP37:TYPE=BEHAVIOUR
BFITMP37:CODE={ARRJUMP^CHANGEAT(1,[ARREFFECTLEVEL1^GET(1)*20]);}


OBJECT=BFITMP38
BFITMP38:TYPE=BEHAVIOUR
BFITMP38:CODE={ARREFFECTELAPSED1^CHANGEAT(1,-1);}


OBJECT=BFITMP39
BFITMP39:TYPE=BEHAVIOUR
BFITMP39:CODE={SNDTUT11^PLAY();}


OBJECT=BFITMP40
BFITMP40:TYPE=BEHAVIOUR
BFITMP40:CODE={BEHSNDATTACK^RUN();}


OBJECT=BFITMP41
BFITMP41:TYPE=BEHAVIOUR
BFITMP41:CODE={VARITUTORIAL^SET(6);}


OBJECT=BFITMP42
BFITMP42:TYPE=BEHAVIOUR
BFITMP42:CODE={VARITUTORIAL^SET(8);}


OBJECT=BFITMP43
BFITMP43:TYPE=BEHAVIOUR
BFITMP43:CODE={VARITUTORIAL^SET(7);BEHDOSPELL^RUN();}


OBJECT=BFITMP44
BFITMP44:TYPE=BEHAVIOUR
BFITMP44:CODE={@BREAK();}


OBJECT=BFITMP45
BFITMP45:TYPE=BEHAVIOUR
BFITMP45:CODE={VARDFRAME^SET(0.0);}


OBJECT=BFITMP46
BFITMP46:TYPE=BEHAVIOUR
BFITMP46:CODE={VARIDEBUG^SET(VARDFRAME);ANNWAND0^SETFRAME("PLAY",VARIDEBUG);VARDFRAME^ADD(0.1);@IF("VARDFRAME",">",ANNWAND0^GETNOFINEVENT(1),"BFITMP45","");__MMOVE__^RUN();};


OBJECT=BFITMP47
BFITMP47:TYPE=BEHAVIOUR
BFITMP47:CODE={@BREAK();}


OBJECT=BFITMP48
BFITMP48:TYPE=BEHAVIOUR
BFITMP48:CODE={G_ARRREXSPELLS^REMOVEALL();G_ARRREXSPELLS^LOAD("$COMMON\SPELLS0.ARR");G_ARRREXSPELLS^CHANGEAT(VARIREPEATSPELL,1);G_ARRREXSPELLS^SAVE("$COMMON\SPELLS0.ARR");}


OBJECT=BFITMP49
BFITMP49:TYPE=BEHAVIOUR
BFITMP49:CODE={@IF("S_IMAGICFIGHTER","_","13","{@BREAK();}","");G_ARRREXSPELLS^REMOVEALL();G_ARRREXSPELLS^LOAD("$COMMON\SPELLS0.ARR");}


OBJECT=BFITMP50
BFITMP50:TYPE=BEHAVIOUR
BFITMP50:CODE={G_SLASTOBJECTS^SET(["MAGIC_"+S_SMAGICPLACE+S_IMAGICFIGHTER]);G_SARCADEOBJECTS^SET(VARSRETURNTO);__SCREENSHOT__^RUN();PRZYGODA^GOTO("ARCADE");@BREAK();}


OBJECT=BFITMP51
BFITMP51:TYPE=BEHAVIOUR
BFITMP51:CODE={G_SARCADEOBJECTS^SET(VARSRETURNTO);__SCREENSHOT__^RUN();PRZYGODA^GOTO("LIMBO");@BREAK();}


OBJECT=BFITMP52
BFITMP52:TYPE=BEHAVIOUR
BFITMP52:CODE={@IF("VARBLEARNED","_","TRUE","BFITMP48","BFITMP49");@IF("VARBFLEE","_","FALSE","BFITMP50","BFITMP51");};


OBJECT=BFITMP53
BFITMP53:TYPE=BEHAVIOUR
BFITMP53:CODE={@BREAK();}


OBJECT=BFITMP54
BFITMP54:TYPE=BEHAVIOUR
BFITMP54:CODE={@IF("ANNWAND0^GETEVENTNAME()'"LADUJE"||ANNWAND0^GETEVENTNAME()'"STRZAL"","BFITMP53","");};


OBJECT=BFITMP55
BFITMP55:TYPE=BEHAVIOUR
BFITMP55:CODE={ARRROUTEX^REMOVEALL();ARRROUTEY^REMOVEALL();ARRANGLES^REMOVEALL();VARDLASTTAN^SET(-1.0);VARILASTX^SET(VARICURSORX);VARILASTY^SET(VARICURSORY);VARIDOMAGIC^SET(1);VARILASTDBG^SET(0);}


OBJECT=BFITMP56
BFITMP56:TYPE=BEHAVIOUR
BFITMP56:CODE={ANNWAND0^PLAY("STRZAL");VARISPELLREADY^SET(0);VARIDOMAGIC^SET(0);BEHCASTSPELL^RUN();@BREAK();}


OBJECT=BFITMP57
BFITMP57:TYPE=BEHAVIOUR
BFITMP57:CODE={@BREAK();}


OBJECT=BFITMP58
BFITMP58:TYPE=BEHAVIOUR
BFITMP58:CODE={@BREAK();}


OBJECT=BFITMP59
BFITMP59:TYPE=BEHAVIOUR
BFITMP59:CODE={@IF("ANNWAND0^GETEVENTNAME()'"LADUJE"||ANNWAND0^GETEVENTNAME()'"STRZAL"","BFITMP58","");};


OBJECT=BFITMP60
BFITMP60:TYPE=BEHAVIOUR
BFITMP60:CODE={VARIDOMAGIC^SET(0);BEHCOMPARE^RUN();}


OBJECT=BFITMP61
BFITMP61:TYPE=BEHAVIOUR
BFITMP61:CODE={IMGZOOM^LOAD("DO_MIOTLISKA.IMG");}


OBJECT=BFITMP62
BFITMP62:TYPE=BEHAVIOUR
BFITMP62:CODE={IMGZOOM^LOAD("DO_PRZYSTANI.IMG");}


OBJECT=BFITMP63
BFITMP63:TYPE=BEHAVIOUR
BFITMP63:CODE={IMGZOOM^LOAD("$COMMON\ZOOM.IMG");FJITTER^SETPROPERTY("MAXJITTER",7);FBLUR^SETPROPERTY("BLUR",9);FJITTER^LINK("IMGZOOM");FBLUR^LINK("IMGZOOM");}


OBJECT=BFITMP64
BFITMP64:TYPE=BEHAVIOUR
BFITMP64:CODE={@IF("S_IMAGICFIGHTER","_","1","BFITMP61","");@IF("S_IMAGICFIGHTER","_","0","BFITMP62","");};


OBJECT=BFITMP65
BFITMP65:TYPE=BEHAVIOUR
BFITMP65:CODE={GRPMOVE^ADD("ANNSZATY");}


OBJECT=BFITMP66
BFITMP66:TYPE=BEHAVIOUR
BFITMP66:CODE={ANNMOVEMENT^PLAY("MOVE1");}


OBJECT=BFITMP67
BFITMP67:TYPE=BEHAVIOUR
BFITMP67:CODE={SNDSTART^PLAY();}


OBJECT=BFITMP68
BFITMP68:TYPE=BEHAVIOUR
BFITMP68:CODE={@IF("SFIGHTER|TYPE","<","1","BFITMP67","");ANNWAND0^PLAY("IDLE");};


OBJECT=BFITMP69
BFITMP69:TYPE=BEHAVIOUR
BFITMP69:CODE={SNDSTARTNOSPELL^PLAY();ANNWAND0^STOP(FALSE);ANNWAND0^HIDE();}


OBJECT=BFITMP70
BFITMP70:TYPE=BEHAVIOUR
BFITMP70:CODE={SNDTUT0^PLAY();BEHSETACTIVESPELL^RUN(3);}


OBJECT=BFITMP71
BFITMP71:TYPE=BEHAVIOUR
BFITMP71:CODE={SNDTUTSENENTER^PLAY();BEHSETACTIVESPELL^RUN(0);}


OBJECT=BFITMP72
BFITMP72:TYPE=BEHAVIOUR
BFITMP72:CODE={SNDTUTSENDEFENTER^PLAY();BEHSETACTIVESPELL^RUN(6);}


OBJECT=BFITMP73
BFITMP73:TYPE=BEHAVIOUR
BFITMP73:CODE={SNDTUTBUDDEFENTER^PLAY();BEHSETACTIVESPELL^RUN(9);}


OBJECT=BFITMP74
BFITMP74:TYPE=BEHAVIOUR
BFITMP74:CODE={SNDTUTFROGENTER^PLAY();BEHSETACTIVESPELL^RUN(1);}


OBJECT=BFITMP75
BFITMP75:TYPE=BEHAVIOUR
BFITMP75:CODE={SNDTUTFLIESENTER^PLAY();BEHSETACTIVESPELL^RUN(2);}


OBJECT=BFITMP76
BFITMP76:TYPE=BEHAVIOUR
BFITMP76:CODE={SNDTUTFLIESDEFENTER^PLAY();BEHSETACTIVESPELL^RUN(8);}


OBJECT=BFITMP77
BFITMP77:TYPE=BEHAVIOUR
BFITMP77:CODE={SNDTUTDARKNESSDEFENTER^PLAY();BEHSETACTIVESPELL^RUN(11);}


OBJECT=BFITMP78
BFITMP78:TYPE=BEHAVIOUR
BFITMP78:CODE={SNDTUTWHIRLSENTER^PLAY();BEHSETACTIVESPELL^RUN(4);}


OBJECT=BFITMP79
BFITMP79:TYPE=BEHAVIOUR
BFITMP79:CODE={SNDTUTDARKENTER^PLAY();BEHSETACTIVESPELL^RUN(5);}


OBJECT=BFITMP80
BFITMP80:TYPE=BEHAVIOUR
BFITMP80:CODE={SNDTUTFROGDEFENTER^PLAY();BEHSETACTIVESPELL^RUN(7);}


OBJECT=BFITMP81
BFITMP81:TYPE=BEHAVIOUR
BFITMP81:CODE={SNDTUTWHIRLSDEFENTER^PLAY();BEHSETACTIVESPELL^RUN(10);}


OBJECT=BFITMP82
BFITMP82:TYPE=BEHAVIOUR
BFITMP82:CODE={VARITEMP0^SET([S_IMAGICFIGHTER-40]);BEHSETACTIVESPELL^RUN(VARITEMP0);BEHSNDPRACTICE^RUN();}


OBJECT=BFITMP83
BFITMP83:TYPE=BEHAVIOUR
BFITMP83:CODE={STL7^PLAY("ELAPSE");ANNSCIAGA^HIDE();}


OBJECT=BFITMP84
BFITMP84:TYPE=BEHAVIOUR
BFITMP84:CODE={ANNSCIAGA^SETFRAME("PLAY",VARIREPEATSPELL);}


OBJECT=BFITMP85
BFITMP85:TYPE=BEHAVIOUR
BFITMP85:CODE={@BREAK();}


OBJECT=BFITMP86
BFITMP86:TYPE=BEHAVIOUR
BFITMP86:CODE={@BREAK();}


OBJECT=BFITMP87
BFITMP87:TYPE=BEHAVIOUR
BFITMP87:CODE={VARDTEMP0^SET(46.0);}


OBJECT=BFITMP88
BFITMP88:TYPE=BEHAVIOUR
BFITMP88:CODE={VARDTEMP0^SET([VARDTAN-VARDLASTTAN]);}


OBJECT=BFITMP89
BFITMP89:TYPE=BEHAVIOUR
BFITMP89:CODE={VARDTEMP0^MUL(-1.0);}


OBJECT=BFITMP90
BFITMP90:TYPE=BEHAVIOUR
BFITMP90:CODE={ARRANGLES^ADD(VARDTAN);}


OBJECT=BFITMP91
BFITMP91:TYPE=BEHAVIOUR
BFITMP91:CODE={VARILASTCLONE^SET(1);}


OBJECT=BFITMP92
BFITMP92:TYPE=BEHAVIOUR
BFITMP92:CODE={@BREAK();}


OBJECT=BFITMP93
BFITMP93:TYPE=BEHAVIOUR
BFITMP93:CODE={ANNWAND1^PLAY("LADUJE");}


OBJECT=BFITMP94
BFITMP94:TYPE=BEHAVIOUR
BFITMP94:CODE={ANNWAND1^PLAY("IDLE");}

#PATCHED
#PAUSE THE STLMAGIC TIMER INSTEAD OF STOPPING IT IN ORDER TO MITIGATE A POSSIBILITY OF GAME ENTERING AN ENDLESS LOOP
OBJECT=BFITMP95
BFITMP95:TYPE=BEHAVIOUR
BFITMP95:CODE={STLMAGIC^PAUSE();ANNWAND1^STOP(FALSE);BEHLOADSPELL^RUN(VARSCOMPSPELL);@IF("VARITUTORIAL'0||VARITUTORIAL'7","BFITMP93","BFITMP94");BEHCOMPSPELL^RUN();@BREAK();};


OBJECT=BFITMP96
BFITMP96:TYPE=BEHAVIOUR
BFITMP96:CODE={BEHDOSPELL^RUN();}


OBJECT=BFITMP97
BFITMP97:TYPE=BEHAVIOUR
BFITMP97:CODE={@IF(STL10^ISPLAYING(),"_","FALSE","BFITMP96","");};

#PATCHED
#PAUSE THE STLMAGIC TIMER INSTEAD OF STOPPING IT IN ORDER TO MITIGATE A POSSIBILITY OF GAME ENTERING AN ENDLESS LOOP
OBJECT=BFITMP98
BFITMP98:TYPE=BEHAVIOUR
BFITMP98:CODE={STLMAGIC^PAUSE();ANNWAND1^STOP(FALSE);ANNWAND1^PLAY("IDLE");ARRENEMYROUTEX^REMOVEALL();ARRENEMYROUTEY^REMOVEALL();@IF("VARITUTORIAL'0||VARITUTORIAL'7","BFITMP97","");@BREAK();};


OBJECT=BFITMP99
BFITMP99:TYPE=BEHAVIOUR
BFITMP99:CODE={BEHDOSPELL^RUN();}


OBJECT=BFITMP100
BFITMP100:TYPE=BEHAVIOUR
BFITMP100:CODE={@IF(STL10^ISPLAYING(),"_","FALSE","BFITMP99","");};

#PATCHED
#PAUSE THE STLMAGIC TIMER INSTEAD OF STOPPING IT IN ORDER TO MITIGATE A POSSIBILITY OF GAME ENTERING AN ENDLESS LOOP
OBJECT=BFITMP101
BFITMP101:TYPE=BEHAVIOUR
BFITMP101:CODE={STLMAGIC^PAUSE();ANNWAND1^STOP(FALSE);ANNWAND1^PLAY("IDLE");ARRENEMYROUTEX^REMOVEALL();ARRENEMYROUTEY^REMOVEALL();@IF("VARITUTORIAL'0||VARITUTORIAL'7","BFITMP100","");@BREAK();};


OBJECT=BFITMP102
BFITMP102:TYPE=BEHAVIOUR
BFITMP102:CODE={VARILASTCLONE2^SET(1);}


OBJECT=BFITMP103
BFITMP103:TYPE=BEHAVIOUR
BFITMP103:CODE={VARITEMP1^INC();}


OBJECT=BFITMP104
BFITMP104:TYPE=BEHAVIOUR
BFITMP104:CODE={VARITEMP0^SET(1);}


OBJECT=BFITMP105
BFITMP105:TYPE=BEHAVIOUR
BFITMP105:CODE={VARITEMP1^INC();}


OBJECT=BFITMP106
BFITMP106:TYPE=BEHAVIOUR
BFITMP106:CODE={VARITEMP0^SET(1);}


OBJECT=BFITMP107
BFITMP107:TYPE=BEHAVIOUR
BFITMP107:CODE={VARITEMP1^INC();}


OBJECT=BFITMP108
BFITMP108:TYPE=BEHAVIOUR
BFITMP108:CODE={VARITEMP0^SET(1);}


OBJECT=BFITMP109
BFITMP109:TYPE=BEHAVIOUR
BFITMP109:CODE={VARDTEMP1^SUB(360.0);@IF("VARDTAN>VARDTEMP0||VARDTAN<VARDTEMP1","BFITMP105","BFITMP106");};


OBJECT=BFITMP110
BFITMP110:TYPE=BEHAVIOUR
BFITMP110:CODE={@IF("VARDTAN>VARDTEMP0&&VARDTAN<VARDTEMP1","BFITMP107","BFITMP108");};


OBJECT=BFITMP111
BFITMP111:TYPE=BEHAVIOUR
BFITMP111:CODE={VARDTEMP0^ADD(360.0);@IF("VARDTAN>VARDTEMP0||VARDTAN<VARDTEMP1","BFITMP103","BFITMP104");};


OBJECT=BFITMP112
BFITMP112:TYPE=BEHAVIOUR
BFITMP112:CODE={@IF("VARDTEMP1",">_","360.0","BFITMP109","BFITMP110");};


OBJECT=BFITMP113
BFITMP113:TYPE=BEHAVIOUR
BFITMP113:CODE={VARDTAN^SET(ARRANGLES^GET(VARITER));VARDTEMP0^SET(*VARSTEMP0^GET(VARITER));VARDTEMP0^SUB(35.5);VARDTEMP1^SET(*VARSTEMP0^GET(VARITER));VARDTEMP1^ADD(35.5);@IF("VARDTEMP0","<","0.0","BFITMP111","BFITMP112");};


OBJECT=BFITMP114
BFITMP114:TYPE=BEHAVIOUR
BFITMP114:CODE={VARITEMP1^SET(0);}


OBJECT=BFITMP115
BFITMP115:TYPE=BEHAVIOUR
BFITMP115:CODE={SNDTUT7^PLAY();}


OBJECT=BFITMP116
BFITMP116:TYPE=BEHAVIOUR
BFITMP116:CODE={@IF("VARITUTORIAL","_","3","BFITMP115","");BEHSPELL^RUN();@BREAK();};


OBJECT=BFITMP117
BFITMP117:TYPE=BEHAVIOUR
BFITMP117:CODE={@LOOP("{VARSTEMP0^SET(["ANNSPELL_"+_I_]);*VARSTEMP0^SETPOSITION(ARRROUTEX^GET(_I_),ARRROUTEY^GET(_I_));*VARSTEMP0^SHOW();*VARSTEMP0^PLAY("PLAY");}",0,ARRROUTEX^GETSIZE(),1);BEHSNDLEARNEDSHAPE^RUN();@BREAK();};


OBJECT=BFITMP118
BFITMP118:TYPE=BEHAVIOUR
BFITMP118:CODE={BEHCOMPPATTERN^RUN();VARITEMP0^SET(*VARSTEMP0^GETSIZE());@IF("VARITEMP0'VARITEMP1&&ARRACTIVESPELLS^GET(VARITER2)'1&&VARITUTORIAL!'2","BFITMP116","");@IF("VARITEMP0'VARITEMP1&&VARITUTORIAL'2&&VARITER2'VARIDEFTOPRACTICE","BFITMP117","");};


OBJECT=BFITMP119
BFITMP119:TYPE=BEHAVIOUR
BFITMP119:CODE={VARITEMP1^SET(ARRSPELLTYPE^GET(0));VARITEMP1^SUB(6);ARRDEFENSE^CHANGEAT(0,VARITEMP1);ANNSHIELD^PLAY("PLAY");}


OBJECT=BFITMP120
BFITMP120:TYPE=BEHAVIOUR
BFITMP120:CODE={VARISPELLREADY^SET(1);ANNWAND0^PLAY("LADUJE");}


OBJECT=BFITMP121
BFITMP121:TYPE=BEHAVIOUR
BFITMP121:CODE={SNDTUT8^PLAY();}


OBJECT=BFITMP122
BFITMP122:TYPE=BEHAVIOUR
BFITMP122:CODE={@IF("VARITUTREPEAT","_","3","BFITMP121","");VARITUTREPEAT^DEC();};

#ADD NEW INSTRUCION TO RUN WHEN A SPELL HITS ENEMY
OBJECT=BFITMP123
BFITMP123:TYPE=BEHAVIOUR
BFITMP123:CODE={ANNCLOUD^SETPOSITION(ANNBODY1^GETPOSITIONX(),ANNBODY1^GETPOSITIONY());ANNCLOUD^PLAY("PLAY");ANNCLOUD^SHOW();BEHAPPLYSPELL^RUN(1,ARRSPELLTYPE^GET(0));@IF("VARITUTORIAL","_","4","BFITMP122","");BEHSPELLHIT^RUN();}


OBJECT=BFITMP124
BFITMP124:TYPE=BEHAVIOUR
BFITMP124:CODE={VARITEMP2^SUB(ARRFIGHTERSPELLS^GETSIZE());VARITEMP0^SET(ARRFIGHTERDEFENSE^GET(VARITEMP2));}


OBJECT=BFITMP125
BFITMP125:TYPE=BEHAVIOUR
BFITMP125:CODE={VARITEMP0^SET(ARRFIGHTERSPELLS^GET(VARITEMP2));}


#PATCHED
#ADD A MODIFIED VERSION OF BFITMP126 EXECUTED ON THE BEGINING OF THE FIGHT ONLY
OBJECT=BFITMP126FIRSTTIME
BFITMP126FIRSTTIME:TYPE=BEHAVIOUR
BFITMP126FIRSTTIME:CODE={VARITEMP2^SET(BEH_AI_BESTSPELL^RUN());VARITEMP1^SET(ARRFIGHTERSPELLS^GETSIZE());VARITEMP1^DEC();@IF("VARITEMP2",">","VARITEMP1","BFITMP124","BFITMP125");ARRSPELLTYPE^CHANGEAT(1,VARITEMP0);VARSCOMPSPELL^SET(ARRCOMPSPELLS^GET(VARITEMP0));BEHLOADSPELL^RUN(VARSCOMPSPELL);ANNWAND1^PLAY("CZARUJE");STLMAGIC^PLAY("ELAPSE");};

#PATCHED
#RESUME THE STLMAGIC TIMER INSTEAD OF RESTARTING IT IN ORDER TO MITIGATE A POSSIBILITY OF GAME ENTERING AN ENDLESS LOOP
OBJECT=BFITMP126
BFITMP126:TYPE=BEHAVIOUR
BFITMP126:CODE={VARITEMP2^SET(BEH_AI_BESTSPELL^RUN());VARITEMP1^SET(ARRFIGHTERSPELLS^GETSIZE());VARITEMP1^DEC();@IF("VARITEMP2",">","VARITEMP1","BFITMP124","BFITMP125");ARRSPELLTYPE^CHANGEAT(1,VARITEMP0);VARSCOMPSPELL^SET(ARRCOMPSPELLS^GET(VARITEMP0));BEHLOADSPELL^RUN(VARSCOMPSPELL);ANNWAND1^PLAY("CZARUJE");STLMAGIC^RESUME();};

#PATCHED
#PAUSE THE STLMAGIC TIMER INSTEAD OF STOPPING IT IN ORDER TO MITIGATE A POSSIBILITY OF GAME ENTERING AN ENDLESS LOOP
OBJECT=BFITMP127
BFITMP127:TYPE=BEHAVIOUR
BFITMP127:CODE={STLMAGIC^PAUSE();BEHLEARNEDDEF^RUN();}

#PATCHED
#PAUSE THE STLMAGIC TIMER INSTEAD OF STOPPING IT IN ORDER TO MITIGATE A POSSIBILITY OF GAME ENTERING AN ENDLESS LOOP
OBJECT=BFITMP128
BFITMP128:TYPE=BEHAVIOUR
BFITMP128:CODE={VARIWINNER^SET(VARITEMP0);ANNWAND0^PLAY("IDLE");ANNWAND1^PLAY("IDLE");BEHPLAYSOUND^RUN(8);STLMAGIC^PAUSE();STL8^STOP(FALSE);STL10^PLAY("ELAPSE");}

#ADD NEW INSTRUCTION TO RUN WHEN REKSIO IS HIT
OBJECT=BFITMP129
BFITMP129:TYPE=BEHAVIOUR
BFITMP129:CODE={VARSTEMP0^SET(["ARREFFECTLEVEL"+VARITEMP0]);*VARSTEMP0^ADDAT(VARITEMP1,1);@IF(*VARSTEMP0^GET(VARITEMP1),"_","3","BFITMP128","{@IF("VARITEMP0'0","{BEHREXTRAFIONY^RUN();}","");}");VARSTEMP0^SET(["ARREFFECTELAPSED"+VARITEMP0]);*VARSTEMP0^CHANGEAT(VARITEMP1,0);VARSTEMP0^SET(["STLEFFECT0_"+VARITEMP0]);*VARSTEMP0^PLAY("ELAPSE");};

#PATCHED
#PAUSE THE STLMAGIC TIMER INSTEAD OF STOPPING IT IN ORDER TO MITIGATE A POSSIBILITY OF GAME ENTERING AN ENDLESS LOOP
OBJECT=BFITMP130
BFITMP130:TYPE=BEHAVIOUR
BFITMP130:CODE={VARIWINNER^SET(VARITEMP0);ANNWAND0^PLAY("IDLE");ANNWAND1^PLAY("IDLE");BEHPLAYSOUND^RUN(8);STLMAGIC^PAUSE();STL8^STOP(FALSE);STL10^PLAY("ELAPSE");}


OBJECT=BFITMP131
BFITMP131:TYPE=BEHAVIOUR
BFITMP131:CODE={SNDREXPAIN^PLAY();}


OBJECT=BFITMP132
BFITMP132:TYPE=BEHAVIOUR
BFITMP132:CODE={BEHPLAYRANDSOUND^PLAY();}


#PATCHED
#FIX A TYPO (INCORRECTLY PLACED ASTERISK) PREVENTING EFFECTS OF THE FROG SPELL FROM AFFECTING REKSIO
#ADD NEW INSTRUCTION TO RUN WHEN REKSIO IS HIT
OBJECT=BFITMP133
BFITMP133:TYPE=BEHAVIOUR
BFITMP133:CODE={VARSTEMP1^SET(["ARREFFECTLEVEL"+VARITEMP0]);*VARSTEMP1^ADDAT(VARITEMP1,1);@IF(*VARSTEMP1^GET(VARITEMP1),"_","3","BFITMP130","{@IF("VARITEMP0'0","{BEHREXTRAFIONY^RUN();}","");}");VARITEMP2^SET(*VARSTEMP1^GET(VARITEMP1));VARSTEMP0^SET(["IDLE_ZABA_"+VARITEMP2]);ARRIDLENAME^CHANGEAT(VARITEMP1,VARSTEMP0);VARSTEMP0^SET(["ANNBODY"+VARITEMP0]);*VARSTEMP0^PLAY(ARRIDLENAME^GET(VARITEMP1));VARSTEMP0^SET(["ARREFFECTELAPSED"+VARITEMP0]);*VARSTEMP0^CHANGEAT(VARITEMP1,0);VARSTEMP0^SET(["STLEFFECT1_"+VARITEMP0]);*VARSTEMP0^PLAY("ELAPSE");@IF("VARITEMP0","_","0","BFITMP131","BFITMP132");}

#PATCHED
#PAUSE THE STLMAGIC TIMER INSTEAD OF STOPPING IT IN ORDER TO MITIGATE A POSSIBILITY OF GAME ENTERING AN ENDLESS LOOP
OBJECT=BFITMP134
BFITMP134:TYPE=BEHAVIOUR
BFITMP134:CODE={VARIWINNER^SET(VARITEMP0);ANNWAND0^PLAY("IDLE");ANNWAND1^PLAY("IDLE");BEHPLAYSOUND^RUN(8);STLMAGIC^PAUSE();STL8^STOP(FALSE);STL10^PLAY("ELAPSE");}


OBJECT=BFITMP135
BFITMP135:TYPE=BEHAVIOUR
BFITMP135:CODE={ANNFLIES1^SETPOSITION([ANNHEAD1^GETPOSITIONX()+162],[ANNHEAD1^GETPOSITIONY()+162]);ANNFLIES1^PLAY("START");GRPMOVE^ADD("ANNFLIES1");}


OBJECT=BFITMP136
BFITMP136:TYPE=BEHAVIOUR
BFITMP136:CODE={ANNFLIES1_1^SHOW();ANNFLIES1_1^SETPOSITION([ANNHEAD1^GETPOSITIONX()+182],[ANNHEAD1^GETPOSITIONY()+182]);ANNFLIES1_1^PLAY("START");GRPMOVE^ADD("ANNFLIES1_1");}


OBJECT=BFITMP137
BFITMP137:TYPE=BEHAVIOUR
BFITMP137:CODE={ANNFLIES1_2^SHOW();ANNFLIES1_2^SETPOSITION([ANNHEAD1^GETPOSITIONX()+120],[ANNHEAD1^GETPOSITIONY()+172]);ANNFLIES1_2^PLAY("START");GRPMOVE^ADD("ANNFLIES1_2");}


OBJECT=BFITMP138
BFITMP138:TYPE=BEHAVIOUR
BFITMP138:CODE={ANNMUCHA1^PLAY("PLAY");ANNMUCHA2^PLAY("PLAY");}


OBJECT=BFITMP139
BFITMP139:TYPE=BEHAVIOUR
BFITMP139:CODE={ANNMUCHA3^PLAY("PLAY");ANNMUCHA4^PLAY("PLAY");ANNMUCHA5^PLAY("PLAY");}


OBJECT=BFITMP140
BFITMP140:TYPE=BEHAVIOUR
BFITMP140:CODE={ANNMUCHA1^SETFPS(30);ANNMUCHA2^SETFPS(30);ANNMUCHA3^SETFPS(30);ANNMUCHA4^SETFPS(30);ANNMUCHA5^SETFPS(30);}


OBJECT=BFITMP141
BFITMP141:TYPE=BEHAVIOUR
BFITMP141:CODE={@IF(*VARSTEMP1^GET(VARITEMP1),"_","1","BFITMP135","");@IF(*VARSTEMP1^GET(VARITEMP1),"_","2","BFITMP136","");@IF(*VARSTEMP1^GET(VARITEMP1),"_","3","BFITMP137","");};


OBJECT=BFITMP142
BFITMP142:TYPE=BEHAVIOUR
BFITMP142:CODE={@IF(*VARSTEMP1^GET(VARITEMP1),"_","1","BFITMP138","");@IF(*VARSTEMP1^GET(VARITEMP1),"_","2","BFITMP139","");@IF(*VARSTEMP1^GET(VARITEMP1),"_","3","BFITMP140","");};


OBJECT=BFITMP143
BFITMP143:TYPE=BEHAVIOUR
BFITMP143:CODE={SNDREXPAIN^PLAY();}


OBJECT=BFITMP144
BFITMP144:TYPE=BEHAVIOUR
BFITMP144:CODE={BEHPLAYRANDSOUND^PLAY();}

#ADD NEW INSTRUCTION TO RUN WHEN REKSIO IS HIT
OBJECT=BFITMP145
BFITMP145:TYPE=BEHAVIOUR
BFITMP145:CODE={VARSTEMP1^SET(["ARREFFECTLEVEL"+VARITEMP0]);*VARSTEMP1^ADDAT(VARITEMP1,1);@IF(*VARSTEMP1^GET(VARITEMP1),"_","3","BFITMP134","{@IF("VARITEMP0'0","{BEHREXTRAFIONY^RUN();}","");}");@IF("VARITEMP0","_","1","BFITMP141","BFITMP142");@IF("VARITEMP0","_","0","BFITMP143","BFITMP144");};

#PATCHED
#PAUSE THE STLMAGIC TIMER INSTEAD OF STOPPING IT IN ORDER TO MITIGATE A POSSIBILITY OF GAME ENTERING AN ENDLESS LOOP
OBJECT=BFITMP146
BFITMP146:TYPE=BEHAVIOUR
BFITMP146:CODE={VARIWINNER^SET(VARITEMP0);ANNWAND0^PLAY("IDLE");ANNWAND1^PLAY("IDLE");BEHPLAYSOUND^RUN(8);STLMAGIC^PAUSE();STL8^STOP(FALSE);STL10^PLAY("ELAPSE");}


OBJECT=BFITMP147
BFITMP147:TYPE=BEHAVIOUR
BFITMP147:CODE={VARITER^SET(5);VARITER^SUB(ARREFFECTLEVEL1^GET(3));STLMAGIC^SETFPS(VARITER);}


OBJECT=BFITMP148
BFITMP148:TYPE=BEHAVIOUR
BFITMP148:CODE={GRPMOVE^ADD("ANNPUDDING1");}


OBJECT=BFITMP149
BFITMP149:TYPE=BEHAVIOUR
BFITMP149:CODE={SNDREXPAIN^PLAY();}


OBJECT=BFITMP150
BFITMP150:TYPE=BEHAVIOUR
BFITMP150:CODE={BEHPLAYRANDSOUND^PLAY();}

#ADD NEW INSTRUCTION TO RUN WHEN REKSIO IS HIT
OBJECT=BFITMP151
BFITMP151:TYPE=BEHAVIOUR
BFITMP151:CODE={VARSTEMP1^SET(["ARREFFECTLEVEL"+VARITEMP0]);*VARSTEMP1^ADDAT(VARITEMP1,1);@IF(*VARSTEMP1^GET(VARITEMP1),"_","3","BFITMP146","{@IF("VARITEMP0'0","{BEHREXTRAFIONY^RUN();}","");}");@IF("VARITEMP0","_","1","BFITMP147","");ARRSPEEDFACTOR^MULAT(VARITEMP0,2);VARSTEMP0^SET(["ANNPUDDING"+VARITEMP0]);VARITEMP2^SET(*VARSTEMP1^GET(VARITEMP1));VARITEMP2^DEC();*VARSTEMP0^NPLAY(VARITEMP2);@IF("VARITEMP0","_","1","BFITMP148","");@IF("VARITEMP0","_","0","BFITMP149","BFITMP150");};

#PATCHED
#PAUSE THE STLMAGIC TIMER INSTEAD OF STOPPING IT IN ORDER TO MITIGATE A POSSIBILITY OF GAME ENTERING AN ENDLESS LOOP
OBJECT=BFITMP152
BFITMP152:TYPE=BEHAVIOUR
BFITMP152:CODE={VARIWINNER^SET(VARITEMP0);ANNWAND0^PLAY("IDLE");ANNWAND1^PLAY("IDLE");BEHPLAYSOUND^RUN(8);STLMAGIC^PAUSE();STL8^STOP(FALSE);STL10^PLAY("ELAPSE");}


OBJECT=BFITMP153
BFITMP153:TYPE=BEHAVIOUR
BFITMP153:CODE={ANNHEAD0^PLAY("ROZKOJARZONY");}


OBJECT=BFITMP154
BFITMP154:TYPE=BEHAVIOUR
BFITMP154:CODE={GRPMOVE^ADD("ANNWHIRL1");}


OBJECT=BFITMP155
BFITMP155:TYPE=BEHAVIOUR
BFITMP155:CODE={@IF(ANNHEAD0^GETEVENTNAME(),"!_",""SPI"","BFITMP153","");};


OBJECT=BFITMP156
BFITMP156:TYPE=BEHAVIOUR
BFITMP156:CODE={ANNWHIRL1^PLAY("PLAY");ANNWHIRL1^SETFPS([ARREFFECTLEVEL1^GET(4)*16]);@IF(ARREFFECTLEVEL1^GET(4),"_","1","BFITMP154","");};


OBJECT=BFITMP157
BFITMP157:TYPE=BEHAVIOUR
BFITMP157:CODE={SNDREXPAIN^PLAY();}


OBJECT=BFITMP158
BFITMP158:TYPE=BEHAVIOUR
BFITMP158:CODE={BEHPLAYRANDSOUND^PLAY();}

#ADD NEW INSTRUCTION TO RUN WHEN REKSIO IS HIT
OBJECT=BFITMP159
BFITMP159:TYPE=BEHAVIOUR
BFITMP159:CODE={VARSTEMP1^SET(["ARREFFECTLEVEL"+VARITEMP0]);*VARSTEMP1^ADDAT(VARITEMP1,1);@IF(*VARSTEMP1^GET(VARITEMP1),"_","3","BFITMP152","{@IF("VARITEMP0'0","{BEHREXTRAFIONY^RUN();}","");}");ARRSLIDE^ADDAT(VARITEMP0,3.0);@IF("VARITEMP0","_","0","BFITMP155","BFITMP156");@IF("VARITEMP0","_","0","BFITMP157","BFITMP158");};

#PATCHED
#PAUSE THE STLMAGIC TIMER INSTEAD OF STOPPING IT IN ORDER TO MITIGATE A POSSIBILITY OF GAME ENTERING AN ENDLESS LOOP
OBJECT=BFITMP160
BFITMP160:TYPE=BEHAVIOUR
BFITMP160:CODE={VARIWINNER^SET(VARITEMP0);ANNWAND0^PLAY("IDLE");ANNWAND1^PLAY("IDLE");BEHPLAYSOUND^RUN(8);STLMAGIC^PAUSE();STL8^STOP(FALSE);STL10^PLAY("ELAPSE");}


OBJECT=BFITMP161
BFITMP161:TYPE=BEHAVIOUR
BFITMP161:CODE={VARITEMP2^SET(*VARSTEMP1^GET(VARITEMP1));VARITEMP2^DEC();ANNDARK0^NPLAY(VARITEMP2);}


OBJECT=BFITMP162
BFITMP162:TYPE=BEHAVIOUR
BFITMP162:CODE={ANNDARK1^PLAY("PLAY");}


OBJECT=BFITMP163
BFITMP163:TYPE=BEHAVIOUR
BFITMP163:CODE={SNDREXPAIN^PLAY();}


OBJECT=BFITMP164
BFITMP164:TYPE=BEHAVIOUR
BFITMP164:CODE={BEHPLAYRANDSOUND^PLAY();}

#ADD NEW INSTRUCTION TO RUN WHEN REKSIO IS HIT
OBJECT=BFITMP165
BFITMP165:TYPE=BEHAVIOUR
BFITMP165:CODE={VARSTEMP1^SET(["ARREFFECTLEVEL"+VARITEMP0]);*VARSTEMP1^ADDAT(VARITEMP1,1);@IF(*VARSTEMP1^GET(VARITEMP1),"_","3","BFITMP160","{@IF("VARITEMP0'0","{BEHREXTRAFIONY^RUN();}","");}");@IF("VARITEMP0","_","0","BFITMP161","BFITMP162");@IF("VARITEMP0","_","0","BFITMP163","BFITMP164");};


OBJECT=BFITMP166
BFITMP166:TYPE=BEHAVIOUR
BFITMP166:CODE={@IF("VARITEMP1","_","0","BFITMP129","");@IF("VARITEMP1","_","1","BFITMP133","");@IF("VARITEMP1","_","2","BFITMP145","");@IF("VARITEMP1","_","3","BFITMP151","");@IF("VARITEMP1","_","4","BFITMP159","");@IF("VARITEMP1","_","5","BFITMP165","");}


OBJECT=BFITMP167
BFITMP167:TYPE=BEHAVIOUR
BFITMP167:CODE={ANNCLOUD^PLAY("PLAY");ANNCLOUD^SHOW();ANNSHIELD^STOP(FALSE);ANNSHIELD^HIDE();ARRDEFENSE^CHANGEAT(VARITEMP0,-1);ANNCLOUD^STOP(FALSE);ANNCLOUD^HIDE();@IF("VARITUTORIAL","_","7","BFITMP127","");};


OBJECT=BFITMP168
BFITMP168:TYPE=BEHAVIOUR
BFITMP168:CODE={@IF("VARITUTORIAL","!_","7","BFITMP166","");};


OBJECT=BFITMP169
BFITMP169:TYPE=BEHAVIOUR
BFITMP169:CODE={VARITEMP2^SET(VARSTEMP0^LENGTH());}


OBJECT=BFITMP170
BFITMP170:TYPE=BEHAVIOUR
BFITMP170:CODE={VARITEMP2^SET(VARSTEMP0^LENGTH());}


OBJECT=BFITMP171
BFITMP171:TYPE=BEHAVIOUR
BFITMP171:CODE={ARRFIGHTERDEFENSE^ADD(VARITER);}


OBJECT=BFITMP172
BFITMP172:TYPE=BEHAVIOUR
BFITMP172:CODE={ARRFIGHTERSPELLS^ADD(VARITER);}


OBJECT=BFITMP173
BFITMP173:TYPE=BEHAVIOUR
BFITMP173:CODE={ARRFIGHTERDEFENSE^ADD(VARITER);}


OBJECT=BFITMP174
BFITMP174:TYPE=BEHAVIOUR
BFITMP174:CODE={ARRFIGHTERSPELLS^ADD(VARITER);}


OBJECT=BFITMP175
BFITMP175:TYPE=BEHAVIOUR
BFITMP175:CODE={VARITER^SET(VARSTEMP0);@IF("VARITER",">","5","BFITMP171","BFITMP172");VARSTEMP0^SET("");VARITEMP2^SET(0);};


OBJECT=BFITMP176
BFITMP176:TYPE=BEHAVIOUR
BFITMP176:CODE={VARSTEMP1^SET(VARSTEMP0);VARSTEMP1^SUB(VARITEMP0,[VARSTEMP1^LENGTH()-VARITEMP0]);VARITER^SET(VARSTEMP1);@IF("VARITER",">","5","BFITMP173","BFITMP174");VARSTEMP0^SUB(0,[VARITEMP0+1]);VARITEMP2^SET(VARSTEMP0^LENGTH());};


OBJECT=BFITMP177
BFITMP177:TYPE=BEHAVIOUR
BFITMP177:CODE={ANNHEAD1^LOAD("ZLY_GLOWA.ANN");ANNBODY1^LOAD("ZLY_KORPUS.ANN");ANNSZATY^SETPRIORITY(17);ANNSZATY^SHOW(TRUE);ANNHEAD1^SETPRIORITY(15);ANNBODY1^SETPRIORITY(10);ANNPUDDING1^LOAD("ZLY_BUDYN.ANN");ANNPUDDING1^SETPRIORITY(22);ANNPUDDING1^HIDE();ANNDARK1^LOAD("ZLY_CIEMNOSC.ANN");ANNDARK1^SETPRIORITY(25);ANNDARK1^HIDE();ANNWHIRL1^LOAD("ZLY_WIR.ANN");ANNWHIRL1^SETPRIORITY(22);ANNWHIRL1^HIDE();ANNSZATY^NPLAY(G_ITKTPM);SNDREXPAIN^LOAD("$WAVS\CZARO_F062.WAV");SNDGESPAIN0^LOAD("$WAVS\KRETES_F056.WAV");SNDGESPAIN1^LOAD("$WAVS\KRETES_F057.WAV");SNDGESPAIN2^LOAD("$WAVS\CZARO_F066.WAV");SNDGESPAIN3^LOAD("$WAVS\CZARO_F066.WAV");SNDGESPAIN4^LOAD("$WAVS\KRETES_F057.WAV");SNDGESPAIN5^LOAD("$WAVS\CZARO_F060.WAV");SNDGESPAIN6^LOAD("$WAVS\KRETES_F057.WAV");SNDGESPAIN7^LOAD("$WAVS\KRETES_F056.WAV");SNDGESPAIN8^LOAD("$WAVS\CZARO_F066.WAV");ARRENEMYPARTS^ADD("ANNSZATY");}


OBJECT=BFITMP178
BFITMP178:TYPE=BEHAVIOUR
BFITMP178:CODE={ANNHEAD1^LOAD("GES_GLOWA.ANN");ANNBODY1^LOAD("GES_KORPUS.ANN");}


OBJECT=BFITMP179
BFITMP179:TYPE=BEHAVIOUR
BFITMP179:CODE={ANNHEAD1^LOAD("KURA_GLOWA.ANN");ANNBODY1^LOAD("KURA_KORPUS.ANN");}


OBJECT=BFITMP180
BFITMP180:TYPE=BEHAVIOUR
BFITMP180:CODE={ANNHEAD1^LOAD("DRWAL_GLOWA.ANN");ANNBODY1^LOAD("DRWAL_KORPUS.ANN");}


OBJECT=BFITMP181
BFITMP181:TYPE=BEHAVIOUR
BFITMP181:CODE={ANNHEAD1^LOAD("LEW_GLOWA.ANN");ANNBODY1^LOAD("LEW_KORPUS.ANN");}


OBJECT=BFITMP182
BFITMP182:TYPE=BEHAVIOUR
BFITMP182:CODE={ANNHEAD1^LOAD("STRACH_GLOWA.ANN");ANNBODY1^LOAD("STRACH_KORPUS.ANN");}


OBJECT=BFITMP183
BFITMP183:TYPE=BEHAVIOUR
BFITMP183:CODE={ANNPUDDING1^LOAD("MANEKIN_BUDYN.ANN");ANNPUDDING1^SETPRIORITY(22);ANNPUDDING1^HIDE();}


OBJECT=BFITMP184
BFITMP184:TYPE=BEHAVIOUR
BFITMP184:CODE={ARRACTIVESPELLS^CHANGEAT(VARITEMP1,1);}


OBJECT=BFITMP185
BFITMP185:TYPE=BEHAVIOUR
BFITMP185:CODE={ARRACTIVESPELLS^CHANGEAT(VARITEMP1,0);}


OBJECT=BFITMP186
BFITMP186:TYPE=BEHAVIOUR
BFITMP186:CODE={VARIDEFTOPRACTICE^SET(VARITEMP0);}


OBJECT=BFITMP187
BFITMP187:TYPE=BEHAVIOUR
BFITMP187:CODE={VARIDEFTOPRACTICE^SET(-1);}


OBJECT=BFITMP188
BFITMP188:TYPE=BEHAVIOUR
BFITMP188:CODE={KEYBOARD^ENABLE();}


OBJECT=BFITMP189
BFITMP189:TYPE=BEHAVIOUR
BFITMP189:CODE={KEYBOARD^DISABLE();}


OBJECT=BFITMP190
BFITMP190:TYPE=BEHAVIOUR
BFITMP190:CODE={VARITER2^SET(VARITER);VARITEMP1^SET(ARREFFECTLEVEL0^GET(VARITER));}


OBJECT=BFITMP191
BFITMP191:TYPE=BEHAVIOUR
BFITMP191:CODE={VARITEMP2^ADD(ARRFIGHTERSPELLS^GETSIZE());}


OBJECT=BFITMP192
BFITMP192:TYPE=BEHAVIOUR
BFITMP192:CODE={VARITEMP2^SET(-1);}


OBJECT=BFITMP193
BFITMP193:TYPE=BEHAVIOUR
BFITMP193:CODE={VARITEMP2^SET(ARRFIGHTERDEFENSE^FIND(VARITER));@IF("VARITEMP2",">","-1","BFITMP191","");};


OBJECT=BFITMP194
BFITMP194:TYPE=BEHAVIOUR
BFITMP194:CODE={VARITEMP2^SET(-1);}


OBJECT=BFITMP195
BFITMP195:TYPE=BEHAVIOUR
BFITMP195:CODE={VARITER^ADD(6);@IF(ARRDEFENSE^GET(1),"_","VARITER","BFITMP192","BFITMP193");};


OBJECT=BFITMP196
BFITMP196:TYPE=BEHAVIOUR
BFITMP196:CODE={VARITER^SET(ARREFFECTLEVEL1^FIND(2));@IF("VARITER","_","-1","BFITMP194","BFITMP195");};


OBJECT=BFITMP197
BFITMP197:TYPE=BEHAVIOUR
BFITMP197:CODE={VARITEMP2^SET(-1);}


OBJECT=BFITMP198
BFITMP198:TYPE=BEHAVIOUR
BFITMP198:CODE={VARITEMP2^SET(RANDOM^GET(0,ARRFIGHTERSPELLS^GETSIZE()));}


OBJECT=BFITMP199
BFITMP199:TYPE=BEHAVIOUR
BFITMP199:CODE={VARITEMP2^SET(ARRFIGHTERSPELLS^FIND(VARITER2));}


OBJECT=BFITMP200
BFITMP200:TYPE=BEHAVIOUR
BFITMP200:CODE={@IF("VARITEMP0","_","0","BFITMP198","BFITMP199");};


OBJECT=BFITMP201
BFITMP201:TYPE=BEHAVIOUR
BFITMP201:CODE={VARSTEMP0^SET(["SNDGESPAIN"+VARITER]);*VARSTEMP0^PLAY();}


OBJECT=BFITMP202
BFITMP202:TYPE=BEHAVIOUR
BFITMP202:CODE={VARSTEMP0^SET(["SNDKURAPAIN"+VARITER]);*VARSTEMP0^PLAY();}


OBJECT=BFITMP203
BFITMP203:TYPE=BEHAVIOUR
BFITMP203:CODE={VARSTEMP0^SET(["SNDZLYPAIN"+VARITER]);*VARSTEMP0^PLAY();}


OBJECT=BFITMP204
BFITMP204:TYPE=BEHAVIOUR
BFITMP204:CODE={@IF("SFIGHTER|TYPE","_","0","BFITMP201","");@IF("SFIGHTER|TYPE","_","1","BFITMP202","");};


OBJECT=BFITMP205
BFITMP205:TYPE=BEHAVIOUR
BFITMP205:CODE={VARSTEMP0^SET(["SNDGESPAIN"+VARITER]);*VARSTEMP0^PLAY();}


OBJECT=BFITMP206
BFITMP206:TYPE=BEHAVIOUR
BFITMP206:CODE={VARSTEMP0^SET(["SNDKURAPAIN"+VARITER]);*VARSTEMP0^PLAY();}


OBJECT=BFITMP207
BFITMP207:TYPE=BEHAVIOUR
BFITMP207:CODE={VARITER^RANDOM(0,3);VARSTEMP0^SET(["SNDZLYPAIN"+VARITER]);*VARSTEMP0^PLAY();}


OBJECT=BFITMP208
BFITMP208:TYPE=BEHAVIOUR
BFITMP208:CODE={VARITER^RANDOM(0,5);@IF("SFIGHTER|TYPE","_","0","BFITMP205","");@IF("SFIGHTER|TYPE","_","1","BFITMP206","");};


