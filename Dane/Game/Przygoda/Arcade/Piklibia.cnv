OBJECT=VARITER2
VARITER2:TYPE=INTEGER

OBJECT=VARIRECENTFIELD
VARIRECENTFIELD:TYPE=INTEGER

OBJECT=VARICROSS
VARICROSS:TYPE=INTEGER

OBJECT=VARSTEMP3
VARSTEMP3:TYPE=STRING

OBJECT=VARINUMZLOM
VARINUMZLOM:TYPE=INTEGER

OBJECT=VARIRANDOM
VARIRANDOM:TYPE=INTEGER
VARIRANDOM:ONCHANGED^140={VARIRANDOM^SET(0);@IF("VARBSEQPLAYING","_","FALSE","BFITMP378","");}

OBJECT=VARIKRETKRASY
VARIKRETKRASY:TYPE=INTEGER

OBJECT=ANNPOLA
ANNPOLA:TYPE=ANIMO
ANNPOLA:VISIBLE=TRUE
ANNPOLA:FILENAME=TEMPLATE.ANN
ANNPOLA:TOCANVAS=TRUE
ANNPOLA:PRIORITY=2000
ANNPOLA:FPS=16
ANNPOLA:PRELOAD=TRUE
ANNPOLA:RELEASE=TRUE
ANNPOLA:MONITORCOLLISION=FALSE
ANNPOLA:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNKNIGHT0
ANNKNIGHT0:TYPE=ANIMO
ANNKNIGHT0:VISIBLE=TRUE
ANNKNIGHT0:FILENAME=TEMPLATE.ANN
ANNKNIGHT0:TOCANVAS=TRUE
ANNKNIGHT0:PRIORITY=2000
ANNKNIGHT0:FPS=16
ANNKNIGHT0:PRELOAD=TRUE
ANNKNIGHT0:RELEASE=TRUE
ANNKNIGHT0:MONITORCOLLISION=FALSE
ANNKNIGHT0:MONITORCOLLISIONALPHA=FALSE
ANNKNIGHT0:ONFRAMECHANGED^SKOK={ARRKNIGHTX^ADDAT(0,ARRKNIGHTDELTAX^GET(0));ARRKNIGHTY^ADDAT(0,ARRKNIGHTDELTAY^GET(0));VARDTEMP0^SET([VARIBKGOFFSETX-VARDLASTBKGX]);VARDTEMP1^SET([VARIBKGOFFSETY-VARDLASTBKGY]);VARDTEMP0^ADD(ARRKNIGHTX^GET(0));VARDTEMP0^SUB(2);VARDTEMP1^ADD(ARRKNIGHTY^GET(0));VARDTEMP1^SUB(60);ANNKNIGHT0^SETPOSITION(VARDTEMP0,VARDTEMP1);ANNKNIGHT0^SETPRIORITY(ARRKNIGHTY^GET(0));BEHCOLLIDE^RUN("ANNKNIGHT0");}
ANNKNIGHT0:ONFINISHED^SKOK={BEHNEXTMOVE^RUN(0);}
ANNKNIGHT0:ONFINISHED^ROZWALONY={BEHKILL^RUN(0);}

OBJECT=ANNKNIGHT1
ANNKNIGHT1:TYPE=ANIMO
ANNKNIGHT1:VISIBLE=TRUE
ANNKNIGHT1:FILENAME=TEMPLATE.ANN
ANNKNIGHT1:TOCANVAS=TRUE
ANNKNIGHT1:PRIORITY=2000
ANNKNIGHT1:FPS=16
ANNKNIGHT1:PRELOAD=TRUE
ANNKNIGHT1:RELEASE=TRUE
ANNKNIGHT1:MONITORCOLLISION=FALSE
ANNKNIGHT1:MONITORCOLLISIONALPHA=FALSE
ANNKNIGHT1:ONFRAMECHANGED^SKOK={ARRKNIGHTX^ADDAT(1,ARRKNIGHTDELTAX^GET(1));ARRKNIGHTY^ADDAT(1,ARRKNIGHTDELTAY^GET(1));VARDTEMP0^SET([VARIBKGOFFSETX-VARDLASTBKGX]);VARDTEMP1^SET([VARIBKGOFFSETY-VARDLASTBKGY]);VARDTEMP0^ADD(ARRKNIGHTX^GET(1));VARDTEMP0^SUB(2);VARDTEMP1^ADD(ARRKNIGHTY^GET(1));VARDTEMP1^SUB(60);ANNKNIGHT1^SETPOSITION(VARDTEMP0,VARDTEMP1);ANNKNIGHT1^SETPRIORITY(ARRKNIGHTY^GET(1));BEHCOLLIDE^RUN("ANNKNIGHT1");}
ANNKNIGHT1:ONFINISHED^SKOK={BEHNEXTMOVE^RUN(1);}
ANNKNIGHT1:ONFINISHED^ROZWALONY={BEHKILL^RUN(1);}

OBJECT=ANNKNIGHT2
ANNKNIGHT2:TYPE=ANIMO
ANNKNIGHT2:VISIBLE=TRUE
ANNKNIGHT2:FILENAME=TEMPLATE.ANN
ANNKNIGHT2:TOCANVAS=TRUE
ANNKNIGHT2:PRIORITY=2000
ANNKNIGHT2:FPS=16
ANNKNIGHT2:PRELOAD=TRUE
ANNKNIGHT2:RELEASE=TRUE
ANNKNIGHT2:MONITORCOLLISION=FALSE
ANNKNIGHT2:MONITORCOLLISIONALPHA=FALSE
ANNKNIGHT2:ONFRAMECHANGED^SKOK={ARRKNIGHTX^ADDAT(2,ARRKNIGHTDELTAX^GET(2));ARRKNIGHTY^ADDAT(2,ARRKNIGHTDELTAY^GET(2));VARDTEMP0^SET([VARIBKGOFFSETX-VARDLASTBKGX]);VARDTEMP1^SET([VARIBKGOFFSETY-VARDLASTBKGY]);VARDTEMP0^ADD(ARRKNIGHTX^GET(2));VARDTEMP0^SUB(2);VARDTEMP1^ADD(ARRKNIGHTY^GET(2));VARDTEMP1^SUB(60);ANNKNIGHT2^SETPOSITION(VARDTEMP0,VARDTEMP1);ANNKNIGHT2^SETPRIORITY(ARRKNIGHTY^GET(2));BEHCOLLIDE^RUN("ANNKNIGHT2");}
ANNKNIGHT2:ONFINISHED^SKOK={BEHNEXTMOVE^RUN(2);}
ANNKNIGHT2:ONFINISHED^ROZWALONY={BEHKILL^RUN(2);}

OBJECT=ANNKNIGHT3
ANNKNIGHT3:TYPE=ANIMO
ANNKNIGHT3:VISIBLE=TRUE
ANNKNIGHT3:FILENAME=TEMPLATE.ANN
ANNKNIGHT3:TOCANVAS=TRUE
ANNKNIGHT3:PRIORITY=2000
ANNKNIGHT3:FPS=16
ANNKNIGHT3:PRELOAD=TRUE
ANNKNIGHT3:RELEASE=TRUE
ANNKNIGHT3:MONITORCOLLISION=FALSE
ANNKNIGHT3:MONITORCOLLISIONALPHA=FALSE
ANNKNIGHT3:ONFRAMECHANGED^SKOK={ARRKNIGHTX^ADDAT(3,ARRKNIGHTDELTAX^GET(3));ARRKNIGHTY^ADDAT(3,ARRKNIGHTDELTAY^GET(3));VARDTEMP0^SET([VARIBKGOFFSETX-VARDLASTBKGX]);VARDTEMP1^SET([VARIBKGOFFSETY-VARDLASTBKGY]);VARDTEMP0^ADD(ARRKNIGHTX^GET(3));VARDTEMP0^SUB(2);VARDTEMP1^ADD(ARRKNIGHTY^GET(3));VARDTEMP1^SUB(60);ANNKNIGHT3^SETPOSITION(VARDTEMP0,VARDTEMP1);ANNKNIGHT3^SETPRIORITY(ARRKNIGHTY^GET(3));BEHCOLLIDE^RUN("ANNKNIGHT3");}
ANNKNIGHT3:ONFINISHED^SKOK={BEHNEXTMOVE^RUN(3);}
ANNKNIGHT3:ONFINISHED^ROZWALONY={BEHKILL^RUN(3);}

OBJECT=ANNKNIGHT4
ANNKNIGHT4:TYPE=ANIMO
ANNKNIGHT4:VISIBLE=TRUE
ANNKNIGHT4:FILENAME=TEMPLATE.ANN
ANNKNIGHT4:TOCANVAS=TRUE
ANNKNIGHT4:PRIORITY=2000
ANNKNIGHT4:FPS=16
ANNKNIGHT4:PRELOAD=TRUE
ANNKNIGHT4:RELEASE=TRUE
ANNKNIGHT4:MONITORCOLLISION=FALSE
ANNKNIGHT4:MONITORCOLLISIONALPHA=FALSE
ANNKNIGHT4:ONFRAMECHANGED^SKOK={ARRKNIGHTX^ADDAT(4,ARRKNIGHTDELTAX^GET(4));ARRKNIGHTY^ADDAT(4,ARRKNIGHTDELTAY^GET(4));VARDTEMP0^SET([VARIBKGOFFSETX-VARDLASTBKGX]);VARDTEMP1^SET([VARIBKGOFFSETY-VARDLASTBKGY]);VARDTEMP0^ADD(ARRKNIGHTX^GET(4));VARDTEMP0^SUB(2);VARDTEMP1^ADD(ARRKNIGHTY^GET(4));VARDTEMP1^SUB(60);ANNKNIGHT4^SETPOSITION(VARDTEMP0,VARDTEMP1);ANNKNIGHT4^SETPRIORITY(ARRKNIGHTY^GET(4));BEHCOLLIDE^RUN("ANNKNIGHT4");}
ANNKNIGHT4:ONFINISHED^SKOK={BEHNEXTMOVE^RUN(4);}
ANNKNIGHT4:ONFINISHED^ROZWALONY={BEHKILL^RUN(4);}

OBJECT=ANNKNIGHT5
ANNKNIGHT5:TYPE=ANIMO
ANNKNIGHT5:VISIBLE=TRUE
ANNKNIGHT5:FILENAME=TEMPLATE.ANN
ANNKNIGHT5:TOCANVAS=TRUE
ANNKNIGHT5:PRIORITY=2000
ANNKNIGHT5:FPS=16
ANNKNIGHT5:PRELOAD=TRUE
ANNKNIGHT5:RELEASE=TRUE
ANNKNIGHT5:MONITORCOLLISION=FALSE
ANNKNIGHT5:MONITORCOLLISIONALPHA=FALSE
ANNKNIGHT5:ONFRAMECHANGED^SKOK={ARRKNIGHTX^ADDAT(5,ARRKNIGHTDELTAX^GET(5));ARRKNIGHTY^ADDAT(5,ARRKNIGHTDELTAY^GET(5));VARDTEMP0^SET([VARIBKGOFFSETX-VARDLASTBKGX]);VARDTEMP1^SET([VARIBKGOFFSETY-VARDLASTBKGY]);VARDTEMP0^ADD(ARRKNIGHTX^GET(5));VARDTEMP0^SUB(2);VARDTEMP1^ADD(ARRKNIGHTY^GET(5));VARDTEMP1^SUB(60);ANNKNIGHT5^SETPOSITION(VARDTEMP0,VARDTEMP1);ANNKNIGHT5^SETPRIORITY(ARRKNIGHTY^GET(5));BEHCOLLIDE^RUN("ANNKNIGHT5");}
ANNKNIGHT5:ONFINISHED^SKOK={BEHNEXTMOVE^RUN(5);}
ANNKNIGHT5:ONFINISHED^ROZWALONY={BEHKILL^RUN(5);}

OBJECT=ANNKNIGHT6
ANNKNIGHT6:TYPE=ANIMO
ANNKNIGHT6:VISIBLE=TRUE
ANNKNIGHT6:FILENAME=TEMPLATE.ANN
ANNKNIGHT6:TOCANVAS=TRUE
ANNKNIGHT6:PRIORITY=2000
ANNKNIGHT6:FPS=16
ANNKNIGHT6:PRELOAD=TRUE
ANNKNIGHT6:RELEASE=TRUE
ANNKNIGHT6:MONITORCOLLISION=FALSE
ANNKNIGHT6:MONITORCOLLISIONALPHA=FALSE
ANNKNIGHT6:ONFRAMECHANGED^SKOK={ARRKNIGHTX^ADDAT(6,ARRKNIGHTDELTAX^GET(6));ARRKNIGHTY^ADDAT(6,ARRKNIGHTDELTAY^GET(6));VARDTEMP0^SET([VARIBKGOFFSETX-VARDLASTBKGX]);VARDTEMP1^SET([VARIBKGOFFSETY-VARDLASTBKGY]);VARDTEMP0^ADD(ARRKNIGHTX^GET(6));VARDTEMP0^SUB(2);VARDTEMP1^ADD(ARRKNIGHTY^GET(6));VARDTEMP1^SUB(60);ANNKNIGHT6^SETPOSITION(VARDTEMP0,VARDTEMP1);ANNKNIGHT6^SETPRIORITY(ARRKNIGHTY^GET(6));BEHCOLLIDE^RUN("ANNKNIGHT6");}
ANNKNIGHT6:ONFINISHED^SKOK={BEHNEXTMOVE^RUN(6);}
ANNKNIGHT6:ONFINISHED^ROZWALONY={BEHKILL^RUN(6);}

OBJECT=ANNKNIGHT7
ANNKNIGHT7:TYPE=ANIMO
ANNKNIGHT7:VISIBLE=TRUE
ANNKNIGHT7:FILENAME=TEMPLATE.ANN
ANNKNIGHT7:TOCANVAS=TRUE
ANNKNIGHT7:PRIORITY=2000
ANNKNIGHT7:FPS=16
ANNKNIGHT7:PRELOAD=TRUE
ANNKNIGHT7:RELEASE=TRUE
ANNKNIGHT7:MONITORCOLLISION=FALSE
ANNKNIGHT7:MONITORCOLLISIONALPHA=FALSE
ANNKNIGHT7:ONFRAMECHANGED^SKOK={ARRKNIGHTX^ADDAT(7,ARRKNIGHTDELTAX^GET(7));ARRKNIGHTY^ADDAT(7,ARRKNIGHTDELTAY^GET(7));VARDTEMP0^SET([VARIBKGOFFSETX-VARDLASTBKGX]);VARDTEMP1^SET([VARIBKGOFFSETY-VARDLASTBKGY]);VARDTEMP0^ADD(ARRKNIGHTX^GET(7));VARDTEMP0^SUB(2);VARDTEMP1^ADD(ARRKNIGHTY^GET(7));VARDTEMP1^SUB(60);ANNKNIGHT7^SETPOSITION(VARDTEMP0,VARDTEMP1);ANNKNIGHT7^SETPRIORITY(ARRKNIGHTY^GET(7));BEHCOLLIDE^RUN("ANNKNIGHT7");}
ANNKNIGHT7:ONFINISHED^SKOK={BEHNEXTMOVE^RUN(7);}
ANNKNIGHT7:ONFINISHED^ROZWALONY={BEHKILL^RUN(7);}

OBJECT=STL10
STL10:TYPE=ANIMO
STL10:VISIBLE=TRUE
STL10:FILENAME=$COMMON\STL10.ANN
STL10:TOCANVAS=TRUE
STL10:PRIORITY=0
STL10:FPS=16
STL10:PRELOAD=TRUE
STL10:RELEASE=TRUE
STL10:MONITORCOLLISION=FALSE
STL10:MONITORCOLLISIONALPHA=FALSE
STL10:ONFRAMECHANGED^ELAPSE={VARIRANDOM^INC();}

OBJECT=SNDCRASH
SNDCRASH:TYPE=SOUND
SNDCRASH:FILENAME=SND_CRASHP.WAV
SNDCRASH:PRELOAD=TRUE
SNDCRASH:FLUSHAFTERPLAYED=FALSE

OBJECT=ARRKNIGHTX
ARRKNIGHTX:TYPE=ARRAY

OBJECT=ARRKNIGHTY
ARRKNIGHTY:TYPE=ARRAY

OBJECT=ARRKNIGHTDELTAX
ARRKNIGHTDELTAX:TYPE=ARRAY

OBJECT=ARRKNIGHTDELTAY
ARRKNIGHTDELTAY:TYPE=ARRAY

OBJECT=ARRKNIGHTFRAME
ARRKNIGHTFRAME:TYPE=ARRAY

OBJECT=ARRFIELDS
ARRFIELDS:TYPE=ARRAY

OBJECT=ARRSTART
ARRSTART:TYPE=ARRAY

OBJECT=ARRLASTIDX
ARRLASTIDX:TYPE=ARRAY

OBJECT=ARRCROSS
ARRCROSS:TYPE=ARRAY

OBJECT=ARRRECENTFIELD
ARRRECENTFIELD:TYPE=ARRAY

OBJECT=ARRLASTCROSS
ARRLASTCROSS:TYPE=ARRAY

OBJECT=ARRDEAD
ARRDEAD:TYPE=ARRAY

OBJECT=ARRCROSSPOS
ARRCROSSPOS:TYPE=ARRAY

OBJECT=ARRJUNK
ARRJUNK:TYPE=ARRAY

OBJECT=BEHINITSCRIPT
BEHINITSCRIPT:TYPE=BEHAVIOUR
BEHINITSCRIPT:CODE={BEHLOADTEMPOBJ^RUN("DOMSPIEL");BEHSELECTTEMPOBJS^RUN("SPIELMAUSTER");@IF("STEMPOBJ|TYPE","_","0","BFITMP379","");@IF("G_SLASTOBJECTS'"LABIRYNT"&&G_ISUCCESS>0","BFITMP382","");BEHSELECTOBJ^RUN(24);@IF("SOBJECT|IPARAM0","_","0","BFITMP383","");@IF("G_SLASTOBJECTS","_",""DOMSPIEL"","BFITMP384","");ANNPOLA^LOAD("PIKLIBIA\POLA.ANN");ANNPOLA^SETPRIORITY(2000);@LOOP("{VARITER^SET(_I_);BEHSELECTOBJ^RUN(VARITER);ARRJUNK^ADD(SOBJECT|IPARAM2);VARSTEMP0^SET(["ANNKNIGHT"+VARITER]);VARSTEMP1^SET(["PIKLIBIA\RYCERZ"+VARITER+".ANN"]);*VARSTEMP0^LOAD(VARSTEMP1);*VARSTEMP0^SETPRIORITY(2000);BEHSELECTOBJ^RUN(VARITER);ARRSTART^ADD(SOBJECT|IPARAM1);}",0,8,1);ARRKNIGHTX^ADD(0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0);ARRKNIGHTY^ADD(0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0);ARRKNIGHTDELTAX^ADD(0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0);ARRKNIGHTDELTAY^ADD(0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0);ARRKNIGHTFRAME^ADD(0,0,0,0,0,0,0,0);ARRLASTIDX^ADD(0,0,0,0,0,0,0,0);ARRRECENTFIELD^ADD(0,0,0,0,0,0,0,0);ARRCROSS^ADD(0,0,0);ARRLASTCROSS^ADD("NULL","NULL");ARRDEAD^ADD(1,1,1,1,1,1,1,1);BEHMAKEFIELDS^RUN();@LOOP("{VARITER2^SET(_I_);BEHPLACEATFIELD^RUN(VARITER2,ARRSTART^GET(VARITER2));VARITER^SET([VARITER2+8]);BEHSELECTOBJ^RUN(VARITER);@IF("SOBJECT|IPARAM1","_","0","BFITMP387","BFITMP388");}",0,8,1);@LOOP("{VARITER^SET(_I_);BEHSELECTOBJ^RUN(VARITER);VARSTEMP0^SET(["ANNOBJECT"+VARITER]);*VARSTEMP0^SETPRIORITY(3);*VARSTEMP0^PLAY("STATE0");@LOOP("{BEHTOGGLECROSS^RUN(VARSTEMP0);VARSTEMP1^SET(*VARSTEMP0^GETEVENTNAME());}",0,SOBJECT|IPARAM0,1);}",0,24,1);@LOOP("{VARSTEMP0^SET(["ANNOBJECT"+_I_]);*VARSTEMP0^HIDE();}",32,8,1);VARSTEMP0^SET(BEHGETOBJECT^RUN("DO_MIOTLISKA"));*VARSTEMP0^SHOW();VARSTEMP0^SET(BEHGETOBJECT^RUN("DRZWI"));*VARSTEMP0^SHOW();}


OBJECT=BEHSPYMOVE
BEHSPYMOVE:TYPE=BEHAVIOUR
BEHSPYMOVE:CODE={BEHCHANGECROSS^RUN(WPATH^GETPOSITIONX(100),WPATH^GETPOSITIONY(100),0);BEHCHANGECROSS^RUN(WPATH^GETPOSITIONX(101),WPATH^GETPOSITIONY(101),1);}


OBJECT=BEHUSE
BEHUSE:TYPE=BEHAVIOUR
BEHUSE:CODE={BEHHIDECURRENTITEM^RUN();@IF("VARSITEMTO'"KLUCZ_PIKLIB_BUT"&&VARSITEMON'"DRZWI"","BFITMP389","");}


OBJECT=BEHNEXTMOVE
BEHNEXTMOVE:TYPE=BEHAVIOUR
BEHNEXTMOVE:CODE={VARITER^SET($1);VARSTEMP0^SET(["ANNKNIGHT"+VARITER]);VARSTEMP1^SET(["ARRFIELDS_"+ARRKNIGHTFRAME^GET(VARITER)]);VARIRECENTFIELD^SET(ARRKNIGHTFRAME^GET(VARITER));VARITEMP2^SET(*VARSTEMP1^GETSIZE());@IF("VARITEMP2'1||VARITEMP2'3","BFITMP391","BFITMP392");ARRRECENTFIELD^CHANGEAT(VARITER,VARIRECENTFIELD);ARRKNIGHTFRAME^CHANGEAT(VARITER,VARITEMP0);ANNPOLA^SETFRAME("PLAY",VARITEMP0);VARDTEMP1^SET(ANNPOLA^GETCURRFRAMEPOSX());VARDTEMP1^SUB(ARRKNIGHTX^GET(VARITER));VARDTEMP1^DIV(9.0);VARDTEMP2^SET(ANNPOLA^GETCURRFRAMEPOSY());VARDTEMP2^SUB(ARRKNIGHTY^GET(VARITER));VARDTEMP2^DIV(9.0);ARRKNIGHTDELTAX^CHANGEAT(VARITER,VARDTEMP1);ARRKNIGHTDELTAY^CHANGEAT(VARITER,VARDTEMP2);*VARSTEMP0^PLAY("SKOK");ANNPOLA^HIDE();}


OBJECT=BEHMAKEFIELDS
BEHMAKEFIELDS:TYPE=BEHAVIOUR
BEHMAKEFIELDS:CODE={VARITEMP0^SET(ANNPOLA^GETNOF());ARRFIELDS^CLONE(VARITEMP0);@LOOP("{VARITER^SET(_I_);ANNPOLA^SETFRAME("PLAY",_I_);VARSTEMP0^SET(["ARRFIELDS_"+_I_]);VARSTEMP1^SET(ANNPOLA^GETFRAMENAME());@LOOP("{@IF(VARSTEMP1^LENGTH(),">","0","BFITMP396","");}",0,4,1);}",0,VARITEMP0,1);}


OBJECT=BEHPLACEATFIELD
BEHPLACEATFIELD:TYPE=BEHAVIOUR
BEHPLACEATFIELD:CODE={VARITER^SET($1);VARITEMP0^SET($2);VARSTEMP0^SET(["ANNKNIGHT"+VARITER]);ARRRECENTFIELD^CHANGEAT(VARITER,VARITEMP0);ARRKNIGHTFRAME^CHANGEAT(VARITER,VARITEMP0);ANNPOLA^SETFRAME("PLAY",VARITEMP0);VARDTEMP1^SET(ANNPOLA^GETCURRFRAMEPOSX());VARDTEMP2^SET(ANNPOLA^GETCURRFRAMEPOSY());ARRKNIGHTDELTAX^CHANGEAT(VARITER,0.0);ARRKNIGHTDELTAY^CHANGEAT(VARITER,0.0);ARRKNIGHTX^CHANGEAT(VARITER,VARDTEMP1);ARRKNIGHTY^CHANGEAT(VARITER,VARDTEMP2);}


OBJECT=BEHCHANGECROSS
BEHCHANGECROSS:TYPE=BEHAVIOUR
BEHCHANGECROSS:CODE={VARITER2^SET($3);VARSTEMP0^SET(CANVASOBSERVER^GETGRAPHICSAT($1,$2,FALSE,3,3,TRUE));@IF(VARSTEMP0^FIND("ANNOBJECT"),">","-1","BFITMP398","BFITMP399");}


OBJECT=BEHCOLLIDE
BEHCOLLIDE:TYPE=BEHAVIOUR
BEHCOLLIDE:CODE={VARSTEMP1^SET($1);VARITEMP0^SET(*VARSTEMP1^GETPOSITIONX());VARITEMP1^SET(*VARSTEMP1^GETPOSITIONY());VARITEMP0^ADD(20);VARITEMP1^ADD(50);VARITEMP2^SET(*VARSTEMP1^GETPRIORITY());VARITEMP2^DEC();VARSTEMP0^SET(CANVASOBSERVER^GETGRAPHICSAT(VARITEMP0,VARITEMP1,FALSE,4,VARITEMP2,TRUE));@IF(VARSTEMP0^FIND("ANNOBJECT"),"_","-1","BFITMP404","");VARITEMP2^ADD(2);VARSTEMP0^SET(CANVASOBSERVER^GETGRAPHICSAT(VARITEMP0,VARITEMP1,FALSE,VARITEMP2,VARIMAXPRIORITY,TRUE));@IF(VARSTEMP0^FIND("ANNOBJECT"),"_","-1","BFITMP407","");}


OBJECT=BEHMOVEDEAD
BEHMOVEDEAD:TYPE=BEHAVIOUR
BEHMOVEDEAD:CODE={VARITER2^SET($1);VARDTEMP0^SET([VARIBKGOFFSETX-VARDLASTBKGX]);VARDTEMP1^SET([VARIBKGOFFSETY-VARDLASTBKGY]);VARDTEMP0^ADD(ARRKNIGHTX^GET(VARITER2));VARDTEMP0^SUB(2);VARDTEMP1^ADD(ARRKNIGHTY^GET(VARITER2));VARDTEMP1^SUB(60);VARSTEMP0^SET(["ANNKNIGHT"+VARITER2]);*VARSTEMP0^SETPOSITION(VARDTEMP0,VARDTEMP1);}


OBJECT=BEHPOSTMOVE
BEHPOSTMOVE:TYPE=BEHAVIOUR
BEHPOSTMOVE:CODE={@LOOP("{VARITER^SET(_I_);@IF(ARRDEAD^GET(VARITER),"_","1","BFITMP408","");}",0,8,1);}


OBJECT=BEHCLICK_LINA
BEHCLICK_LINA:TYPE=BEHAVIOUR
BEHCLICK_LINA:CODE={ANNOBJECT25^PLAY("STATE0");}


OBJECT=BEHTOGGLECROSS
BEHTOGGLECROSS:TYPE=BEHAVIOUR
BEHTOGGLECROSS:CODE={VARSTEMP0^SET($1);VARSTEMP2^SET(*VARSTEMP0^GETEVENTNAME());VARSTEMP2^SUB(0,5);VARITEMP2^SET(VARSTEMP2);VARITEMP2^INC();VARITEMP2^MOD(3);VARSTEMP2^SET(["STATE"+VARITEMP2]);*VARSTEMP0^SETFRAME("PLAY",0);VARITEMP1^SET(*VARSTEMP0^GETFRAMENAME());*VARSTEMP0^PLAY(VARSTEMP2);VARSTEMP1^SET(["ARRFIELDS_"+VARITEMP1]);ARRCROSS^CHANGEAT(0,*VARSTEMP1^GET(0));ARRCROSS^CHANGEAT(1,*VARSTEMP1^GET(1));ARRCROSS^CHANGEAT(2,*VARSTEMP1^GET(2));*VARSTEMP1^CHANGEAT(0,ARRCROSS^GET(1));*VARSTEMP1^CHANGEAT(1,ARRCROSS^GET(2));*VARSTEMP1^CHANGEAT(2,ARRCROSS^GET(0));}


OBJECT=BEHSAVEMAP
BEHSAVEMAP:TYPE=BEHAVIOUR
BEHSAVEMAP:CODE={@LOOP("{VARITER^SET(_I_);BEHSELECTOBJ^RUN(VARITER);VARSTEMP0^SET(["ANNOBJECT"+VARITER]);VARSTEMP1^SET(*VARSTEMP0^GETEVENTNAME());VARSTEMP1^SUB(0,5);VARITEMP0^SET(VARSTEMP1);SOBJECT|IPARAM0^SET(VARITEMP0);DBOBJECTS_CURSOR^SET("SOBJECT");}",0,24,1);DBOBJECTS^SAVE(VARSCURRARCADE);@LOOP("{VARITER^SET(_I_);BEHSELECTOBJ^RUN(VARITER);SOBJECT|IPARAM1^SET(ARRKNIGHTFRAME^GET(VARITER));DBOBJECTS_CURSOR^SET("SOBJECT");}",0,8,1);DBOBJECTS^SAVE(VARSCURRARCADE);}


OBJECT=BEHAUXCLICK
BEHAUXCLICK:TYPE=BEHAVIOUR
BEHAUXCLICK:CODE={@IF(VARSAUXCLICKED^FIND("ANNKNIGHT"),">","-1","BFITMP410","");VARSAUXCLICKED^SET("NULL");}


OBJECT=BEHAUXADDITEM
BEHAUXADDITEM:TYPE=BEHAVIOUR
BEHAUXADDITEM:CODE={VARSTEMP0^SET($1);@IF(DBITEMS^FIND("NAME",VARSTEMP0,0),">","-1","BFITMP411","");VARITEMP0^SET(DBITEMS^FIND("EMPTY",0,0));@IF("VARITEMP0","_","-1","BFITMP412","");SITEM|GUID^SET(VARITEMP0);SITEM|NAME^SET(VARSTEMP0);SITEM|PARENT^SET(-1);SITEM|BASE^SET(G_SARCADEOBJECTS);SITEM|EMPTY^SET(1);DBITEMS^SELECT(VARITEMP0);DBITEMS_CURSOR^SET("SITEM");DBITEMS^SAVE(VARSCURRITEMS);BEHLOADSEQARR^RUN("ZLOM");__LOAD_ITEMS__^RUN();}


OBJECT=BEHKILL
BEHKILL:TYPE=BEHAVIOUR
BEHKILL:CODE={VARITER2^SET($1);BEHSELECTOBJ^RUN(VARITER2);@IF("SOBJECT|IPARAM2","_","0","BFITMP413","BFITMP414");}


OBJECT=BEHCLICK_DO_MIOTLISKA
BEHCLICK_DO_MIOTLISKA:TYPE=BEHAVIOUR
BEHCLICK_DO_MIOTLISKA:CODE={BEHGOTO^RUN("PIKMIOT");}


OBJECT=BEHKRETIDLE
BEHKRETIDLE:TYPE=BEHAVIOUR
BEHKRETIDLE:CODE={@IF("VARIKRETKRASY","_","0","BFITMP415","BFITMP416");}


OBJECT=BEHCLICK_DRZWI
BEHCLICK_DRZWI:TYPE=BEHAVIOUR
BEHCLICK_DRZWI:CODE={BEHSELECTOBJS^RUN("DO_PODZIEMI");@IF("SOBJECT|IPARAM0","_","1","BFITMP419","BFITMP420");}


OBJECT=BEHCLICK_DO_PODZIEMI
BEHCLICK_DO_PODZIEMI:TYPE=BEHAVIOUR
BEHCLICK_DO_PODZIEMI:CODE={BEHSELECTOBJS^RUN("DO_PODZIEMI");@IF("SOBJECT|IPARAM0","_","1","BFITMP421","");}


OBJECT=BEHSEQFINISHED
BEHSEQFINISHED:TYPE=BEHAVIOUR
BEHSEQFINISHED:CODE={@IF("VARSSEQNAME","_",""DOMEK_A"","BFITMP422","");@IF("VARSSEQNAME","_",""KRASY"","BFITMP423","");}


OBJECT=BEHCLICK_DOMEK
BEHCLICK_DOMEK:TYPE=BEHAVIOUR
BEHCLICK_DOMEK:CODE={BEHSELECTTEMPOBJS^RUN("SPIELMAUSTER");@IF("STEMPOBJ|TYPE","_","0","BFITMP424","BFITMP425");}


OBJECT=BFITMP378
BFITMP378:TYPE=BEHAVIOUR
BFITMP378:CODE={BEHLOADSEQARR^RUN("PIKLIBIA_AUTO");}


OBJECT=BFITMP379
BFITMP379:TYPE=BEHAVIOUR
BFITMP379:CODE={STL10^PLAY("ELAPSE");}


OBJECT=BFITMP380
BFITMP380:TYPE=BEHAVIOUR
BFITMP380:CODE={BEHADDITEM^RUN("KARTA_BUT");}


OBJECT=BFITMP381
BFITMP381:TYPE=BEHAVIOUR
BFITMP381:CODE={SOBJECT|TYPE^SET(0);BEHUPDATEOBJECTS^RUN();G_MENU^ADDEXP(30);@IF(BEHFINDITEM^RUN("KARTA_BUT"),"_","-1","BFITMP380","");G_CARD^LOAD();BEHADDQUESTION^RUN(50);BEHADDQUESTION^RUN(55);BEHADDQUESTION^RUN(60);BEHADDQUESTION^RUN(65);BEHADDQUESTION^RUN(71);BEHADDQUESTION^RUN(75);BEHADDQUESTION^RUN(80);BEHADDQUESTION^RUN(29);}


OBJECT=BFITMP382
BFITMP382:TYPE=BEHAVIOUR
BFITMP382:CODE={BEHSELECTOBJS^RUN("DO_PODZIEMI");@IF("SOBJECT|TYPE","_","1","BFITMP381","");}


OBJECT=BFITMP383
BFITMP383:TYPE=BEHAVIOUR
BFITMP383:CODE={ANNOBJECT25^PLAY("STATE0");}


OBJECT=BFITMP384
BFITMP384:TYPE=BEHAVIOUR
BFITMP384:CODE={WPATH^SETPOSITION(100,710,144,0);WPATH^FINDPATH(100,VARIPATHID,614,155,0,TRUE,FALSE);VARIKRETSTARTX^SET(700);VARIKRETSTARTY^SET(144);VARIKRETGOX^SET(635);VARIKRETGOY^SET(136);}


OBJECT=BFITMP385
BFITMP385:TYPE=BEHAVIOUR
BFITMP385:CODE={*VARSTEMP3^SETFRAME("DEAD",0);*VARSTEMP3^SHOW();*VARSTEMP3^SETPRIORITY(10);ARRDEAD^CHANGEAT(VARITER2,1);}


OBJECT=BFITMP386
BFITMP386:TYPE=BEHAVIOUR
BFITMP386:CODE={*VARSTEMP3^HIDE();}


OBJECT=BFITMP387
BFITMP387:TYPE=BEHAVIOUR
BFITMP387:CODE={BEHNEXTMOVE^RUN(VARITER2);}


OBJECT=BFITMP388
BFITMP388:TYPE=BEHAVIOUR
BFITMP388:CODE={VARSTEMP3^SET(["ANNKNIGHT"+VARITER2]);@IF(ARRJUNK^GET(VARITER2),"_","0","BFITMP385","BFITMP386");}


OBJECT=BFITMP389
BFITMP389:TYPE=BEHAVIOUR
BFITMP389:CODE={BEHREMOVEITEM^RUN(VARSITEMTO);BEHSELECTOBJS^RUN("DO_PODZIEMI");SOBJECT|IPARAM0^SET(1);BEHUPDATEOBJECTS^RUN();BEHLOADSEQARREX^RUN("PIKLIBIA_LOCHYOPEN",FALSE);VARSTEMP0^SET(BEHGETOBJECT^RUN("DRZWI"));*VARSTEMP0^PLAY("OPEN");}


OBJECT=BFITMP390
BFITMP390:TYPE=BEHAVIOUR
BFITMP390:CODE={VARITEMP0^SET(VARITEMP1);}


OBJECT=BFITMP391
BFITMP391:TYPE=BEHAVIOUR
BFITMP391:CODE={VARITEMP0^SET(*VARSTEMP1^GET(0));}


OBJECT=BFITMP392
BFITMP392:TYPE=BEHAVIOUR
BFITMP392:CODE={VARITEMP0^SET(-1);@LOOP("{VARITEMP1^SET(*VARSTEMP1^GET(_I_));@IF(ARRRECENTFIELD^GET(VARITER),"!_","VARITEMP1","BFITMP390","");}",0,VARITEMP2,1);}


OBJECT=BFITMP393
BFITMP393:TYPE=BEHAVIOUR
BFITMP393:CODE={VARSTEMP2^SUB(VARITEMP1,[VARSTEMP2^LENGTH()-VARITEMP1]);VARSTEMP1^SUB(0,[VARITEMP1+1]);}


OBJECT=BFITMP394
BFITMP394:TYPE=BEHAVIOUR
BFITMP394:CODE={VARSTEMP1^SET("");}


OBJECT=BFITMP395
BFITMP395:TYPE=BEHAVIOUR
BFITMP395:CODE={*VARSTEMP0^ADD(VARITEMP2);}


OBJECT=BFITMP396
BFITMP396:TYPE=BEHAVIOUR
BFITMP396:CODE={VARITEMP1^SET(VARSTEMP1^FIND("-"));VARSTEMP2^SET(VARSTEMP1);@IF("VARITEMP1",">","-1","BFITMP393","BFITMP394");VARITEMP2^SET(VARSTEMP2);@IF("VARITEMP2","!_","VARITER","BFITMP395","");}


OBJECT=BFITMP397
BFITMP397:TYPE=BEHAVIOUR
BFITMP397:CODE={ARRLASTCROSS^CHANGEAT(VARITER2,VARSTEMP0);VARSTEMP2^SET(*VARSTEMP0^GETEVENTNAME());VARSTEMP2^SUB(0,5);VARITEMP2^SET(VARSTEMP2);VARITEMP2^INC();VARITEMP2^MOD(3);VARSTEMP2^SET(["STATE"+VARITEMP2]);*VARSTEMP0^SETFRAME("PLAY",0);VARITEMP1^SET(*VARSTEMP0^GETFRAMENAME());*VARSTEMP0^PLAY(VARSTEMP2);VARSTEMP1^SET(["ARRFIELDS_"+VARITEMP1]);ARRCROSS^CHANGEAT(0,*VARSTEMP1^GET(0));ARRCROSS^CHANGEAT(1,*VARSTEMP1^GET(1));ARRCROSS^CHANGEAT(2,*VARSTEMP1^GET(2));*VARSTEMP1^CHANGEAT(0,ARRCROSS^GET(1));*VARSTEMP1^CHANGEAT(1,ARRCROSS^GET(2));*VARSTEMP1^CHANGEAT(2,ARRCROSS^GET(0));}


OBJECT=BFITMP398
BFITMP398:TYPE=BEHAVIOUR
BFITMP398:CODE={@IF(ARRLASTCROSS^GET(VARITER2),"!_","VARSTEMP0","BFITMP397","");}


OBJECT=BFITMP399
BFITMP399:TYPE=BEHAVIOUR
BFITMP399:CODE={ARRLASTCROSS^CHANGEAT(VARITER2,"NULL");}


OBJECT=BFITMP400
BFITMP400:TYPE=BEHAVIOUR
BFITMP400:CODE={WPATH^SETPOSITION(101,101,550,0);WPATH^FINDPATH(101,VARIPATHID,111,550,0,FALSE);}


OBJECT=BFITMP401
BFITMP401:TYPE=BEHAVIOUR
BFITMP401:CODE={WPATH^SETPOSITION(100,51,550,0);WPATH^FINDPATH(100,VARIPATHID,61,550,0,FALSE);}


OBJECT=BFITMP402
BFITMP402:TYPE=BEHAVIOUR
BFITMP402:CODE={*VARSTEMP1^STOP(FALSE);*VARSTEMP1^PLAY("ROZWALONY");*VARSTEMP0^STOP(FALSE);*VARSTEMP0^PLAY("ROZWALONY");SNDCRASH^PLAY();BEHLOADSEQARR^RUN("PIKLIBIA_WOJWOJ");@BREAK();}


OBJECT=BFITMP403
BFITMP403:TYPE=BEHAVIOUR
BFITMP403:CODE={VARSTEMP2^SET(*VARSTEMP0^GETEVENTNAME());VARSTEMP3^SET(*VARSTEMP1^GETEVENTNAME());@IF("VARSTEMP2'"SKOK"&&VARSTEMP3'"SKOK"","BFITMP402","");}


OBJECT=BFITMP404
BFITMP404:TYPE=BEHAVIOUR
BFITMP404:CODE={@IF("VARSTEMP0","_",""ANNKRET"","BFITMP400","");@IF("VARSTEMP0","_",""ANNREX"","BFITMP401","");@IF(VARSTEMP0^FIND("ANNKNIGHT"),">","-1","BFITMP403","");}


OBJECT=BFITMP405
BFITMP405:TYPE=BEHAVIOUR
BFITMP405:CODE={WPATH^SETPOSITION(101,101,550,0);WPATH^FINDPATH(101,VARIPATHID,111,550,0,FALSE);BEHLOADSEQARR^RUN("PIKLIBIA_KOLBOH");}


OBJECT=BFITMP406
BFITMP406:TYPE=BEHAVIOUR
BFITMP406:CODE={WPATH^SETPOSITION(100,51,550,0);WPATH^FINDPATH(100,VARIPATHID,61,550,0,FALSE);BEHLOADSEQARR^RUN("PIKLIBIA_KOLBOH");}


OBJECT=BFITMP407
BFITMP407:TYPE=BEHAVIOUR
BFITMP407:CODE={@IF("VARSTEMP0","_",""ANNKRET"","BFITMP405","");@IF("VARSTEMP0","_",""ANNREX"","BFITMP406","");}


OBJECT=BFITMP408
BFITMP408:TYPE=BEHAVIOUR
BFITMP408:CODE={BEHMOVEDEAD^RUN(VARITER);}


OBJECT=BFITMP409
BFITMP409:TYPE=BEHAVIOUR
BFITMP409:CODE={VARSTEMP3^SET(VARSAUXCLICKED);VARSTEMP3^SUB(0,9);VARITEMP0^SET(VARSTEMP3);ARRDEAD^CHANGEAT(VARITEMP0,0);*VARSAUXCLICKED^HIDE();VARSTEMP2^SET(["ZLOM"+VARITEMP0+"_BUT"]);BEHSELECTOBJ^RUN(VARITEMP0);SOBJECT|IPARAM2^SET(1);DBOBJECTS_CURSOR^SET("SOBJECT");DBOBJECTS^SAVE(VARSCURRARCADE);BEHAUXADDITEM^RUN(VARSTEMP2);VARINUMZLOM^INC();}


OBJECT=BFITMP410
BFITMP410:TYPE=BEHAVIOUR
BFITMP410:CODE={@IF("*VARSAUXCLICKED^GETEVENTNAME()'"ROZWALONY"||*VARSAUXCLICKED^GETEVENTNAME()'"DEAD"","BFITMP409","");}


OBJECT=BFITMP411
BFITMP411:TYPE=BEHAVIOUR
BFITMP411:CODE={@BREAK();}


OBJECT=BFITMP412
BFITMP412:TYPE=BEHAVIOUR
BFITMP412:CODE={@BREAK();}


OBJECT=BFITMP413
BFITMP413:TYPE=BEHAVIOUR
BFITMP413:CODE={ARRDEAD^CHANGEAT(VARITER2,1);VARITER2^ADD(8);BEHSELECTOBJ^RUN(VARITER2);SOBJECT|IPARAM1^SET(1);DBOBJECTS_CURSOR^SET("SOBJECT");DBOBJECTS^SAVE(VARSCURRARCADE);}


OBJECT=BFITMP414
BFITMP414:TYPE=BEHAVIOUR
BFITMP414:CODE={VARSTEMP3^SET(["ANNKNIGHT"+VARITER2]);*VARSTEMP3^HIDE();}


OBJECT=BFITMP415
BFITMP415:TYPE=BEHAVIOUR
BFITMP415:CODE={BEHLOADSEQARR^RUN("KRASY");}


OBJECT=BFITMP416
BFITMP416:TYPE=BEHAVIOUR
BFITMP416:CODE={BEHTALKIDLE^RUN(1,"K_PIKILBIA_",1,8);}


OBJECT=BFITMP417
BFITMP417:TYPE=BEHAVIOUR
BFITMP417:CODE={*VARSTEMP0^PLAY("OPEN");}


OBJECT=BFITMP418
BFITMP418:TYPE=BEHAVIOUR
BFITMP418:CODE={*VARSTEMP0^PLAY("PLAY");}


OBJECT=BFITMP419
BFITMP419:TYPE=BEHAVIOUR
BFITMP419:CODE={VARSTEMP0^SET(BEHGETOBJECT^RUN("DRZWI"));VARSTEMP1^SET(*VARSTEMP0^GETEVENTNAME());@IF("VARSTEMP1","_",""PLAY"","BFITMP417","BFITMP418");}


OBJECT=BFITMP420
BFITMP420:TYPE=BEHAVIOUR
BFITMP420:CODE={BEHLOADSEQARR^RUN("PIKLIBIA_LOCHYCLOSED");}


OBJECT=BFITMP421
BFITMP421:TYPE=BEHAVIOUR
BFITMP421:CODE={G_SARCADEOBJECTS^SET("2");PRZYGODA^GOTO("LABIRYNT");}


OBJECT=BFITMP422
BFITMP422:TYPE=BEHAVIOUR
BFITMP422:CODE={BEHSAVEMAP^RUN();BEHGOTO^RUN("DOMSPIEL");}


OBJECT=BFITMP423
BFITMP423:TYPE=BEHAVIOUR
BFITMP423:CODE={VARIKRETKRASY^SET(1);}


OBJECT=BFITMP424
BFITMP424:TYPE=BEHAVIOUR
BFITMP424:CODE={BEHLOADSEQARREX^RUN("DOMEK_A",FALSE);}


OBJECT=BFITMP425
BFITMP425:TYPE=BEHAVIOUR
BFITMP425:CODE={BEHSAVEMAP^RUN();BEHGOTO^RUN("DOMSPIEL");@BREAK();}


