OBJECT=TIMERSEQ
TIMERSEQ:TYPE=TIMER
TIMERSEQ:ENABLED=TRUE
TIMERSEQ:ELAPSE=10000
TIMERSEQ:TICKS=0
TIMERSEQ:ONTICK={@IF(SEQMANDOLINA^ISPLAYING(),"_","FALSE","BFITMP8","");TIMERSEQ^SETELAPSE(RANDOM^GET(10000,5000));}

OBJECT=BEHINITLEVEL
BEHINITLEVEL:TYPE=BEHAVIOUR
BEHINITLEVEL:CODE={CANVASOBSERVER^SETBACKGROUND(["BKG"+VARLEVEL+".IMG"]);IMGEXIT^LOAD(["EXIT"+VARLEVEL+".IMG"]);IMGEXIT^HIDE();IMGNAKLADKA^LOAD(["NAKLADKA"+VARLEVEL+".IMG"]);ANNWODA^LOAD(["WODA"+VARLEVEL+".ANN"]);ANNWODA^SETFPS(8);IMGMASK^LOAD(["MASK"+VARLEVEL+".IMG"]);IMGMASK^HIDE();ANNLISCIESLOTY^LOAD(["LISC_SLOT"+VARLEVEL+".ANN"]);WORLD^LOAD(["LEVEL"+VARLEVEL+".SEK"]);WORLD^SETGRAVITY(0,0,0);ANNDRUZYNA^PLAY("PLAY");ANNDRUZYNA^SETANCHOR("CENTER");WORLD^ADDBODY(100,1,0.0,100.0,0.0,0.0,0,1,2,20,20,20);WORLD^SETLIMIT(100,0,0,0,800,600,0);WORLD^SETMAXSPEED(100,50);WORLD^LINK(100,"ANNDRUZYNA");@IF("VARLEVEL","_","0","BFITMP9","BFITMP10");VARINT0^SET(ANNLISCIESLOTY^GETNOE());ANNLISCIE^CLONE(VARINT0);ANNLISCIESLOTY^CLONE(VARINT0);ANNLISCIE^HIDE();ANNLISCIESLOTY^HIDE();CANVASOBSERVER^REMOVE("ANNLISCIE");CANVASOBSERVER^REMOVE("ANNLISCIESLOTY");@LOOP("{VARSTRING0^SET(["ANNLISCIE_"+[_I_+1]]);VARSTRING1^SET(["ANNLISCIESLOTY_"+[_I_+1]]);*VARSTRING0^SETANCHOR("CENTER");*VARSTRING1^SETANCHOR("CENTER");*VARSTRING1^PLAY(_I_);*VARSTRING1^HIDE();*VARSTRING0^SETPOSITION(*VARSTRING1^GETCENTERX(),*VARSTRING1^GETCENTERY());*VARSTRING0^PLAY("PAUSE");}",0,VARINT0,1);ANNWODA^PLAY("PLAY");VARFORCEX^SET(0);VARFORCEY^SET(0);VARPLAYERNAME^SET("ANNDRUZYNA");VARPLAYERID^SET(100);WORLD^START();ANNELAPSE^PLAY("ELAPSE");SEQMANDOLINA^PLAY("ENTRE0");}


OBJECT=BEHMOVEWORLD
BEHMOVEWORLD:TYPE=BEHAVIOUR
BEHMOVEWORLD:CODE={WORLD^MOVEOBJECTS();BEHMOVEPLAYER^RUN();}


OBJECT=BEHMOVEPLAYER
BEHMOVEPLAYER:TYPE=BEHAVIOUR
BEHMOVEPLAYER:CODE={VARINT0^SET(*VARPLAYERNAME^GETCENTERX());VARINT1^SET(*VARPLAYERNAME^GETCENTERY());VARDESTX^SET(MOUSE^GETPOSX());VARDESTY^SET(MOUSE^GETPOSY());VARINT0^SET([VARDESTX-VARINT0]);VARINT1^SET([VARDESTY-VARINT1]);VARINT3^LENGTH(VARINT0,VARINT1);VARCOLL^SET(CANVASOBSERVER^GETGRAPHICSAT(ANNDRUZYNA^GETCENTERX(),ANNDRUZYNA^GETCENTERY(),FALSE,300,300,FALSE));@IF("VARINT3","<","10","BFITMP11","BFITMP12");}


OBJECT=BFITMP8
BFITMP8:TYPE=BEHAVIOUR
BFITMP8:CODE={SEQLEVEL^PLAY("RANDOM");}


OBJECT=BFITMP9
BFITMP9:TYPE=BEHAVIOUR
BFITMP9:CODE={WORLD^SETPOSITION(100,50,550,0);}


OBJECT=BFITMP10
BFITMP10:TYPE=BEHAVIOUR
BFITMP10:CODE={WORLD^SETPOSITION(100,730,550,0);}


OBJECT=BFITMP11
BFITMP11:TYPE=BEHAVIOUR
BFITMP11:CODE={ANNDRUZYNA^STOP(FALSE);WORLD^SETVELOCITY(100,0,0,0);}


OBJECT=BFITMP12
BFITMP12:TYPE=BEHAVIOUR
BFITMP12:CODE={VARINT0^SET(VARDOUBLE0^ARCTANEX(VARINT1,VARINT0));VARFORCEX^COSINUS(VARINT0);VARFORCEY^SINUS(VARINT0);VARFORCEX^MUL(100);VARFORCEY^MUL(-100);WORLD^SETVELOCITY(100,VARFORCEX,VARFORCEY,0.0);FLTRROTATE^UNLINK("ANNDRUZYNA");FLTRROTATE^SETPROPERTY("ANGLE",VARINT0);FLTRROTATE^LINK("ANNDRUZYNA");}


