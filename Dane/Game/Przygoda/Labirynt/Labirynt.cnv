OBJECT=MUSIC
MUSIC:TYPE=MUSIC
MUSIC:FILENAME=PODZIEMIA.WAV

OBJECT=VARCLONE
VARCLONE:TYPE=INTEGER

OBJECT=VARPLAYERNAME
VARPLAYERNAME:TYPE=STRING

OBJECT=VARPLAYERELAPSE
VARPLAYERELAPSE:TYPE=STRING

OBJECT=VARPLAYERMASK
VARPLAYERMASK:TYPE=STRING

OBJECT=VARENEMYNR
VARENEMYNR:TYPE=INTEGER

OBJECT=VARENEMYNAME
VARENEMYNAME:TYPE=STRING

OBJECT=VARENEMYMASK
VARENEMYMASK:TYPE=STRING

OBJECT=VARENEMYFOV
VARENEMYFOV:TYPE=STRING

OBJECT=VARENEMYSTATE
VARENEMYSTATE:TYPE=STRING

OBJECT=VARENEMYELAPSE
VARENEMYELAPSE:TYPE=STRING

OBJECT=VARARRAYNAME
VARARRAYNAME:TYPE=STRING

OBJECT=VARMASKNAME
VARMASKNAME:TYPE=STRING

#PATCHED
#ADD A VARIABLE FOR STORING A FRAME NAME TEMPORARILY
OBJECT=VARFRAMENAME
VARFRAMENAME:TYPE=STRING

OBJECT=VAREVENTNAME
VAREVENTNAME:TYPE=STRING

OBJECT=VARPATHNAME
VARPATHNAME:TYPE=STRING

OBJECT=VARLASTMOVE
VARLASTMOVE:TYPE=STRING

OBJECT=VARSPELLNAME
VARSPELLNAME:TYPE=STRING

OBJECT=VARFOVNAME
VARFOVNAME:TYPE=STRING

OBJECT=VARSAVENAME
VARSAVENAME:TYPE=STRING

OBJECT=VARCURSE
VARCURSE:TYPE=STRING

OBJECT=VARPLAYERSPELLTYPE
VARPLAYERSPELLTYPE:TYPE=INTEGER
VARPLAYERSPELLTYPE:VALUE=-1

OBJECT=VARDIRECTION
VARDIRECTION:TYPE=STRING
VARDIRECTION:ONBRUTALCHANGED^UP={VARINT1^SUB(40);}
VARDIRECTION:ONBRUTALCHANGED^DOWN={VARINT1^ADD(40);}
VARDIRECTION:ONBRUTALCHANGED^LEFT={VARINT0^SUB(40);}
VARDIRECTION:ONBRUTALCHANGED^RIGHT={VARINT0^ADD(40);}
VARDIRECTION:ONBRUTALCHANGED^IDLE={VARINT1^SET(0);}

OBJECT=VARFROG
VARFROG:TYPE=STRING
VARFROG:ONBRUTALCHANGED^NORMAL={VARFROG^SET("");}

#PATCHED
#ADD A VARIABLE FOR STORING STRINGIFIED "THIS" PASSED AS A FUNCTION ARGUMENT
OBJECT=VARTHIS
VARTHIS:TYPE=STRING

#PATCHED
#ADD EVENT TRANSITION TABLE USED ON PLAYER DEACTIVATION
OBJECT=VARSUPPRESSIONEVENT
VARSUPPRESSIONEVENT:TYPE=STRING
VARSUPPRESSIONEVENT:ONBRUTALCHANGED^DOWN={THIS^SET("WAIT_DOWN");}
VARSUPPRESSIONEVENT:ONBRUTALCHANGED^LEFT={THIS^SET("WAIT_LEFT");}
VARSUPPRESSIONEVENT:ONBRUTALCHANGED^UP={THIS^SET("WAIT_UP");}
VARSUPPRESSIONEVENT:ONBRUTALCHANGED^RIGHT={THIS^SET("WAIT_RIGHT");}
VARSUPPRESSIONEVENT:ONBRUTALCHANGED^IDLE={THIS^SET("WAIT_DOWN");}
VARSUPPRESSIONEVENT:ONBRUTALCHANGED^IDLE_DOWN={THIS^SET("WAIT_DOWN");}
VARSUPPRESSIONEVENT:ONBRUTALCHANGED^IDLE_LEFT={THIS^SET("WAIT_LEFT");}
VARSUPPRESSIONEVENT:ONBRUTALCHANGED^IDLE_UP={THIS^SET("WAIT_UP");}
VARSUPPRESSIONEVENT:ONBRUTALCHANGED^IDLE_RIGHT={THIS^SET("WAIT_RIGHT");}
VARSUPPRESSIONEVENT:ONBRUTALCHANGED^IDLE_FROG={THIS^SET("WAIT_DOWN_FROG");}
VARSUPPRESSIONEVENT:ONBRUTALCHANGED^DOWN_FROG={THIS^SET("WAIT_DOWN_FROG");}
VARSUPPRESSIONEVENT:ONBRUTALCHANGED^LEFT_FROG={THIS^SET("WAIT_LEFT_FROG");}
VARSUPPRESSIONEVENT:ONBRUTALCHANGED^UP_FROG={THIS^SET("WAIT_UP_FROG");}
VARSUPPRESSIONEVENT:ONBRUTALCHANGED^RIGHT_FROG={THIS^SET("WAIT_RIGHT_FROG");}
VARSUPPRESSIONEVENT:ONBRUTALCHANGED^IDLE_DOWN_FROG={THIS^SET("WAIT_DOWN_FROG");}
VARSUPPRESSIONEVENT:ONBRUTALCHANGED^IDLE_LEFT_FROG={THIS^SET("WAIT_LEFT_FROG");}
VARSUPPRESSIONEVENT:ONBRUTALCHANGED^IDLE_UP_FROG={THIS^SET("WAIT_UP_FROG");}
VARSUPPRESSIONEVENT:ONBRUTALCHANGED^IDLE_RIGHT_FROG={THIS^SET("WAIT_RIGHT_FROG");}

#PATCHED
#ADD EVENT TRANSITION TABLE USED ON PLAYER ACTIVATION (MAIN CHARACTERS)
OBJECT=VARACTIVATIONEVENT
VARACTIVATIONEVENT:TYPE=STRING
VARACTIVATIONEVENT:ONBRUTALCHANGED^WAIT_DOWN={THIS^SET("IDLE_DOWN");}
VARACTIVATIONEVENT:ONBRUTALCHANGED^WAIT_LEFT={THIS^SET("IDLE_LEFT");}
VARACTIVATIONEVENT:ONBRUTALCHANGED^WAIT_UP={THIS^SET("IDLE_UP");}
VARACTIVATIONEVENT:ONBRUTALCHANGED^WAIT_RIGHT={THIS^SET("IDLE_RIGHT");}
VARACTIVATIONEVENT:ONBRUTALCHANGED^WAIT_DOWN_FROG={THIS^SET("IDLE_DOWN_FROG");}
VARACTIVATIONEVENT:ONBRUTALCHANGED^WAIT_LEFT_FROG={THIS^SET("IDLE_LEFT_FROG");}
VARACTIVATIONEVENT:ONBRUTALCHANGED^WAIT_UP_FROG={THIS^SET("IDLE_UP_FROG");}
VARACTIVATIONEVENT:ONBRUTALCHANGED^WAIT_RIGHT_FROG={THIS^SET("IDLE_RIGHT_FROG");}

#PATCHED
#ADD EVENT TRANSITION TABLE USED ON ALTERNATIVE PLAYER ACTIVATION (DWARFS)
OBJECT=VARACTIVATIONEVENTALT
VARACTIVATIONEVENTALT:TYPE=STRING
VARACTIVATIONEVENTALT:ONBRUTALCHANGED^WAIT_DOWN={THIS^SET("SELECTED_DOWN");}
VARACTIVATIONEVENTALT:ONBRUTALCHANGED^WAIT_LEFT={THIS^SET("SELECTED_LEFT");}
VARACTIVATIONEVENTALT:ONBRUTALCHANGED^WAIT_UP={THIS^SET("SELECTED_UP");}
VARACTIVATIONEVENTALT:ONBRUTALCHANGED^WAIT_RIGHT={THIS^SET("SELECTED_RIGHT");}
VARACTIVATIONEVENTALT:ONBRUTALCHANGED^WAIT_DOWN_FROG={THIS^SET("SELECTED_DOWN_FROG");}
VARACTIVATIONEVENTALT:ONBRUTALCHANGED^WAIT_LEFT_FROG={THIS^SET("SELECTED_LEFT_FROG");}
VARACTIVATIONEVENTALT:ONBRUTALCHANGED^WAIT_UP_FROG={THIS^SET("SELECTED_UP_FROG");}
VARACTIVATIONEVENTALT:ONBRUTALCHANGED^WAIT_RIGHT_FROG={THIS^SET("SELECTED_RIGHT_FROG");}

OBJECT=VARWALL
VARWALL:TYPE=STRING

OBJECT=VARINT0
VARINT0:TYPE=INTEGER

OBJECT=VARINT1
VARINT1:TYPE=INTEGER

OBJECT=VARINT2
VARINT2:TYPE=INTEGER

OBJECT=VARINT3
VARINT3:TYPE=INTEGER

OBJECT=VARINT5
VARINT5:TYPE=INTEGER

OBJECT=VARINT6
VARINT6:TYPE=INTEGER

OBJECT=VARSTRING0
VARSTRING0:TYPE=STRING

OBJECT=VARSTRING1
VARSTRING1:TYPE=STRING

OBJECT=VARSTRING2
VARSTRING2:TYPE=STRING

OBJECT=VARSTRING3
VARSTRING3:TYPE=STRING

OBJECT=VARSTRING4
VARSTRING4:TYPE=STRING

OBJECT=VARSTRING5
VARSTRING5:TYPE=STRING

OBJECT=VARSTRING6
VARSTRING6:TYPE=STRING

OBJECT=VARTEMP1
VARTEMP1:TYPE=STRING

OBJECT=VARTEMP2
VARTEMP2:TYPE=STRING

OBJECT=VARSPELLCOUNT
VARSPELLCOUNT:TYPE=INTEGER
VARSPELLCOUNT:VALUE=0

OBJECT=VARMOUSEPOSX
VARMOUSEPOSX:TYPE=INTEGER

OBJECT=VARMOUSEPOSY
VARMOUSEPOSY:TYPE=INTEGER

OBJECT=VARMOUSEDX
VARMOUSEDX:TYPE=INTEGER

OBJECT=VARMOUSEDY
VARMOUSEDY:TYPE=INTEGER

OBJECT=VARMOUSESPEED
VARMOUSESPEED:TYPE=INTEGER
VARMOUSESPEED:VALUE=1

OBJECT=VARREXZYCIA
VARREXZYCIA:TYPE=INTEGER
VARREXZYCIA:ONCHANGED^0={BEHRESTARTLEVEL^RUN();}

OBJECT=VARKRETZYCIA
VARKRETZYCIA:TYPE=INTEGER
VARKRETZYCIA:ONCHANGED^0={BEHRESTARTLEVEL^RUN();}

OBJECT=VARLEVEL
VARLEVEL:TYPE=INTEGER

OBJECT=VARPLAYERCHANGED
VARPLAYERCHANGED:TYPE=INTEGER
VARPLAYERCHANGED:VALUE=0

OBJECT=ANNPLAYER0
ANNPLAYER0:TYPE=ANIMO
ANNPLAYER0:VISIBLE=FALSE
ANNPLAYER0:FILENAME=PLAYER0.ANN
ANNPLAYER0:TOCANVAS=TRUE
ANNPLAYER0:PRIORITY=300
ANNPLAYER0:FPS=30
ANNPLAYER0:PRELOAD=TRUE
ANNPLAYER0:RELEASE=TRUE
ANNPLAYER0:MONITORCOLLISION=FALSE
ANNPLAYER0:MONITORCOLLISIONALPHA=FALSE
ANNPLAYER0:ONFINISHED={VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();VARSTRING1^SET(THIS^GETNAME());VARSTRING2^SET(THIS^GETEVENTNAME());@IF("VARPLAYERNAME","_","VARSTRING1","BFITMP2","BFITMP3");}
ANNPLAYER0:ONFRAMECHANGED^UP={THIS^MOVE(0,-5);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER0:ONFRAMECHANGED^DOWN={THIS^MOVE(0,5);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER0:ONFRAMECHANGED^LEFT={THIS^MOVE(-5,0);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER0:ONFRAMECHANGED^RIGHT={THIS^MOVE(5,0);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER0:ONFRAMECHANGED^UP_FROG={THIS^MOVE(0,-5);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER0:ONFRAMECHANGED^DOWN_FROG={THIS^MOVE(0,5);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER0:ONFRAMECHANGED^LEFT_FROG={THIS^MOVE(-5,0);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER0:ONFRAMECHANGED^RIGHT_FROG={THIS^MOVE(5,0);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER0:ONFRAMECHANGED^LADDER_UP={THIS^MOVE(0,-5);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER0:ONFRAMECHANGED^LADDER_DOWN={THIS^MOVE(0,5);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER0:ONFINISHED^WAIT={THIS^PLAY("WAIT");VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER0:ONFINISHED^PRISONER={THIS^PLAY("PRISONER");}

OBJECT=ANNPLAYER1
ANNPLAYER1:TYPE=ANIMO
ANNPLAYER1:VISIBLE=FALSE
ANNPLAYER1:FILENAME=PLAYER1.ANN
ANNPLAYER1:TOCANVAS=TRUE
ANNPLAYER1:PRIORITY=300
ANNPLAYER1:FPS=30
ANNPLAYER1:PRELOAD=TRUE
ANNPLAYER1:RELEASE=TRUE
ANNPLAYER1:MONITORCOLLISION=FALSE
ANNPLAYER1:MONITORCOLLISIONALPHA=FALSE
ANNPLAYER1:ONFINISHED={VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();VARSTRING1^SET(THIS^GETNAME());VARSTRING2^SET(THIS^GETEVENTNAME());@IF("VARPLAYERNAME","_","VARSTRING1","BFITMP6","BFITMP7");}
ANNPLAYER1:ONFRAMECHANGED^UP={THIS^MOVE(0,-5);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER1:ONFRAMECHANGED^DOWN={THIS^MOVE(0,5);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER1:ONFRAMECHANGED^LEFT={THIS^MOVE(-5,0);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER1:ONFRAMECHANGED^RIGHT={THIS^MOVE(5,0);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER1:ONFRAMECHANGED^UP_FROG={THIS^MOVE(0,-5);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER1:ONFRAMECHANGED^DOWN_FROG={THIS^MOVE(0,5);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER1:ONFRAMECHANGED^LEFT_FROG={THIS^MOVE(-5,0);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER1:ONFRAMECHANGED^RIGHT_FROG={THIS^MOVE(5,0);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER1:ONFRAMECHANGED^LADDER_UP={THIS^MOVE(0,-5);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER1:ONFRAMECHANGED^LADDER_DOWN={THIS^MOVE(0,5);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER1:ONFINISHED^WAIT={THIS^PLAY("WAIT");VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER1:ONFINISHED^PRISONER={THIS^PLAY("PRISONER");}

OBJECT=ANNPLAYERMASK
ANNPLAYERMASK:TYPE=ANIMO
ANNPLAYERMASK:VISIBLE=TRUE
ANNPLAYERMASK:FILENAME=PLAYER_MASK.ANN
ANNPLAYERMASK:TOCANVAS=TRUE
ANNPLAYERMASK:PRIORITY=130
ANNPLAYERMASK:FPS=16
ANNPLAYERMASK:PRELOAD=TRUE
ANNPLAYERMASK:RELEASE=TRUE
ANNPLAYERMASK:MONITORCOLLISION=FALSE
ANNPLAYERMASK:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNPLAYERFIELD
ANNPLAYERFIELD:TYPE=ANIMO
ANNPLAYERFIELD:VISIBLE=TRUE
ANNPLAYERFIELD:FILENAME=PLAYER_FIELD.ANN
ANNPLAYERFIELD:TOCANVAS=TRUE
ANNPLAYERFIELD:PRIORITY=200
ANNPLAYERFIELD:FPS=16
ANNPLAYERFIELD:PRELOAD=TRUE
ANNPLAYERFIELD:RELEASE=TRUE
ANNPLAYERFIELD:MONITORCOLLISION=FALSE
ANNPLAYERFIELD:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNPLAYERELAPSE
ANNPLAYERELAPSE:TYPE=ANIMO
ANNPLAYERELAPSE:VISIBLE=TRUE
ANNPLAYERELAPSE:FILENAME=PLAYER_ELAPSE.ANN
ANNPLAYERELAPSE:TOCANVAS=TRUE
ANNPLAYERELAPSE:PRIORITY=200
ANNPLAYERELAPSE:FPS=16
ANNPLAYERELAPSE:PRELOAD=TRUE
ANNPLAYERELAPSE:RELEASE=TRUE
ANNPLAYERELAPSE:MONITORCOLLISION=FALSE
ANNPLAYERELAPSE:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNPLAYERDARKELAPSE
ANNPLAYERDARKELAPSE:TYPE=ANIMO
ANNPLAYERDARKELAPSE:VISIBLE=TRUE
ANNPLAYERDARKELAPSE:FILENAME=PLAYER_DELAPSE.ANN
ANNPLAYERDARKELAPSE:TOCANVAS=TRUE
ANNPLAYERDARKELAPSE:PRIORITY=200
ANNPLAYERDARKELAPSE:FPS=16
ANNPLAYERDARKELAPSE:PRELOAD=TRUE
ANNPLAYERDARKELAPSE:RELEASE=TRUE
ANNPLAYERDARKELAPSE:MONITORCOLLISION=FALSE
ANNPLAYERDARKELAPSE:MONITORCOLLISIONALPHA=FALSE
ANNPLAYERDARKELAPSE:ONFRAMECHANGED^PLAY={VARINT0^SET(THIS^GETCLONEINDEX());VARSTRING0^SET(["ANNPLAYER"+[VARINT0-1]]);@IF("VARSTRING0","_","VARPLAYERNAME","BFITMP8","");}
ANNPLAYERDARKELAPSE:ONFINISHED^PLAY={VARINT0^SET(THIS^GETCLONEINDEX());VARSTRING0^SET(["ANNPLAYER"+[VARINT0-1]]);@IF("VARSTRING0","_","VARPLAYERNAME","BFITMP9","");}

OBJECT=ANNPLAYER2
ANNPLAYER2:TYPE=ANIMO
ANNPLAYER2:VISIBLE=FALSE
ANNPLAYER2:FILENAME=PLAYER2.ANN
ANNPLAYER2:TOCANVAS=TRUE
ANNPLAYER2:PRIORITY=300
ANNPLAYER2:FPS=30
ANNPLAYER2:PRELOAD=TRUE
ANNPLAYER2:RELEASE=TRUE
ANNPLAYER2:MONITORCOLLISION=FALSE
ANNPLAYER2:MONITORCOLLISIONALPHA=FALSE
ANNPLAYER2:ONFINISHED={VARSTRING1^SET(THIS^GETNAME());@IF("VARPLAYERNAME","_","VARSTRING1","BFITMP10","BFITMP11");}
ANNPLAYER2:ONFRAMECHANGED^UP={THIS^MOVE(0,-5);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER2:ONFRAMECHANGED^DOWN={THIS^MOVE(0,5);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER2:ONFRAMECHANGED^LEFT={THIS^MOVE(-5,0);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER2:ONFRAMECHANGED^RIGHT={THIS^MOVE(5,0);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER2:ONFINISHED^WAIT={THIS^PLAY("WAIT");VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER2:ONFINISHED^PRISONER={THIS^PLAY("PRISONER");ANNPLAYERFIELD_3^SETPOSITION(THIS^GETCENTERX(),THIS^GETCENTERY());ANNPLAYERFIELD_3^PLAY("IDLE");ANNPLAYERFIELD_3^HIDE();}

OBJECT=ANNPLAYER3
ANNPLAYER3:TYPE=ANIMO
ANNPLAYER3:VISIBLE=FALSE
ANNPLAYER3:FILENAME=PLAYER3.ANN
ANNPLAYER3:TOCANVAS=TRUE
ANNPLAYER3:PRIORITY=300
ANNPLAYER3:FPS=30
ANNPLAYER3:PRELOAD=TRUE
ANNPLAYER3:RELEASE=TRUE
ANNPLAYER3:MONITORCOLLISION=FALSE
ANNPLAYER3:MONITORCOLLISIONALPHA=FALSE
ANNPLAYER3:ONFINISHED={VARSTRING1^SET(THIS^GETNAME());@IF("VARPLAYERNAME","_","VARSTRING1","BFITMP12","BFITMP13");}
ANNPLAYER3:ONFRAMECHANGED^UP={THIS^MOVE(0,-5);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER3:ONFRAMECHANGED^DOWN={THIS^MOVE(0,5);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER3:ONFRAMECHANGED^LEFT={THIS^MOVE(-5,0);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER3:ONFRAMECHANGED^RIGHT={THIS^MOVE(5,0);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER3:ONFINISHED^WAIT={THIS^PLAY("WAIT");VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER3:ONFINISHED^PRISONER={THIS^PLAY("PRISONER");ANNPLAYERFIELD_4^SETPOSITION(THIS^GETCENTERX(),THIS^GETCENTERY());ANNPLAYERFIELD_4^PLAY("IDLE");ANNPLAYERFIELD_4^HIDE();}

OBJECT=ANNPLAYER4
ANNPLAYER4:TYPE=ANIMO
ANNPLAYER4:VISIBLE=FALSE
ANNPLAYER4:FILENAME=PLAYER4.ANN
ANNPLAYER4:TOCANVAS=TRUE
ANNPLAYER4:PRIORITY=300
ANNPLAYER4:FPS=30
ANNPLAYER4:PRELOAD=TRUE
ANNPLAYER4:RELEASE=TRUE
ANNPLAYER4:MONITORCOLLISION=FALSE
ANNPLAYER4:MONITORCOLLISIONALPHA=FALSE
ANNPLAYER4:ONFINISHED={VARSTRING1^SET(THIS^GETNAME());@IF("VARPLAYERNAME","_","VARSTRING1","BFITMP14","BFITMP15");}
ANNPLAYER4:ONFRAMECHANGED^UP={THIS^MOVE(0,-5);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER4:ONFRAMECHANGED^DOWN={THIS^MOVE(0,5);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER4:ONFRAMECHANGED^LEFT={THIS^MOVE(-5,0);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER4:ONFRAMECHANGED^RIGHT={THIS^MOVE(5,0);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER4:ONFINISHED^WAIT={THIS^PLAY("WAIT");VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER4:ONFINISHED^PRISONER={THIS^PLAY("PRISONER");ANNPLAYERFIELD_5^SETPOSITION(THIS^GETCENTERX(),THIS^GETCENTERY());ANNPLAYERFIELD_5^PLAY("IDLE");ANNPLAYERFIELD_5^HIDE();}

OBJECT=ANNPLAYER5
ANNPLAYER5:TYPE=ANIMO
ANNPLAYER5:VISIBLE=FALSE
ANNPLAYER5:FILENAME=PLAYER5.ANN
ANNPLAYER5:TOCANVAS=TRUE
ANNPLAYER5:PRIORITY=300
ANNPLAYER5:FPS=30
ANNPLAYER5:PRELOAD=TRUE
ANNPLAYER5:RELEASE=TRUE
ANNPLAYER5:MONITORCOLLISION=FALSE
ANNPLAYER5:MONITORCOLLISIONALPHA=FALSE
ANNPLAYER5:ONFINISHED={VARSTRING1^SET(THIS^GETNAME());@IF("VARPLAYERNAME","_","VARSTRING1","BFITMP16","BFITMP17");}
ANNPLAYER5:ONFRAMECHANGED^UP={THIS^MOVE(0,-5);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER5:ONFRAMECHANGED^DOWN={THIS^MOVE(0,5);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER5:ONFRAMECHANGED^LEFT={THIS^MOVE(-5,0);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER5:ONFRAMECHANGED^RIGHT={THIS^MOVE(5,0);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER5:ONFINISHED^WAIT={THIS^PLAY("WAIT");VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER5:ONFINISHED^PRISONER={THIS^PLAY("PRISONER");ANNPLAYERFIELD_6^SETPOSITION(THIS^GETCENTERX(),THIS^GETCENTERY());ANNPLAYERFIELD_6^PLAY("IDLE");ANNPLAYERFIELD_6^HIDE();}

OBJECT=ANNPLAYER6
ANNPLAYER6:TYPE=ANIMO
ANNPLAYER6:VISIBLE=FALSE
ANNPLAYER6:FILENAME=PLAYER6.ANN
ANNPLAYER6:TOCANVAS=TRUE
ANNPLAYER6:PRIORITY=300
ANNPLAYER6:FPS=30
ANNPLAYER6:PRELOAD=TRUE
ANNPLAYER6:RELEASE=TRUE
ANNPLAYER6:MONITORCOLLISION=FALSE
ANNPLAYER6:MONITORCOLLISIONALPHA=FALSE
ANNPLAYER6:ONFINISHED={VARSTRING1^SET(THIS^GETNAME());@IF("VARPLAYERNAME","_","VARSTRING1","BFITMP18","BFITMP19");}
ANNPLAYER6:ONFRAMECHANGED^UP={THIS^MOVE(0,-5);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER6:ONFRAMECHANGED^DOWN={THIS^MOVE(0,5);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER6:ONFRAMECHANGED^LEFT={THIS^MOVE(-5,0);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER6:ONFRAMECHANGED^RIGHT={THIS^MOVE(5,0);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER6:ONFINISHED^WAIT={THIS^PLAY("WAIT");VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER6:ONFINISHED^PRISONER={THIS^PLAY("PRISONER");ANNPLAYERFIELD_7^SETPOSITION(THIS^GETCENTERX(),THIS^GETCENTERY());ANNPLAYERFIELD_7^PLAY("IDLE");ANNPLAYERFIELD_7^HIDE();}

#PATCHED
#PERFORM TINY VISUAL CHANGES (ADD QUOTATION MARKS FOR NOTEPAD SYNTAX COLORING NOT TO GO MAD)
OBJECT=ANNPLAYER7
ANNPLAYER7:TYPE=ANIMO
ANNPLAYER7:VISIBLE=FALSE
ANNPLAYER7:FILENAME=PLAYER7.ANN
ANNPLAYER7:TOCANVAS=TRUE
ANNPLAYER7:PRIORITY=300
ANNPLAYER7:FPS=30
ANNPLAYER7:PRELOAD=TRUE
ANNPLAYER7:RELEASE=TRUE
ANNPLAYER7:MONITORCOLLISION=FALSE
ANNPLAYER7:MONITORCOLLISIONALPHA=FALSE
ANNPLAYER7:ONFINISHED={VARSTRING1^SET(THIS^GETNAME());@IF("VARPLAYERNAME","_","VARSTRING1","BFITMP20","BFITMP21");}
ANNPLAYER7:ONFRAMECHANGED^UP={THIS^MOVE(0,-5);VARSTRING0^SET("ANNPLAYER7");BEHPLAYERCOLL^RUN();}
ANNPLAYER7:ONFRAMECHANGED^DOWN={THIS^MOVE(0,5);VARSTRING0^SET("ANNPLAYER7");BEHPLAYERCOLL^RUN();}
ANNPLAYER7:ONFRAMECHANGED^LEFT={THIS^MOVE(-5,0);VARSTRING0^SET("ANNPLAYER7");BEHPLAYERCOLL^RUN();}
ANNPLAYER7:ONFRAMECHANGED^RIGHT={THIS^MOVE(5,0);VARSTRING0^SET("ANNPLAYER7");BEHPLAYERCOLL^RUN();}
ANNPLAYER7:ONFINISHED^WAIT={THIS^PLAY("WAIT");VARSTRING0^SET("ANNPLAYER7");BEHPLAYERCOLL^RUN();}
ANNPLAYER7:ONFINISHED^PRISONER={THIS^PLAY("PRISONER");ANNPLAYERFIELD_8^SETPOSITION(THIS^GETCENTERX(),THIS^GETCENTERY());ANNPLAYERFIELD_8^PLAY("IDLE");ANNPLAYERFIELD_8^HIDE();}

OBJECT=ANNPLAYER8
ANNPLAYER8:TYPE=ANIMO
ANNPLAYER8:VISIBLE=FALSE
ANNPLAYER8:FILENAME=PLAYER8.ANN
ANNPLAYER8:TOCANVAS=TRUE
ANNPLAYER8:PRIORITY=300
ANNPLAYER8:FPS=30
ANNPLAYER8:PRELOAD=TRUE
ANNPLAYER8:RELEASE=TRUE
ANNPLAYER8:MONITORCOLLISION=FALSE
ANNPLAYER8:MONITORCOLLISIONALPHA=FALSE
ANNPLAYER8:ONFINISHED={VARSTRING1^SET(THIS^GETNAME());@IF("VARPLAYERNAME","_","VARSTRING1","BFITMP22","BFITMP23");}
ANNPLAYER8:ONFRAMECHANGED^UP={THIS^MOVE(0,-5);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER8:ONFRAMECHANGED^DOWN={THIS^MOVE(0,5);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER8:ONFRAMECHANGED^LEFT={THIS^MOVE(-5,0);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER8:ONFRAMECHANGED^RIGHT={THIS^MOVE(5,0);VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER8:ONFINISHED^WAIT={THIS^PLAY("WAIT");VARSTRING0^SET(THIS^GETNAME());BEHPLAYERCOLL^RUN();}
ANNPLAYER8:ONFINISHED^PRISONER={THIS^PLAY("PRISONER");ANNPLAYERFIELD_9^SETPOSITION(THIS^GETCENTERX(),THIS^GETCENTERY());ANNPLAYERFIELD_9^PLAY("IDLE");ANNPLAYERFIELD_9^HIDE();}

OBJECT=ANNENEMY0
ANNENEMY0:TYPE=ANIMO
ANNENEMY0:VISIBLE=FALSE
ANNENEMY0:FILENAME=BLANK.ANN
ANNENEMY0:TOCANVAS=FALSE
ANNENEMY0:PRIORITY=300
ANNENEMY0:FPS=16
ANNENEMY0:PRELOAD=TRUE
ANNENEMY0:RELEASE=TRUE
ANNENEMY0:MONITORCOLLISION=FALSE
ANNENEMY0:MONITORCOLLISIONALPHA=FALSE
ANNENEMY0:ONFRAMECHANGED^UP={THIS^MOVE(0,-5);BEHENEMYCURSE^RUN(THIS^GETNAME());}
ANNENEMY0:ONFRAMECHANGED^DOWN={THIS^MOVE(0,5);BEHENEMYCURSE^RUN(THIS^GETNAME());}
ANNENEMY0:ONFRAMECHANGED^LEFT={THIS^MOVE(-5,0);BEHENEMYCURSE^RUN(THIS^GETNAME());}
ANNENEMY0:ONFRAMECHANGED^RIGHT={THIS^MOVE(5,0);BEHENEMYCURSE^RUN(THIS^GETNAME());}
ANNENEMY0:ONFRAMECHANGED^UP_FROG={THIS^MOVE(0,-5);BEHENEMYCURSE^RUN(THIS^GETNAME());}
ANNENEMY0:ONFRAMECHANGED^DOWN_FROG={THIS^MOVE(0,5);BEHENEMYCURSE^RUN(THIS^GETNAME());}
ANNENEMY0:ONFRAMECHANGED^LEFT_FROG={THIS^MOVE(-5,0);BEHENEMYCURSE^RUN(THIS^GETNAME());}
ANNENEMY0:ONFRAMECHANGED^RIGHT_FROG={THIS^MOVE(5,0);BEHENEMYCURSE^RUN(THIS^GETNAME());}

OBJECT=ANNENEMY1
ANNENEMY1:TYPE=ANIMO
ANNENEMY1:VISIBLE=TRUE
ANNENEMY1:FILENAME=BLANK.ANN
ANNENEMY1:TOCANVAS=FALSE
ANNENEMY1:PRIORITY=300
ANNENEMY1:FPS=16
ANNENEMY1:PRELOAD=TRUE
ANNENEMY1:RELEASE=TRUE
ANNENEMY1:MONITORCOLLISION=FALSE
ANNENEMY1:MONITORCOLLISIONALPHA=FALSE
ANNENEMY1:ONFRAMECHANGED^UP={THIS^MOVE(0,-5);BEHENEMYCURSE^RUN(THIS^GETNAME());}
ANNENEMY1:ONFRAMECHANGED^DOWN={THIS^MOVE(0,5);BEHENEMYCURSE^RUN(THIS^GETNAME());}
ANNENEMY1:ONFRAMECHANGED^LEFT={THIS^MOVE(-5,0);BEHENEMYCURSE^RUN(THIS^GETNAME());}
ANNENEMY1:ONFRAMECHANGED^RIGHT={THIS^MOVE(5,0);BEHENEMYCURSE^RUN(THIS^GETNAME());}
ANNENEMY1:ONFRAMECHANGED^UP_FROG={THIS^MOVE(0,-5);BEHENEMYCURSE^RUN(THIS^GETNAME());}
ANNENEMY1:ONFRAMECHANGED^DOWN_FROG={THIS^MOVE(0,5);BEHENEMYCURSE^RUN(THIS^GETNAME());}
ANNENEMY1:ONFRAMECHANGED^LEFT_FROG={THIS^MOVE(-5,0);BEHENEMYCURSE^RUN(THIS^GETNAME());}
ANNENEMY1:ONFRAMECHANGED^RIGHT_FROG={THIS^MOVE(5,0);BEHENEMYCURSE^RUN(THIS^GETNAME());}

OBJECT=ANNENEMY0MASK
ANNENEMY0MASK:TYPE=ANIMO
ANNENEMY0MASK:VISIBLE=TRUE
ANNENEMY0MASK:FILENAME=BLANK0.ANN
ANNENEMY0MASK:TOCANVAS=TRUE
ANNENEMY0MASK:PRIORITY=130
ANNENEMY0MASK:FPS=16
ANNENEMY0MASK:PRELOAD=TRUE
ANNENEMY0MASK:RELEASE=TRUE
ANNENEMY0MASK:MONITORCOLLISION=FALSE
ANNENEMY0MASK:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNENEMY0MMASK
ANNENEMY0MMASK:TYPE=ANIMO
ANNENEMY0MMASK:VISIBLE=TRUE
ANNENEMY0MMASK:FILENAME=BLANK6.ANN
ANNENEMY0MMASK:TOCANVAS=FALSE
ANNENEMY0MMASK:PRIORITY=199
ANNENEMY0MMASK:FPS=16
ANNENEMY0MMASK:PRELOAD=TRUE
ANNENEMY0MMASK:RELEASE=TRUE
ANNENEMY0MMASK:MONITORCOLLISION=FALSE
ANNENEMY0MMASK:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNENEMY0PATH
ANNENEMY0PATH:TYPE=ANIMO
ANNENEMY0PATH:VISIBLE=TRUE
ANNENEMY0PATH:FILENAME=BLANK1.ANN
ANNENEMY0PATH:TOCANVAS=TRUE
ANNENEMY0PATH:PRIORITY=100
ANNENEMY0PATH:FPS=16
ANNENEMY0PATH:PRELOAD=TRUE
ANNENEMY0PATH:RELEASE=TRUE
ANNENEMY0PATH:MONITORCOLLISION=FALSE
ANNENEMY0PATH:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNENEMY0FIELD
ANNENEMY0FIELD:TYPE=ANIMO
ANNENEMY0FIELD:VISIBLE=TRUE
ANNENEMY0FIELD:FILENAME=BLANK2.ANN
ANNENEMY0FIELD:TOCANVAS=TRUE
ANNENEMY0FIELD:PRIORITY=200
ANNENEMY0FIELD:FPS=16
ANNENEMY0FIELD:PRELOAD=TRUE
ANNENEMY0FIELD:RELEASE=TRUE
ANNENEMY0FIELD:MONITORCOLLISION=FALSE
ANNENEMY0FIELD:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNENEMY0ELAPSE
ANNENEMY0ELAPSE:TYPE=ANIMO
ANNENEMY0ELAPSE:VISIBLE=TRUE
ANNENEMY0ELAPSE:FILENAME=ENEMY0ELAPSE.ANN
ANNENEMY0ELAPSE:TOCANVAS=TRUE
ANNENEMY0ELAPSE:PRIORITY=0
ANNENEMY0ELAPSE:FPS=16
ANNENEMY0ELAPSE:PRELOAD=TRUE
ANNENEMY0ELAPSE:RELEASE=TRUE
ANNENEMY0ELAPSE:MONITORCOLLISION=FALSE
ANNENEMY0ELAPSE:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNENEMY0CURSE
ANNENEMY0CURSE:TYPE=ANIMO
ANNENEMY0CURSE:VISIBLE=FALSE
ANNENEMY0CURSE:FILENAME=ENEMYCURSE0.ANN
ANNENEMY0CURSE:TOCANVAS=TRUE
ANNENEMY0CURSE:PRIORITY=301
ANNENEMY0CURSE:FPS=16
ANNENEMY0CURSE:PRELOAD=TRUE
ANNENEMY0CURSE:RELEASE=TRUE
ANNENEMY0CURSE:MONITORCOLLISION=FALSE
ANNENEMY0CURSE:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNENEMY1MASK
ANNENEMY1MASK:TYPE=ANIMO
ANNENEMY1MASK:VISIBLE=TRUE
ANNENEMY1MASK:FILENAME=BLANK3.ANN
ANNENEMY1MASK:TOCANVAS=TRUE
ANNENEMY1MASK:PRIORITY=130
ANNENEMY1MASK:FPS=16
ANNENEMY1MASK:PRELOAD=TRUE
ANNENEMY1MASK:RELEASE=TRUE
ANNENEMY1MASK:MONITORCOLLISION=FALSE
ANNENEMY1MASK:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNENEMY1MMASK
ANNENEMY1MMASK:TYPE=ANIMO
ANNENEMY1MMASK:VISIBLE=TRUE
ANNENEMY1MMASK:FILENAME=BLANK7.ANN
ANNENEMY1MMASK:TOCANVAS=TRUE
ANNENEMY1MMASK:PRIORITY=200
ANNENEMY1MMASK:FPS=16
ANNENEMY1MMASK:PRELOAD=TRUE
ANNENEMY1MMASK:RELEASE=TRUE
ANNENEMY1MMASK:MONITORCOLLISION=FALSE
ANNENEMY1MMASK:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNENEMY1PATH
ANNENEMY1PATH:TYPE=ANIMO
ANNENEMY1PATH:VISIBLE=TRUE
ANNENEMY1PATH:FILENAME=BLANK4.ANN
ANNENEMY1PATH:TOCANVAS=TRUE
ANNENEMY1PATH:PRIORITY=100
ANNENEMY1PATH:FPS=16
ANNENEMY1PATH:PRELOAD=TRUE
ANNENEMY1PATH:RELEASE=TRUE
ANNENEMY1PATH:MONITORCOLLISION=FALSE
ANNENEMY1PATH:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNENEMY1FIELD
ANNENEMY1FIELD:TYPE=ANIMO
ANNENEMY1FIELD:VISIBLE=TRUE
ANNENEMY1FIELD:FILENAME=BLANK5.ANN
ANNENEMY1FIELD:TOCANVAS=TRUE
ANNENEMY1FIELD:PRIORITY=200
ANNENEMY1FIELD:FPS=16
ANNENEMY1FIELD:PRELOAD=TRUE
ANNENEMY1FIELD:RELEASE=TRUE
ANNENEMY1FIELD:MONITORCOLLISION=FALSE
ANNENEMY1FIELD:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNENEMY1ELAPSE
ANNENEMY1ELAPSE:TYPE=ANIMO
ANNENEMY1ELAPSE:VISIBLE=TRUE
ANNENEMY1ELAPSE:FILENAME=ENEMY1ELAPSE.ANN
ANNENEMY1ELAPSE:TOCANVAS=TRUE
ANNENEMY1ELAPSE:PRIORITY=0
ANNENEMY1ELAPSE:FPS=16
ANNENEMY1ELAPSE:PRELOAD=TRUE
ANNENEMY1ELAPSE:RELEASE=TRUE
ANNENEMY1ELAPSE:MONITORCOLLISION=FALSE
ANNENEMY1ELAPSE:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNENEMY1CURSE
ANNENEMY1CURSE:TYPE=ANIMO
ANNENEMY1CURSE:VISIBLE=FALSE
ANNENEMY1CURSE:FILENAME=ENEMYCURSE1.ANN
ANNENEMY1CURSE:TOCANVAS=TRUE
ANNENEMY1CURSE:PRIORITY=301
ANNENEMY1CURSE:FPS=16
ANNENEMY1CURSE:PRELOAD=TRUE
ANNENEMY1CURSE:RELEASE=TRUE
ANNENEMY1CURSE:MONITORCOLLISION=FALSE
ANNENEMY1CURSE:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNBTN
ANNBTN:TYPE=ANIMO
ANNBTN:VISIBLE=TRUE
ANNBTN:FILENAME=BLANK.ANN
ANNBTN:TOCANVAS=TRUE
ANNBTN:PRIORITY=0
ANNBTN:FPS=16
ANNBTN:PRELOAD=TRUE
ANNBTN:RELEASE=TRUE
ANNBTN:MONITORCOLLISION=FALSE
ANNBTN:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNBTNGRAPH
ANNBTNGRAPH:TYPE=ANIMO
ANNBTNGRAPH:VISIBLE=TRUE
ANNBTNGRAPH:FILENAME=BLANK.ANN
ANNBTNGRAPH:TOCANVAS=TRUE
ANNBTNGRAPH:PRIORITY=0
ANNBTNGRAPH:FPS=16
ANNBTNGRAPH:PRELOAD=TRUE
ANNBTNGRAPH:RELEASE=TRUE
ANNBTNGRAPH:MONITORCOLLISION=FALSE
ANNBTNGRAPH:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNBTNMASK
ANNBTNMASK:TYPE=ANIMO
ANNBTNMASK:VISIBLE=TRUE
ANNBTNMASK:FILENAME=BLANK.ANN
ANNBTNMASK:TOCANVAS=TRUE
ANNBTNMASK:PRIORITY=0
ANNBTNMASK:FPS=16
ANNBTNMASK:PRELOAD=TRUE
ANNBTNMASK:RELEASE=TRUE
ANNBTNMASK:MONITORCOLLISION=FALSE
ANNBTNMASK:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNSWITCH
ANNSWITCH:TYPE=ANIMO
ANNSWITCH:VISIBLE=TRUE
ANNSWITCH:FILENAME=BLANK.ANN
ANNSWITCH:TOCANVAS=TRUE
ANNSWITCH:PRIORITY=0
ANNSWITCH:FPS=16
ANNSWITCH:PRELOAD=TRUE
ANNSWITCH:RELEASE=TRUE
ANNSWITCH:MONITORCOLLISION=FALSE
ANNSWITCH:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNSWITCHMASK
ANNSWITCHMASK:TYPE=ANIMO
ANNSWITCHMASK:VISIBLE=TRUE
ANNSWITCHMASK:FILENAME=BLANK.ANN
ANNSWITCHMASK:TOCANVAS=TRUE
ANNSWITCHMASK:PRIORITY=0
ANNSWITCHMASK:FPS=16
ANNSWITCHMASK:PRELOAD=TRUE
ANNSWITCHMASK:RELEASE=TRUE
ANNSWITCHMASK:MONITORCOLLISION=FALSE
ANNSWITCHMASK:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNSWITCHGRAPH
ANNSWITCHGRAPH:TYPE=ANIMO
ANNSWITCHGRAPH:VISIBLE=TRUE
ANNSWITCHGRAPH:FILENAME=BLANK.ANN
ANNSWITCHGRAPH:TOCANVAS=TRUE
ANNSWITCHGRAPH:PRIORITY=0
ANNSWITCHGRAPH:FPS=16
ANNSWITCHGRAPH:PRELOAD=TRUE
ANNSWITCHGRAPH:RELEASE=TRUE
ANNSWITCHGRAPH:MONITORCOLLISION=FALSE
ANNSWITCHGRAPH:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNPRZEDMIOT
ANNPRZEDMIOT:TYPE=ANIMO
ANNPRZEDMIOT:VISIBLE=TRUE
ANNPRZEDMIOT:FILENAME=PRZEDMIOTY1.ANN
ANNPRZEDMIOT:TOCANVAS=TRUE
ANNPRZEDMIOT:PRIORITY=0
ANNPRZEDMIOT:FPS=16
ANNPRZEDMIOT:PRELOAD=TRUE
ANNPRZEDMIOT:RELEASE=TRUE
ANNPRZEDMIOT:MONITORCOLLISION=FALSE
ANNPRZEDMIOT:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNMENU
ANNMENU:TYPE=ANIMO
ANNMENU:VISIBLE=TRUE
ANNMENU:FILENAME=MENU.ANN
ANNMENU:TOCANVAS=TRUE
ANNMENU:PRIORITY=600
ANNMENU:FPS=16
ANNMENU:PRELOAD=TRUE
ANNMENU:RELEASE=TRUE
ANNMENU:MONITORCOLLISION=FALSE
ANNMENU:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNBLINKREX
ANNBLINKREX:TYPE=ANIMO
ANNBLINKREX:VISIBLE=TRUE
ANNBLINKREX:FILENAME=BLINKREX.ANN
ANNBLINKREX:TOCANVAS=TRUE
ANNBLINKREX:PRIORITY=0
ANNBLINKREX:FPS=16
ANNBLINKREX:PRELOAD=TRUE
ANNBLINKREX:RELEASE=TRUE
ANNBLINKREX:MONITORCOLLISION=FALSE
ANNBLINKREX:MONITORCOLLISIONALPHA=FALSE
ANNBLINKREX:ONFRAMECHANGED={ANNPLAYER0^SETOPACITY(ANNBLINKREX^GETFRAMENAME());}
ANNBLINKREX:ONFINISHED={ANNPLAYER0^SETOPACITY(255);}

OBJECT=ANNBLINKKRET
ANNBLINKKRET:TYPE=ANIMO
ANNBLINKKRET:VISIBLE=TRUE
ANNBLINKKRET:FILENAME=BLINKKRET.ANN
ANNBLINKKRET:TOCANVAS=TRUE
ANNBLINKKRET:PRIORITY=0
ANNBLINKKRET:FPS=16
ANNBLINKKRET:PRELOAD=TRUE
ANNBLINKKRET:RELEASE=TRUE
ANNBLINKKRET:MONITORCOLLISION=FALSE
ANNBLINKKRET:MONITORCOLLISIONALPHA=FALSE
ANNBLINKKRET:ONFRAMECHANGED={ANNPLAYER1^SETOPACITY(ANNBLINKKRET^GETFRAMENAME());}
ANNBLINKKRET:ONFINISHED={ANNPLAYER1^SETOPACITY(255);}

OBJECT=ANNWIEZIENIE
ANNWIEZIENIE:TYPE=ANIMO
ANNWIEZIENIE:VISIBLE=FALSE
ANNWIEZIENIE:FILENAME=BLANK.ANN
ANNWIEZIENIE:TOCANVAS=TRUE
ANNWIEZIENIE:PRIORITY=201
ANNWIEZIENIE:FPS=16
ANNWIEZIENIE:PRELOAD=TRUE
ANNWIEZIENIE:RELEASE=TRUE
ANNWIEZIENIE:MONITORCOLLISION=FALSE
ANNWIEZIENIE:MONITORCOLLISIONALPHA=FALSE
ANNWIEZIENIE:ONSTARTED={THIS^HIDE();}

#PATCHED
#REMOVE THE BEHAVIOR AS IT SEEMS UNUSED
OBJECT=ANNDARKELAPSE
ANNDARKELAPSE:TYPE=ANIMO
ANNDARKELAPSE:VISIBLE=TRUE
ANNDARKELAPSE:FILENAME=DARKELAPSE.ANN
ANNDARKELAPSE:TOCANVAS=TRUE
ANNDARKELAPSE:PRIORITY=0
ANNDARKELAPSE:FPS=16
ANNDARKELAPSE:PRELOAD=TRUE
ANNDARKELAPSE:RELEASE=TRUE
ANNDARKELAPSE:MONITORCOLLISION=FALSE
ANNDARKELAPSE:MONITORCOLLISIONALPHA=FALSE
ANNDARKELAPSE:ONFINISHED={ANNDARKELAPSE^PLAY("PLAY");}

OBJECT=ANNSPELL1
ANNSPELL1:TYPE=ANIMO
ANNSPELL1:VISIBLE=FALSE
ANNSPELL1:FILENAME=SPELL.ANN
ANNSPELL1:TOCANVAS=TRUE
ANNSPELL1:PRIORITY=400
ANNSPELL1:FPS=16
ANNSPELL1:PRELOAD=TRUE
ANNSPELL1:RELEASE=TRUE
ANNSPELL1:MONITORCOLLISION=FALSE
ANNSPELL1:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNMENUKEY
ANNMENUKEY:TYPE=ANIMO
ANNMENUKEY:VISIBLE=TRUE
ANNMENUKEY:FILENAME=PANPLAY.ANN
ANNMENUKEY:TOCANVAS=TRUE
ANNMENUKEY:PRIORITY=601
ANNMENUKEY:FPS=16
ANNMENUKEY:PRELOAD=TRUE
ANNMENUKEY:RELEASE=TRUE
ANNMENUKEY:MONITORCOLLISION=FALSE
ANNMENUKEY:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNREXZYCIA
ANNREXZYCIA:TYPE=ANIMO
ANNREXZYCIA:VISIBLE=FALSE
ANNREXZYCIA:FILENAME=REXZYCIA.ANN
ANNREXZYCIA:TOCANVAS=TRUE
ANNREXZYCIA:PRIORITY=800
ANNREXZYCIA:FPS=16
ANNREXZYCIA:PRELOAD=TRUE
ANNREXZYCIA:RELEASE=TRUE
ANNREXZYCIA:MONITORCOLLISION=FALSE
ANNREXZYCIA:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNKRETZYCIA
ANNKRETZYCIA:TYPE=ANIMO
ANNKRETZYCIA:VISIBLE=FALSE
ANNKRETZYCIA:FILENAME=KRETZYCIA.ANN
ANNKRETZYCIA:TOCANVAS=TRUE
ANNKRETZYCIA:PRIORITY=800
ANNKRETZYCIA:FPS=16
ANNKRETZYCIA:PRELOAD=TRUE
ANNKRETZYCIA:RELEASE=TRUE
ANNKRETZYCIA:MONITORCOLLISION=FALSE
ANNKRETZYCIA:MONITORCOLLISIONALPHA=FALSE

OBJECT=IMGRESTARTSTD
IMGRESTARTSTD:TYPE=IMAGE
IMGRESTARTSTD:VISIBLE=TRUE
IMGRESTARTSTD:FILENAME=BACKSTD.IMG
IMGRESTARTSTD:TOCANVAS=TRUE
IMGRESTARTSTD:PRIORITY=1002
IMGRESTARTSTD:PRELOAD=TRUE
IMGRESTARTSTD:RELEASE=TRUE
IMGRESTARTSTD:MONITORCOLLISION=FALSE
IMGRESTARTSTD:MONITORCOLLISIONALPHA=FALSE

OBJECT=IMGRESTARTOM
IMGRESTARTOM:TYPE=IMAGE
IMGRESTARTOM:VISIBLE=TRUE
IMGRESTARTOM:FILENAME=BACKOM.IMG
IMGRESTARTOM:TOCANVAS=TRUE
IMGRESTARTOM:PRIORITY=1002
IMGRESTARTOM:PRELOAD=TRUE
IMGRESTARTOM:RELEASE=TRUE
IMGRESTARTOM:MONITORCOLLISION=FALSE
IMGRESTARTOM:MONITORCOLLISIONALPHA=FALSE

OBJECT=IMGRESTARTOC
IMGRESTARTOC:TYPE=IMAGE
IMGRESTARTOC:VISIBLE=TRUE
IMGRESTARTOC:FILENAME=BACKOC.IMG
IMGRESTARTOC:TOCANVAS=TRUE
IMGRESTARTOC:PRIORITY=1002
IMGRESTARTOC:PRELOAD=TRUE
IMGRESTARTOC:RELEASE=TRUE
IMGRESTARTOC:MONITORCOLLISION=FALSE
IMGRESTARTOC:MONITORCOLLISIONALPHA=FALSE

OBJECT=IMGLADDER
IMGLADDER:TYPE=IMAGE
IMGLADDER:VISIBLE=TRUE
IMGLADDER:FILENAME=BLANK.IMG
IMGLADDER:TOCANVAS=TRUE
IMGLADDER:PRIORITY=131
IMGLADDER:PRELOAD=TRUE
IMGLADDER:RELEASE=TRUE
IMGLADDER:MONITORCOLLISION=FALSE
IMGLADDER:MONITORCOLLISIONALPHA=FALSE

OBJECT=IMGDARK
IMGDARK:TYPE=IMAGE
IMGDARK:VISIBLE=FALSE
IMGDARK:FILENAME=DARK.IMG
IMGDARK:TOCANVAS=TRUE
IMGDARK:PRIORITY=2000
IMGDARK:PRELOAD=TRUE
IMGDARK:RELEASE=TRUE
IMGDARK:MONITORCOLLISION=FALSE
IMGDARK:MONITORCOLLISIONALPHA=FALSE

OBJECT=IMGKOLKO
IMGKOLKO:TYPE=IMAGE
IMGKOLKO:VISIBLE=TRUE
IMGKOLKO:FILENAME=KOLKO.IMG
IMGKOLKO:TOCANVAS=TRUE
IMGKOLKO:PRIORITY=0
IMGKOLKO:PRELOAD=TRUE
IMGKOLKO:RELEASE=TRUE
IMGKOLKO:MONITORCOLLISION=FALSE
IMGKOLKO:MONITORCOLLISIONALPHA=FALSE

OBJECT=BTNRESTART
BTNRESTART:TYPE=BUTTON
BTNRESTART:VISIBLE=TRUE
BTNRESTART:ENABLE=TRUE
BTNRESTART:DRAGGABLE=FALSE
BTNRESTART:GFXSTANDARD=IMGRESTARTSTD
BTNRESTART:GFXONCLICK=IMGRESTARTOC
BTNRESTART:GFXONMOVE=IMGRESTARTOM
BTNRESTART:ONRELEASED={@IF("VARLEVEL","_","0","BFITMP24","");LABIRYNT^PAUSE();SEQLAB^PLAY("RESTART");}

OBJECT=TEXT1
TEXT1:TYPE=TEXT
TEXT1:VISIBLE=TRUE
TEXT1:FONT=ARIAL14
TEXT1:TOCANVAS=TRUE
TEXT1:RECT=100,100,200,200
TEXT1:PRIORITY=5000
TEXT1:VJUSTIFY=TRUE
TEXT1:MONITORCOLLISION=FALSE
TEXT1:MONITORCOLLISIONALPHA=FALSE

OBJECT=TEXT2
TEXT2:TYPE=TEXT
TEXT2:VISIBLE=TRUE
TEXT2:FONT=ARIAL14
TEXT2:TOCANVAS=TRUE
TEXT2:RECT=200,100,300,200
TEXT2:PRIORITY=50000
TEXT2:VJUSTIFY=TRUE
TEXT2:MONITORCOLLISION=FALSE
TEXT2:MONITORCOLLISIONALPHA=FALSE

#PATCHED
#DISABLE AND ENABLE THE KEYBOARD DURING THE RESTART SEQUENCE
OBJECT=SEQLAB
SEQLAB:TYPE=SEQUENCE
SEQLAB:FILENAME=SEQLAB.SEQ
SEQLAB:ONSTARTED^RESTART={KEYBOARD^DISABLE();}
SEQLAB:ONSTARTED^FAILED={KEYBOARD^DISABLE();}
SEQLAB:ONFINISHED^RESTART={G_SARCADEOBJECTS^SET(VARLEVEL);__SCREENSHOT__^RUN();LABIRYNT^RESUME();PRZYGODA^GOTO("LABIRYNT");KEYBOARD^ENABLE();}
SEQLAB:ONFINISHED^FAILED={G_SARCADEOBJECTS^SET(VARLEVEL);__SCREENSHOT__^RUN();LABIRYNT^RESUME();PRZYGODA^GOTO("LABIRYNT");KEYBOARD^ENABLE();}

OBJECT=SNDENTRE_LAB1
SNDENTRE_LAB1:TYPE=SOUND
SNDENTRE_LAB1:FILENAME=KRETES_K278.WAV
SNDENTRE_LAB1:PRELOAD=TRUE
SNDENTRE_LAB1:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDFAILED
SNDFAILED:TYPE=SOUND
SNDFAILED:FILENAME=KRETES_K279.WAV
SNDFAILED:PRELOAD=TRUE
SNDFAILED:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDPLAYER2
SNDPLAYER2:TYPE=SOUND
SNDPLAYER2:FILENAME=KRASNAL_K281.WAV
SNDPLAYER2:PRELOAD=TRUE
SNDPLAYER2:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDPLAYER3
SNDPLAYER3:TYPE=SOUND
SNDPLAYER3:FILENAME=KRASNAL_K282.WAV
SNDPLAYER3:PRELOAD=TRUE
SNDPLAYER3:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDPLAYER4
SNDPLAYER4:TYPE=SOUND
SNDPLAYER4:FILENAME=KRASNAL_K283.WAV
SNDPLAYER4:PRELOAD=TRUE
SNDPLAYER4:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDPLAYER5
SNDPLAYER5:TYPE=SOUND
SNDPLAYER5:FILENAME=KRASNAL_K284.WAV
SNDPLAYER5:PRELOAD=TRUE
SNDPLAYER5:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDPLAYER6
SNDPLAYER6:TYPE=SOUND
SNDPLAYER6:FILENAME=KRASNAL_K285.WAV
SNDPLAYER6:PRELOAD=TRUE
SNDPLAYER6:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDKOLIZJA1
SNDKOLIZJA1:TYPE=SOUND
SNDKOLIZJA1:FILENAME=KRASNAL_K286.WAV
SNDKOLIZJA1:PRELOAD=TRUE
SNDKOLIZJA1:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDKOLIZJA2
SNDKOLIZJA2:TYPE=SOUND
SNDKOLIZJA2:FILENAME=KRASNAL_K287.WAV
SNDKOLIZJA2:PRELOAD=TRUE
SNDKOLIZJA2:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDKONIEC2
SNDKONIEC2:TYPE=SOUND
SNDKONIEC2:FILENAME=KRASNAL_K289.WAV
SNDKONIEC2:PRELOAD=TRUE
SNDKONIEC2:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDPLAYER0
SNDPLAYER0:TYPE=SOUND
SNDPLAYER0:FILENAME=REX_R006.WAV
SNDPLAYER0:PRELOAD=TRUE
SNDPLAYER0:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDPLAYER1
SNDPLAYER1:TYPE=SOUND
SNDPLAYER1:FILENAME=KRETES_D046.WAV
SNDPLAYER1:PRELOAD=TRUE
SNDPLAYER1:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDPLAYER8
SNDPLAYER8:TYPE=SOUND
SNDPLAYER8:FILENAME=KRASNAL_K285.WAV
SNDPLAYER8:PRELOAD=TRUE
SNDPLAYER8:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDPLAYER9
SNDPLAYER9:TYPE=SOUND
SNDPLAYER9:FILENAME=KRASNAL_K285.WAV
SNDPLAYER9:PRELOAD=TRUE
SNDPLAYER9:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDREXTRAFIONY
SNDREXTRAFIONY:TYPE=SOUND
SNDREXTRAFIONY:FILENAME=REX_R042.WAV
SNDREXTRAFIONY:PRELOAD=TRUE
SNDREXTRAFIONY:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDKRETESTRAFIONY
SNDKRETESTRAFIONY:TYPE=SOUND
SNDKRETESTRAFIONY:FILENAME=KRETES_D047.WAV
SNDKRETESTRAFIONY:PRELOAD=TRUE
SNDKRETESTRAFIONY:FLUSHAFTERPLAYED=FALSE

OBJECT=SNDTELE
SNDTELE:TYPE=SOUND
SNDTELE:FILENAME=SND_TELE.WAV
SNDTELE:PRELOAD=FALSE
SNDTELE:FLUSHAFTERPLAYED=FALSE

OBJECT=ARIAL14
ARIAL14:TYPE=FONT
ARIAL14:DEF_ARIAL_STANDARD_14=ARIAL14.FNT

OBJECT=ARRAYKEYBOARD
ARRAYKEYBOARD:TYPE=ARRAY

OBJECT=ARRAYPLAYERS
ARRAYPLAYERS:TYPE=ARRAY

OBJECT=ARRAYPLAYERSSTARTX
ARRAYPLAYERSSTARTX:TYPE=ARRAY

OBJECT=ARRAYPLAYERSSTARTY
ARRAYPLAYERSSTARTY:TYPE=ARRAY

OBJECT=ARRAYPLAYERSSTATE
ARRAYPLAYERSSTATE:TYPE=ARRAY

OBJECT=ARRAYPLAYERSDARKNESS
ARRAYPLAYERSDARKNESS:TYPE=ARRAY

OBJECT=ARRAYENEMY0
ARRAYENEMY0:TYPE=ARRAY

OBJECT=ARRAYENEMY0STATE
ARRAYENEMY0STATE:TYPE=ARRAY

OBJECT=ARRAYENEMY0STARTX
ARRAYENEMY0STARTX:TYPE=ARRAY

OBJECT=ARRAYENEMY0STARTY
ARRAYENEMY0STARTY:TYPE=ARRAY

OBJECT=ARRAYENEMY1
ARRAYENEMY1:TYPE=ARRAY

OBJECT=ARRAYENEMY1STARTX
ARRAYENEMY1STARTX:TYPE=ARRAY

OBJECT=ARRAYENEMY1STARTY
ARRAYENEMY1STARTY:TYPE=ARRAY

OBJECT=ARRAYENEMY1STATE
ARRAYENEMY1STATE:TYPE=ARRAY

OBJECT=ARRAYUP
ARRAYUP:TYPE=ARRAY

OBJECT=ARRAYDOWN
ARRAYDOWN:TYPE=ARRAY

OBJECT=ARRAYLEFT
ARRAYLEFT:TYPE=ARRAY

OBJECT=ARRAYRIGHT
ARRAYRIGHT:TYPE=ARRAY

OBJECT=ARRAYIDLE
ARRAYIDLE:TYPE=ARRAY

OBJECT=ARRAYSLEEP
ARRAYSLEEP:TYPE=ARRAY

OBJECT=ARRAYSPELL
ARRAYSPELL:TYPE=ARRAY

OBJECT=ARRAYPLAYERACTIVE
ARRAYPLAYERACTIVE:TYPE=ARRAY

OBJECT=ARRAYRANDOM
ARRAYRANDOM:TYPE=ARRAY

OBJECT=ARRAYSPELLTYPE
ARRAYSPELLTYPE:TYPE=ARRAY

OBJECT=ARRAYREXIMUNE
ARRAYREXIMUNE:TYPE=ARRAY

OBJECT=ARRAYSAVE
ARRAYSAVE:TYPE=ARRAY

OBJECT=MOUSE
MOUSE:TYPE=MOUSE
MOUSE:ONMOVE={@IF("VARPLAYERNAME","!_",""ANNPLAYER0"","BFITMP25","");VARMOUSEDX^SET([VARMOUSEPOSX-MOUSE^GETPOSX()]);VARMOUSEDY^SET([VARMOUSEPOSY-MOUSE^GETPOSY()]);VARMOUSEDX^DIV(VARMOUSESPEED);VARMOUSEDY^DIV(VARMOUSESPEED);VARMOUSEPOSX^SUB(VARMOUSEDX);VARMOUSEPOSY^SUB(VARMOUSEDY);G_CURSOR^SETPOSITIONNOCALL(VARMOUSEPOSX,VARMOUSEPOSY);@IF("ARRAYPLAYERSSTATE^GET(0)!'"SLEEP"&&ARRAYPLAYERSSTATE^GET(0)!'"FROG"","BFITMP26","");}
MOUSE:ONCLICK^LEFT={@IF("VARPLAYERNAME","_",""ANNPLAYER0"","BFITMP28","");}
MOUSE:ONRELEASE^LEFT={@IF("VARPLAYERNAME","_",""ANNPLAYER0"","BFITMP29","");}

OBJECT=CNVLOADER
CNVLOADER:TYPE=CNVLOADER

OBJECT=CANVASOBSERVER
CANVASOBSERVER:TYPE=CANVAS_OBSERVER

OBJECT=CURSORFACTORY
CURSORFACTORY:TYPE=CLASS
CURSORFACTORY:DEF=CURFACTORY.CLASS
CURSORFACTORY:BASE=

OBJECT=KEYBOARD
KEYBOARD:TYPE=KEYBOARD
KEYBOARD:ONCHAR^1={VARINT0^SET(0);@IF("VARINT0","<",ARRAYPLAYERS^GETSIZE(),"BFITMP181","");}
KEYBOARD:ONCHAR^2={VARINT0^SET(1);@IF("VARINT0","<",ARRAYPLAYERS^GETSIZE(),"BFITMP182","");}
KEYBOARD:ONCHAR^3={VARINT0^SET(2);@IF("VARINT0","<",ARRAYPLAYERS^GETSIZE(),"BFITMP183","");}
KEYBOARD:ONCHAR^4={VARINT0^SET(3);@IF("VARINT0","<",ARRAYPLAYERS^GETSIZE(),"BFITMP184","");}
KEYBOARD:ONCHAR^5={VARINT0^SET(4);@IF("VARINT0","<",ARRAYPLAYERS^GETSIZE(),"BFITMP185","");}
KEYBOARD:ONCHAR^6={VARINT0^SET(5);@IF("VARINT0","<",ARRAYPLAYERS^GETSIZE(),"BFITMP186","");}
KEYBOARD:ONCHAR^7={VARINT0^SET(6);@IF("VARINT0","<",ARRAYPLAYERS^GETSIZE(),"BFITMP187","");}
KEYBOARD:ONCHAR^8={VARINT0^SET(7);@IF("VARINT0","<",ARRAYPLAYERS^GETSIZE(),"BFITMP188","");}
KEYBOARD:ONCHAR^9={VARINT0^SET(8);@IF("VARINT0","<",ARRAYPLAYERS^GETSIZE(),"BFITMP189","");}

OBJECT=__INIT__
__INIT__:TYPE=BEHAVIOUR
__INIT__:CODE={LABIRYNT^RESUME();G_CURSOR^SETCURSOR("ROZDZKA");G_CURSOR^SETSCENE("LABIRYNT");G_MENU^SETSCENE("LABIRYNT");G_MENU^SHOWWAND(TRUE);G_AMBIENT^SETAMBIENT("NULL");G_CURSOR^SETPOSITIONNOCALL(400,300);SMOUSEPOSX^SET(400);VARMOUSEPOSY^SET(300);G_IFLIPPAGE^SET(1);__FLIP__^RUN();LABIRYNT^STARTMUSIC("PODZIEMIA.WAV");LABIRYNT^SETMUSICVOLUME(G_ARRSETTINGS^GET(1));VARSAVENAME^SET("$COMMON\LABIRYNT0.ARR");@IF("G_SARCADEOBJECTS","_",""LABIRYNT"","BFITMP194","BFITMP195");SCENENAME^SET("LABIRYNT");G_SLASTOBJECTS^SET("LABIRYNT");G_MENU^SAVESETS();CNVLOADER^LOAD("CNVSPELL.CNV");BEHINITSPELL^RUN();KEYBOARD^SETAUTOREPEAT(FALSE);CNVLOADER^LOAD(["CNVLEVEL"+VARLEVEL+".CNV"]);BEHINITLEVEL^RUN();G_ISUCCESS^SET(0);ARRAYKEYBOARD^ADD("UP","DOWN","LEFT","RIGHT");ARRAYPLAYERACTIVE^ADD("UP","RIGHT","LEFT","DOWN","IDLE");ARRAYUP^ADD("UP","RIGHT","LEFT","DOWN","IDLE");ARRAYRIGHT^ADD("RIGHT","DOWN","UP","LEFT","IDLE");ARRAYDOWN^ADD("DOWN","LEFT","RIGHT","UP","IDLE");ARRAYLEFT^ADD("LEFT","UP","DOWN","RIGHT","IDLE");ARRAYIDLE^ADD("LEFT","UP","RIGHT","DOWN","IDLE");ARRAYSLEEP^ADD("IDLE");ARRAYSPELL^ADD("IDLE");ARRAYSPELLTYPE^ADD("SLEEP","FROG","FLY","BUDYN","SWIRL","DARK");BEHINITBUTTON^RUN();BEHINITPLAYERS^RUN();VARPLAYERNAME^SET(ARRAYPLAYERS^GET(0));VARMASKNAME^SET("ANNPLAYERMASK_1");VARFOVNAME^SET("ANNPLAYERFIELD_1");*VARPLAYERNAME^PLAY("IDLE");ANNMENU^CLONE(ARRAYPLAYERS^GETSIZE());ANNMENU^HIDE();BEHUPDATEMENU^RUN();}

#PATCHED
#ADD SPELL READINESS CHECKING
OBJECT=BEHINITENEMY
BEHINITENEMY:TYPE=BEHAVIOUR
BEHINITENEMY:CODE={@LOOP("{*VARARRAYNAME^ADD([VARENEMYNAME+"_"+[_I_+1]]);*VARENEMYSTATE^ADD("NULL");}",0,*[VARARRAYNAME+"STARTX"]^GETSIZE(),1);*VARENEMYNAME^SETPRIORITY(300);*VARENEMYNAME^CLONE(*VARARRAYNAME^GETSIZE());*VARENEMYNAME^HIDE();*[VARENEMYNAME+"MASK"]^CLONE(*VARARRAYNAME^GETSIZE());*[VARENEMYNAME+"MASK"]^SETPRIORITY(0);*[VARENEMYNAME+"MASK"]^HIDE();*[VARENEMYNAME+"PATH"]^SETPRIORITY(0);*[VARENEMYNAME+"PATH"]^CLONE(*VARARRAYNAME^GETSIZE());*[VARENEMYNAME+"PATH"]^HIDE();*[VARENEMYNAME+"FIELD"]^CLONE(*VARARRAYNAME^GETSIZE());*[VARENEMYNAME+"FIELD"]^SETPRIORITY(0);*[VARENEMYNAME+"FIELD"]^HIDE();*[VARENEMYNAME+"MMASK"]^CLONE(*VARARRAYNAME^GETSIZE());*[VARENEMYNAME+"MMASK"]^SETPRIORITY(0);*[VARENEMYNAME+"MMASK"]^HIDE();*[VARENEMYNAME+"ELAPSE"]^CLONE(*VARARRAYNAME^GETSIZE());*[VARENEMYNAME+"ELAPSE"]^SETPRIORITY(0);*[VARENEMYNAME+"ELAPSE"]^HIDE();*[VARENEMYNAME+"CURSE"]^CLONE(*VARARRAYNAME^GETSIZE());*[VARENEMYNAME+"CURSE"]^SETPRIORITY(0);*[VARENEMYNAME+"CURSE"]^HIDE();@LOOP("{VARSTRING0^SET(*VARARRAYNAME^GET(_I_));VARSTRING1^SET([VARENEMYNAME+"PATH_"+[_I_+1]]);VARSTRING2^SET([VARENEMYNAME+"MASK_"+[_I_+1]]);VARSTRING3^SET([VARENEMYNAME+"FIELD_"+[_I_+1]]);VARSTRING4^SET([VARENEMYNAME+"ELAPSE_"+[_I_+1]]);VARSTRING5^SET([VARENEMYNAME+"MMASK_"+[_I_+1]]);VARSTRING6^SET([VARENEMYNAME+"CURSE_"+[_I_+1]]);*VARSTRING1^PLAY([_I_+1]);*VARSTRING1^SETPRIORITY(0);*VARSTRING1^HIDE();*VARSTRING2^SETANCHOR("CENTER");*VARSTRING2^PLAY("IDLE");*VARSTRING2^HIDE();*VARSTRING3^SETANCHOR("CENTER");*VARSTRING3^PLAY("IDLE");*VARSTRING3^HIDE();*VARSTRING5^SETPRIORITY(200);*VARSTRING4^ADDBEHAVIOUR("ONFINISHED","BEHENEMYRESUME");*VARSTRING5^SETPRIORITY(199);*VARSTRING6^SETANCHOR("CENTER");*VARSTRING6^PLAY("IDLE");*VARSTRING6^HIDE();VARINT0^SET(40);VARINT1^SET(40);VARINT0^MUL(*[VARARRAYNAME+"STARTX"]^GET(_I_));VARINT1^MUL(*[VARARRAYNAME+"STARTY"]^GET(_I_));VARINT0^ADD(20);VARINT1^ADD(20);*VARSTRING0^SETFPS(12);*VARSTRING0^SETANCHOR("CENTER");*VARSTRING0^SETPOSITION(VARINT0,VARINT1);*VARSTRING0^ADDBEHAVIOUR("ONFINISHED","BEHENEMYMOVE");*VARSTRING0^ADDBEHAVIOUR("ONSTARTED","BEHENEMYMASK");*VARSTRING0^ADDBEHAVIOUR("ONFRAMECHANGED","BEHCHECKENEMYSPELL");*VARSTRING0^PLAY("IDLE");}",0,*VARARRAYNAME^GETSIZE(),1);}


OBJECT=BEHINITBUTTON
BEHINITBUTTON:TYPE=BEHAVIOUR
BEHINITBUTTON:CODE={ANNBTN^HIDE();ANNBTNGRAPH^HIDE();ANNBTNMASK^HIDE();ANNBTN^SETPRIORITY(0);ANNBTNMASK^SETPRIORITY(0);ANNBTN^CLONE(ANNBTN^GETNOE());ANNBTNGRAPH^CLONE(ANNBTN^GETNOE());ANNBTNMASK^CLONE(ANNBTN^GETNOE());@LOOP("{VARINT0^SET([_I_+1]);VARSTRING0^SET(["ANNBTN_"+VARINT0]);VARSTRING1^SET(["ANNBTNGRAPH_"+VARINT0]);VARSTRING2^SET(["ANNBTNMASK_"+VARINT0]);VARSTRING3^SET(["A"+VARINT0]);*VARSTRING0^SETFRAME(VARSTRING3,0);*VARSTRING1^SETFRAME(VARSTRING3,0);*VARSTRING2^SETFRAME(VARSTRING3,0);*VARSTRING0^SETPRIORITY(201);*VARSTRING1^SETPRIORITY(999);*VARSTRING2^SETPRIORITY(130);*VARSTRING0^HIDE();*VARSTRING1^SHOW();*VARSTRING2^HIDE();}",0,ANNBTN^GETNOE(),1);ANNSWITCH^CLONE(ANNSWITCH^GETNOE());ANNSWITCHGRAPH^CLONE(ANNSWITCH^GETNOE());ANNSWITCHMASK^CLONE(ANNSWITCH^GETNOE());ANNSWITCH^SETPRIORITY(0);ANNSWITCHMASK^SETPRIORITY(0);CANVASOBSERVER^REMOVE("ANNSWITCH");CANVASOBSERVER^REMOVE("ANNSWITCHGRAPH");CANVASOBSERVER^REMOVE("ANNSWITCHMASK");ANNSWITCH^HIDE();ANNSWITCHGRAPH^HIDE();ANNSWITCHMASK^HIDE();@LOOP("{VARINT0^SET([_I_+1]);VARSTRING0^SET(["ANNSWITCH_"+VARINT0]);VARSTRING1^SET(["ANNSWITCHGRAPH_"+VARINT0]);VARSTRING2^SET(["ANNSWITCHMASK_"+VARINT0]);VARSTRING3^SET(["A"+VARINT0]);*VARSTRING0^SETFRAME(VARSTRING3,0);*VARSTRING1^SETFRAME(VARSTRING3,0);*VARSTRING2^SETFRAME(VARSTRING3,0);*VARSTRING0^HIDE();*VARSTRING2^HIDE();*VARSTRING0^SETPRIORITY(202);*VARSTRING1^SETPRIORITY(0);*VARSTRING2^SETPRIORITY(130);}",0,ANNSWITCH^GETNOE(),1);ANNPRZEDMIOT^CLONE(ANNPRZEDMIOT^GETNOE());ANNPRZEDMIOT^HIDE();@LOOP("{VARINT0^SET([_I_+1]);VARSTRING0^SET(["ANNPRZEDMIOT_"+VARINT0]);VARSTRING1^SET(["A"+VARINT0]);*VARSTRING0^SETFRAME(VARSTRING1,0);*VARSTRING0^SETANCHOR("CENTER");*VARSTRING0^SETPRIORITY(201);}",0,ANNPRZEDMIOT^GETNOE(),1);BEHONBUTTON^RUN();@IF("VARLEVEL","_","0","BFITMP196","");}


OBJECT=BEHINITPLAYERS
BEHINITPLAYERS:TYPE=BEHAVIOUR
BEHINITPLAYERS:CODE={ANNPLAYERMASK^CLONE(ARRAYPLAYERS^GETSIZE());ANNPLAYERMASK^HIDE();ANNPLAYERMASK^SETPRIORITY(0);ANNPLAYERFIELD^CLONE(ARRAYPLAYERS^GETSIZE());ANNPLAYERFIELD^HIDE();ANNPLAYERFIELD^SETPRIORITY(0);ANNPLAYERELAPSE^CLONE(ARRAYPLAYERS^GETSIZE());ANNPLAYERELAPSE^HIDE();ANNPLAYERELAPSE^SETPRIORITY(0);ANNPLAYERDARKELAPSE^CLONE(ARRAYPLAYERS^GETSIZE());ANNPLAYERDARKELAPSE^HIDE();ANNPLAYERDARKELAPSE^SETPRIORITY(0);IMGKOLKO^SETPOSITION(-500,-500);IMGKOLKO^HIDE();VARKRETZYCIA^SET(3);VARREXZYCIA^SET(3);ANNREXZYCIA^PLAY(VARREXZYCIA);@IF(ARRAYPLAYERS^GETSIZE(),">","1","BFITMP197","");ANNMENUKEY^PLAY(ARRAYPLAYERS^GETSIZE());@LOOP("{VARINT0^SET(_I_);ARRAYPLAYERSSTATE^ADD("NULL");VARSTRING0^SET(ARRAYPLAYERS^GET(_I_));VARSTRING1^SET(["ANNPLAYERMASK_"+[_I_+1]]);VARSTRING2^SET(["ANNPLAYERFIELD_"+[_I_+1]]);VARSTRING3^SET(["ANNPLAYERELAPSE_"+[_I_+1]]);*VARSTRING0^SETANCHOR("CENTER");*VARSTRING0^SETPOSITION([40*ARRAYPLAYERSSTARTX^GET(_I_)+20],[40*ARRAYPLAYERSSTARTY^GET(_I_)+20]);@IF("VARINT0","<","2","BFITMP198","BFITMP199");VARINT0^SET(*VARSTRING0^GETCENTERX());VARINT1^SET(*VARSTRING0^GETCENTERY());*VARSTRING2^PLAY("UP");*VARSTRING2^HIDE();*VARSTRING2^SETANCHOR("CENTER");*VARSTRING2^SETPOSITION(-32,-32);*VARSTRING3^ADDBEHAVIOUR("ONFINISHED","BEHPLAYERRESUME");*VARSTRING1^PLAY("IDLE");*VARSTRING1^HIDE();*VARSTRING1^SETANCHOR("CENTER");*VARSTRING1^SETPOSITION(VARINT0,VARINT1);}",0,ARRAYPLAYERS^GETSIZE(),1);}


OBJECT=BEHFROGMOVE
BEHFROGMOVE:TYPE=BEHAVIOUR
BEHFROGMOVE:CODE={VARINT0^SET(*VARPLAYERNAME^GETCENTERX());VARINT1^SET(*VARPLAYERNAME^GETCENTERY());VARLASTMOVE^SET(*VARPLAYERNAME^GETFRAMENAME(*VARPLAYERNAME^GETEVENTNAME(),0));VARLASTMOVE^SUB(0,1);@IF(KEYBOARD^ISKEYDOWN(ARRAYKEYBOARD^GET(0)),"_","TRUE","BFITMP201","");@IF(KEYBOARD^ISKEYDOWN(ARRAYKEYBOARD^GET(1)),"_","TRUE","BFITMP203","");@IF(KEYBOARD^ISKEYDOWN(ARRAYKEYBOARD^GET(2)),"_","TRUE","BFITMP205","");@IF(KEYBOARD^ISKEYDOWN(ARRAYKEYBOARD^GET(3)),"_","TRUE","BFITMP207","");VARSTRING0^SET(["IDLE_"+VARLASTMOVE+"_FROG"]);*VARPLAYERNAME^PLAY(VARSTRING0);*VARMASKNAME^SETPOSITION(VARINT0,VARINT1);*VARMASKNAME^PLAY("IDLE");*VARMASKNAME^HIDE();}


OBJECT=BEHPLAYERMOVE
BEHPLAYERMOVE:TYPE=BEHAVIOUR
BEHPLAYERMOVE:CODE={VARINT0^SET(*VARPLAYERNAME^GETCENTERX());VARINT1^SET(*VARPLAYERNAME^GETCENTERY());VARLASTMOVE^SET(*VARPLAYERNAME^GETFRAMENAME(*VARPLAYERNAME^GETEVENTNAME(),0));VARLASTMOVE^SUB(0,1);@IF("VARIDOMAGIC","_","1","BFITMP208","");VARINT2^SET([[VARINT0-20]%40]);@IF("VARINT2","_","0","BFITMP217","");VARSTRING0^SET(["IDLE_"+VARLASTMOVE]);*VARPLAYERNAME^PLAY(VARSTRING0);*VARMASKNAME^SETPOSITION(VARINT0,VARINT1);*VARMASKNAME^PLAY("IDLE");*VARMASKNAME^HIDE();}


OBJECT=BEHPLAYERCOLL
BEHPLAYERCOLL:TYPE=BEHAVIOUR
BEHPLAYERCOLL:CODE={VARINT0^SET(*VARSTRING0^GETCENTERX());VARINT1^SET(*VARSTRING0^GETCENTERY());VARENEMY^SET(CANVASOBSERVER^GETGRAPHICSAT([VARINT0-2],[VARINT1-2],FALSE,199,200,FALSE));}


OBJECT=BEHPLAYERSPELL
BEHPLAYERSPELL:TYPE=BEHAVIOUR
BEHPLAYERSPELL:CODE={VARINT0^SET(*VARPLAYERNAME^GETCENTERX());VARINT1^SET(*VARPLAYERNAME^GETCENTERY());VARINT2^SET([VARINT0@40*40+20]);VARINT3^SET([VARINT1@40*40+20]);VARLASTMOVE^SET(*VARPLAYERNAME^GETFRAMENAME(*VARPLAYERNAME^GETEVENTNAME(),0));VARLASTMOVE^SUB(0,1);*VARPLAYERNAME^PLAY(["CAST_"+VARLASTMOVE]);*VARPLAYERNAME^SETPOSITION(VARINT2,VARINT3);VARSPELLCOUNT^INC();ANNSPELL1^CLONE(1);VARSTRING0^SET(["ANNSPELL1_"+VARSPELLCOUNT]);*VARSTRING0^ADDBEHAVIOUR("ONFRAMECHANGED","BEHMOVESPELL");*VARSTRING0^SETANCHOR("CENTER");@IF("VARLASTMOVE","_",""UP"","BFITMP218","");@IF("VARLASTMOVE","_",""DOWN"","BFITMP219","");@IF("VARLASTMOVE","_",""LEFT"","BFITMP220","");@IF("VARLASTMOVE","_",""RIGHT"","BFITMP221","");*VARSTRING0^SETPOSITION(VARINT0,VARINT1);*VARSTRING0^PLAY([ARRAYSPELLTYPE^GET(VARPLAYERSPELLTYPE)+"_"+VARLASTMOVE+"_R"]);}

#PATCHED
#ALWAYS MAKE THE PLAYER "AWAKE" AND THUS FIX PLAYER STAYING ASLEEP FOR ETERNITY
#REPLACE SPELL-SPECIFIC CONDITIONALS WITH MORE GENERAL ONES AS ARRAYPLAYERSSTATE[x] HOLDS ONLY ONE SPELL AT A TIME
OBJECT=BEHPLAYERRESUME
BEHPLAYERRESUME:TYPE=BEHAVIOUR
BEHPLAYERRESUME:CODE={VARPLAYERELAPSE^SET(THIS^GETNAME());VARCLONE^SET(THIS^GETCLONEINDEX());VARSTRING0^SET(["ANNPLAYER"+[VARCLONE-1]]);VARSPELLNAME^SET(ARRAYPLAYERSSTATE^GET([VARCLONE-1]));ARRAYPLAYERSSTATE^CHANGEAT([VARCLONE-1],"NULL");*VARSTRING0^SETFPS(30);VARMOUSESPEED^SET(1);ARRAYKEYBOARD^REMOVEALL();ARRAYKEYBOARD^ADD("UP","DOWN","LEFT","RIGHT");*VARSTRING0^PLAY("IDLE");BFITMP222^RUN();}


OBJECT=BEHSPELLREADY
BEHSPELLREADY:TYPE=BEHAVIOUR
BEHSPELLREADY:CODE={@IF("VARPLAYERSPELLTYPE>'6&&VARPLAYERSPELLTYPE<'11","BFITMP223","");}


OBJECT=BEHRESTARTLEVEL
BEHRESTARTLEVEL:TYPE=BEHAVIOUR
BEHRESTARTLEVEL:CODE={@IF(ARRAYPLAYERS^GETSIZE(),"_","1","BFITMP228","BFITMP229");}


OBJECT=BEHENEMYMOVE
BEHENEMYMOVE:TYPE=BEHAVIOUR
BEHENEMYMOVE:CODE={VARCLONE^SET(THIS^GETCLONEINDEX());VARENEMYNAME^SET(THIS^GETNAME());VARENEMYNR^SET(VARENEMYNAME^GET(8));VAREVENTNAME^SET(THIS^GETFRAMENAME(THIS^GETEVENTNAME(),1));VARARRAYNAME^SET(["ARRAY"+VAREVENTNAME]);VARPATHNAME^SET([VARENEMYNAME^GET(0,VARENEMYNAME^FIND("_"))+"PATH_"+VARCLONE]);VARENEMYSTATE^SET(["ARRAYENEMY"+VARENEMYNR+"STATE"]);VARENEMYSTATE^SET(*VARENEMYSTATE^GET([VARCLONE-1]));VARFROG^SET(THIS^GETFRAMENAME(THIS^GETEVENTNAME(),0));@IF("VARENEMYSTATE'"SWIRL"&&RANDOM^GET(2)'1","BFITMP230","");@LOOP("{VARINT0^SET(*VARENEMYNAME^GETCENTERX());VARINT1^SET(*VARENEMYNAME^GETCENTERY());VARDIRECTION^SET(*VARARRAYNAME^GET(_I_));VARINT2^SET(*VARPATHNAME^ISAT(VARINT0,VARINT1,TRUE));@IF("VARINT2'1||VARDIRECTION'"IDLE"","BFITMP232","");}",0,*VARARRAYNAME^GETSIZE(),1);}

#PATCHED
#SPLIT THE PROCEDURE INTO TWO HALVES: [ONE RESPONSIBLE FOR PREPARING AN ENEMY FOR CASTING A SPELL] AND THE OTHER FOR EMITTING THE SPELL
OBJECT=BEHENEMYSPELL
BEHENEMYSPELL:TYPE=BEHAVIOUR
BEHENEMYSPELL:CODE={VARCLONE^SET(*VARENEMY^GETCLONEINDEX());VARENEMYNR^SET(VARENEMY^GET(8));VARENEMYNAME^SET(["ANNENEMY"+VARENEMYNR+"_"+VARCLONE]);VARINT0^SET(*VARENEMYNAME^GETFRAMENAME("CAN_SPELL",0));@IF("VARINT0","_","0","BFITMP233","");VARENEMYSTATE^SET(["ARRAYENEMY"+VARENEMYNR+"STATE"]);VARENEMYSTATE^SET(*VARENEMYSTATE^GET([VARCLONE-1]));VARENEMYMASK^SET(["ANNENEMY"+VARENEMYNR+"MASK_"+VARCLONE]);VARENEMYFOV^SET(["ANNENEMY"+VARENEMYNR+"FIELD_"+VARCLONE]);VARLASTMOVE^SET(*VARENEMYNAME^GETFRAMENAME(*VARENEMYNAME^GETEVENTNAME(),1));@IF("VARENEMYSTATE","!_",""NULL"","BFITMP234","");@IF("VARLASTMOVE","_",""SPELL"","BFITMP235","");VARINT0^SET(*VARENEMYNAME^GETCENTERX());VARINT1^SET(*VARENEMYNAME^GETCENTERY());VARINT0^SET([VARINT0@40*40+20]);VARINT1^SET([VARINT1@40*40+20]);*VARENEMYNAME^STOP(FALSE);*VARENEMYNAME^SETPOSITION(VARINT0,VARINT1);*VARENEMYNAME^PLAY(["SPELL_"+VARLASTMOVE]);*VARENEMYMASK^STOP(FALSE);*VARENEMYMASK^PLAY("IDLE");*VARENEMYMASK^HIDE();*VARENEMYFOV^PLAY("IDLE");*VARENEMYFOV^HIDE();*VARENEMY^PLAY("IDLE");*VARENEMY^SETPOSITION(-40,-40);*VARENEMY^HIDE();}

#PATCHED
#SPLIT THE PROCEDURE INTO TWO HALVES: ONE RESPONSIBLE FOR PREPARING AN ENEMY FOR CASTING A SPELL AND [THE OTHER FOR EMITTING THE SPELL]
OBJECT=BEHENEMYEMITSPELL
BEHENEMYEMITSPELL:TYPE=BEHAVIOUR
BEHENEMYEMITSPELL:CODE={VARTHIS^SET($1);VARCLONE^SET(*VARTHIS^GETCLONEINDEX());VARENEMYNAME^SET(VARTHIS);VARENEMYNR^SET(VARENEMYNAME^GET(8));VARENEMYSTATE^SET(["ARRAYENEMY"+VARENEMYNR+"STATE"]);VARENEMYSTATE^SET(*VARENEMYSTATE^GET([VARCLONE-1]));VARLASTMOVE^SET(*VARENEMYNAME^GETFRAMENAME(*VARENEMYNAME^GETEVENTNAME(),1));@IF("VARENEMYSTATE","!_",""NULL"","BFITMP234","");VARINT0^SET(*VARENEMYNAME^GETCENTERX());VARINT1^SET(*VARENEMYNAME^GETCENTERY());@IF("VARLASTMOVE","_",""LEFT"","BFITMP236","");@IF("VARLASTMOVE","_",""RIGHT"","BFITMP237","");@IF("VARLASTMOVE","_",""UP"","BFITMP238","");@IF("VARLASTMOVE","_",""DOWN"","BFITMP239","");VARSPELLCOUNT^INC();ANNSPELL1^CLONE(1);VARSPELLNAME^SET(["ANNSPELL1_"+VARSPELLCOUNT]);*VARSPELLNAME^ADDBEHAVIOUR("ONFRAMECHANGED","BEHMOVESPELL");*VARSPELLNAME^SETANCHOR("CENTER");@IF(RANDOM^GET(2),"_","0","BFITMP240","BFITMP241");*VARSPELLNAME^SETPOSITION(VARINT0,VARINT1);*VARSPELLNAME^PLAY(VARSTRING0);}

#PATCHED
#MAKE MASK UPDATING OCCUR BEFORE BREAKING FROM THE PROCEDURE IF THE DARK SPELL IS ACTIVE ON AN ENEMY AND IN RESULT RENDER PASSING THROUGH AN ENEMY LESS POSSIBLE
OBJECT=BEHENEMYMASK
BEHENEMYMASK:TYPE=BEHAVIOUR
BEHENEMYMASK:CODE={VARINT0^SET(THIS^GETCLONEINDEX());VARSTRING0^SET(THIS^GETNAME());VARENEMYNR^SET(VARSTRING0^GET(8));VARENEMYSTATE^SET(["ARRAYENEMY"+VARENEMYNR+"STATE"]);VARENEMYSTATE^SET(*VARENEMYSTATE^GET([VARINT0-1]));VARSTRING0^CUT(0,VARSTRING0^FIND("_"));VARSTRING2^SET([VARSTRING0+"MASK_"+VARINT0]);*VARSTRING2^PLAY(THIS^GETEVENTNAME());*VARSTRING2^SETPOSITION(THIS^GETCENTERX(),THIS^GETCENTERY());*VARSTRING2^HIDE();@IF("VARENEMYSTATE","_",""DARK"","BFITMP242","");VARSTRING1^SET([VARSTRING0+"FIELD_"+VARINT0]);VARSTRING3^SET([VARSTRING0+"MMASK_"+VARINT0]);*VARSTRING1^PLAY(THIS^GETEVENTNAME());*VARSTRING1^SETPOSITION(THIS^GETCENTERX(),THIS^GETCENTERY());*VARSTRING1^HIDE();*VARSTRING3^PLAY(THIS^GETEVENTNAME());*VARSTRING3^SETPOSITION(THIS^GETCENTERX(),THIS^GETCENTERY());*VARSTRING3^HIDE();}


OBJECT=BEHENEMYCURSE
BEHENEMYCURSE:TYPE=BEHAVIOUR
BEHENEMYCURSE:CODE={VARSTRING0^SET($1);VARSTRING1^SET(VARSTRING0);VARINT0^SET(*VARSTRING0^GETCLONEINDEX());VARSTRING1^CUT(0,VARSTRING1^FIND("_"));VARSTRING2^SET([VARSTRING1+"CURSE_"+VARINT0]);*VARSTRING2^SETPOSITION(*VARSTRING0^GETCENTERX(),*VARSTRING0^GETCENTERY());}

#PATCHED
#REPLACE SPELL-SPECIFIC CONDITIONALS WITH MORE GENERAL ONES AS ARRAYENEMYxSTATE[y] HOLDS ONLY ONE SPELL AT A TIME
OBJECT=BEHENEMYRESUME
BEHENEMYRESUME:TYPE=BEHAVIOUR
BEHENEMYRESUME:CODE={VARENEMYELAPSE^SET(THIS^GETNAME());VARENEMYNR^SET(VARENEMYELAPSE^GET(8));VARCLONE^SET(THIS^GETCLONEINDEX());VARCURSE^SET(["ANNENEMY"+VARENEMYNR+"CURSE_"+VARCLONE]);VARENEMYNAME^SET(["ANNENEMY"+VARENEMYNR+"_"+VARCLONE]);VARARRAYNAME^SET(["ARRAYENEMY"+VARENEMYNR+"STATE"]);VARSPELLNAME^SET(*VARARRAYNAME^GET([VARCLONE-1]));*VARCURSE^PLAY("IDLE");@IF("*VARENEMYNAME^ISPLAYING()!'TRUE","{*VARENEMYNAME^PLAY("IDLE");}","");@IF("*VARENEMYNAME^GETEVENTNAME()^FIND("_FROG")","!_","-1","BFITMP244","");*VARARRAYNAME^CHANGEAT([VARCLONE-1],"NULL");*VARENEMYNAME^SETFPS(16);}


OBJECT=BEHMOVESPELL
BEHMOVESPELL:TYPE=BEHAVIOUR
BEHMOVESPELL:CODE={VARSTRING0^SET(THIS^GETNAME());VARSTRING1^SET(CANVASOBSERVER^GETGRAPHICSAT(THIS^GETCENTERX(),THIS^GETCENTERY(),FALSE,125,130,FALSE));VARSTRING2^SET(VARSTRING1^GET(3));@IF("VARSTRING1'"IMGMASK"||VARSTRING2'"B"||VARSTRING2'"S"","BFITMP245","");VARSTRING1^SET(CANVASOBSERVER^GETGRAPHICSAT(THIS^GETCENTERX(),THIS^GETCENTERY(),FALSE,300,300,FALSE));@IF(VARSTRING1^GET(3),"_",""E"","BFITMP246","");@IF(VARSTRING1^GET(3),"_",""P"","BFITMP247","");}

#PATCHED
#ADD SIMPLE CHECK THAT NULLIFIES AN ENEMY SPELL WHEN IT HITS AN ENEMY (A.K.A. FRIENDLY FIRE OFF FOR ENEMIES)
OBJECT=BEHENEMYSPELLCOLL
BEHENEMYSPELLCOLL:TYPE=BEHAVIOUR
BEHENEMYSPELLCOLL:CODE={VARINT0^SET(VARSTRING1^GET(8));VARINT1^SET(*VARSTRING1^GETCLONEINDEX());VARENEMYNAME^SET(["ANNENEMY"+VARINT0+"_"+VARINT1]);VARENEMYMASK^SET(["ANNENEMY"+VARINT0+"MASK_"+VARINT1]);VARENEMYFOV^SET(["ANNENEMY"+VARINT0+"FIELD_"+VARINT1]);VARENEMYELAPSE^SET(["ANNENEMY"+VARINT0+"ELAPSE_"+VARINT1]);VARENEMYSTATE^SET(["ARRAYENEMY"+VARINT0+"STATE"]);VARCURSE^SET(["ANNENEMY"+VARINT0+"CURSE_"+VARINT1]);VARSTRING1^SET(*VARSTRING0^GETEVENTNAME());@IF("VARSTRING1^FIND("_E")!'-1","{@BREAK();}","");VARSTRING1^SET(VARSTRING1^GET(0,VARSTRING1^FIND("_")));VARINT2^SET(*VARENEMYNAME^GETFRAMENAME("IMMUNE",0));@IF("VARINT2","_","1","BFITMP248","");*VARSTRING0^STOP(FALSE);*VARSTRING0^HIDE();*VARENEMYELAPSE^PLAY("PLAY");*VARENEMYSTATE^CHANGEAT([VARINT1-1],VARSTRING1);@IF("VARSTRING1","_",""SWIRL"","BFITMP249","");@IF("VARSTRING1","_",""SLEEP"","BFITMP250","");@IF("VARSTRING1","_",""FLY"","BFITMP251","");@IF("VARSTRING1","_",""BUDYN"","BFITMP252","");@IF("VARSTRING1","_",""FROG"","BFITMP253","");@IF("VARSTRING1","_",""DARK"","BFITMP254","");}

#PATCHED
#ADD SIMPLE CHECK THAT NULLIFIES A REKSIO SPELL WHEN IT HITS REKSIO (IN ATTEMPT TO GET RID OF SELF-DAMAGING)
OBJECT=BEHPLAYERSPELLCOLL
BEHPLAYERSPELLCOLL:TYPE=BEHAVIOUR
BEHPLAYERSPELLCOLL:CODE={VARINT0^SET(ARRAYPLAYERS^FIND(VARSTRING1));VARSTRING3^SET(["ANNPLAYERMASK_"+[VARINT0+1]]);VARSTRING4^SET(["ANNPLAYERDARKELAPSE_"+[VARINT0+1]]);VARPLAYERELAPSE^SET(["ANNPLAYERELAPSE_"+[VARINT0+1]]);VARSPELLNAME^SET(*VARSTRING0^GETEVENTNAME());@IF("VARSPELLNAME^FIND("_E")'-1&&VARSTRING1'"ANNPLAYER0"","{@BREAK();}","");VARSPELLNAME^SET(VARSPELLNAME^GET(0,VARSPELLNAME^FIND("_")));*VARSTRING0^STOP(FALSE);*VARSTRING0^HIDE();@IF("VARINT0","_","0","BFITMP256","");*VARPLAYERELAPSE^PLAY("PLAY");@IF("VARSPELLNAME","_",""SLEEP"","BFITMP257","");@IF("VARSPELLNAME","_",""SWIRL"","BFITMP259","");@IF("VARSPELLNAME","_",""FLY"","BFITMP260","");@IF("VARSPELLNAME","_",""BUDYN"","BFITMP261","");@IF("VARSPELLNAME","_",""FROG"","BFITMP262","");@IF("VARSPELLNAME","_",""DARK"","BFITMP264","");}


OBJECT=BEHONSWITCH
BEHONSWITCH:TYPE=BEHAVIOUR
BEHONSWITCH:CODE={@IF("VARPLAYERCHANGED","_","1","BFITMP265","");VARINT1^SET(*VARSWITCH^GETNOFINEVENT(*VARSWITCH^GETEVENTNAME()));@LOOP("{@IF("VARINT1","_","1","BFITMP266","BFITMP267");VARSTRING0^SET(["ANNSWITCHGRAPH_"+VARINT0]);VARSTRING1^SET(["ANNSWITCHMASK_"+VARINT0]);*VARSTRING0^SETPRIORITY(*VARSTRING0^GETFRAMENAME());VARINT2^SET(*VARSTRING1^GETCFRAMEINEVENT());VARINT2^INC();VARINT2^MOD(*VARSTRING1^GETNOFINEVENT(*VARSTRING1^GETEVENTNAME()));*VARSTRING0^SETFRAME(["A"+VARINT0],VARINT2);*VARSTRING1^SETFRAME(["A"+VARINT0],VARINT2);}",0,VARINT1,1);}


OBJECT=BEHONBUTTON
BEHONBUTTON:TYPE=BEHAVIOUR
BEHONBUTTON:CODE={@IF("VARPLAYERCHANGED","_","1","BFITMP268","");@LOOP("{VARINT0^SET([_I_+1]);VARSTRING0^SET(["ANNBTNGRAPH_"+VARINT0]);VARSTRING1^SET(["ANNBTNMASK_"+VARINT0]);VARSTRING2^SET(["ANNBTN_"+VARINT0]);@IF(*VARSTRING2^GETPRIORITY(),"_","201","BFITMP269","");*VARSTRING0^SETPRIORITY(*VARSTRING0^GETFRAMENAME());*VARSTRING1^HIDE();*VARSTRING2^HIDE();}",0,ANNBTN^GETNOE(),1);@LOOP("{VARSTRING0^SET(ARRAYPLAYERS^GET(_I_));VARSTRING1^SET(CANVASOBSERVER^GETGRAPHICSAT(*VARSTRING0^GETCENTERX(),*VARSTRING0^GETCENTERY(),FALSE,201,201,FALSE));VARTEMP1^SET("NULL");VARTEMP2^SET("S");@IF("VARSTRING1!'VARTEMP1&&VARSTRING1^GET(3)!'VARTEMP2","BFITMP270","");}",0,ARRAYPLAYERS^GETSIZE(),1);}


OBJECT=BEHONTELEPORT
BEHONTELEPORT:TYPE=BEHAVIOUR
BEHONTELEPORT:CODE={@LOOP("{VARINT0^SET(_I_);*VARBUTTON^SETFRAME(*VARBUTTON^GETEVENTNAME(),VARINT0);VARSTRING0^SET(CANVASOBSERVER^GETGRAPHICSAT(*VARBUTTON^GETCENTERX(),*VARBUTTON^GETCENTERY(),FALSE,670,670,FALSE));@IF("VARSTRING0","_",""NULL"","BFITMP271","");}",1,*VARBUTTON^GETNOE(),1);*VARBUTTON^SETFRAME(*VARBUTTON^GETEVENTNAME(),0);}


OBJECT=BEHUPDATEMENU
BEHUPDATEMENU:TYPE=BEHAVIOUR
BEHUPDATEMENU:CODE={@LOOP("{VARSTRING0^SET(ARRAYPLAYERS^GET(_I_));VARSTRING1^SET(["ANNMENU_"+[_I_+1]]);VARSTRING2^SET(*VARSTRING0^GETEVENTNAME());@IF("VARSTRING0","_","VARPLAYERNAME","BFITMP274","BFITMP275");}",0,ARRAYPLAYERS^GETSIZE(),1);}

#PATCHED
#MAKE USE OF NEWLY ADDED VARSUPPRESSIONEVENT MECHANISM IN ORDER TO MAKE PLAYER CHANGING SAFER AND PRESERVE SPELL EFFECTS
OBJECT=BEHONCHANGEDPLAYER
BEHONCHANGEDPLAYER:TYPE=BEHAVIOUR
BEHONCHANGEDPLAYER:CODE={VARINT1^SET([ARRAYPLAYERS^FIND(VARPLAYERNAME)+1]);@IF(*["ANNPLAYERDARKELAPSE_"+VARINT1]^ISPLAYING(),"_","TRUE","BFITMP276","");VARSTRING0^SET(ARRAYPLAYERS^GET(VARINT0));VARSTRING1^SET(*VARSTRING0^GETEVENTNAME());@IF("VARSTRING1","_",""PRISONER"","BFITMP277","");VARSTRING0^SET(*VARPLAYERNAME^GETEVENTNAME());@IF(VARSTRING0^FIND("IDLE"),"_","-1","BFITMP280","");@IF(ARRAYPLAYERSSTATE^GET(VARINT0),"_",""SWIRL"","BFITMP281","BFITMP282");@IF(*["ANNPLAYERDARKELAPSE_"+[VARINT0+1]]^ISPLAYING(),"_","TRUE","BFITMP283","");VARLASTMOVE^SET(*VARPLAYERNAME^GETFRAMENAME(*VARPLAYERNAME^GETEVENTNAME(),0));@IF("*VARPLAYERNAME^ISPLAYING()'TRUE","{VARSUPPRESSIONEVENT^SET(*VARPLAYERNAME^GETEVENTNAME());*VARPLAYERNAME^PLAY(VARSUPPRESSIONEVENT);}","");VARPLAYERNAME^SET(ARRAYPLAYERS^GET(VARINT0));VARMASKNAME^SET(["ANNPLAYERMASK_"+[VARINT0+1]]);VARLASTMOVE^SET(*VARPLAYERNAME^GETFRAMENAME(*VARPLAYERNAME^GETEVENTNAME(),0));@IF("VARINT0'0||VARINT0'1","BFITMP284","BFITMP285");@IF(SEQLAB^ISPLAYING(),"_","FALSE","BFITMP286","");VARPLAYERCHANGED^SET(1);BEHUPDATEMENU^RUN();}

#PATCHED
#ADD FRAME NAME CHECKING TO KNOW WHEN TO MAKE AN ENEMY SHOOT A SPELL
OBJECT=BEHCHECKENEMYSPELL
BEHCHECKENEMYSPELL:TYPE=BEHAVIOUR
BEHCHECKENEMYSPELL:CODE={VARFRAMENAME^SET(THIS^GETFRAMENAME());VARTHIS^SET(THIS^GETNAME());@IF("VARFRAMENAME'"SHOT"","{BEHENEMYEMITSPELL^RUN(VARTHIS);}","");}


OBJECT=_CURSORMOVE_
_CURSORMOVE_:TYPE=BEHAVIOUR
_CURSORMOVE_:CODE={G_CURSOR^SETOBJECT(CANVASOBSERVER^GETGRAPHICSAT(MOUSE^GETPOSX(),MOUSE^GETPOSY(),TRUE,0,5000,TRUE));}


OBJECT=__HELPSTART__
__HELPSTART__:TYPE=BEHAVIOUR
__HELPSTART__:CODE={SCENENAME^SET(PRZYGODA^GETCURRENTSCENE());MOUSE^DISABLESIGNAL();__KEYB__^SET(KEYBOARD^ISENABLED());KEYBOARD^DISABLE();__HSPOTMAX__^SET(*SCENENAME^GETMAXHSPRIORITY());__HSPOTMIN__^SET(*SCENENAME^GETMINHSPRIORITY());*SCENENAME^GETPLAYINGANIMO("__GRHELP__");CNVLOADER^LOAD([G_SCUTSCENE+".CNV"]);}


OBJECT=__HELPEND__
__HELPEND__:TYPE=BEHAVIOUR
__HELPEND__:CODE={MOUSE^ENABLESIGNAL();KEYBOARD^ENABLE();CNVLOADER^RELEASE([G_SCUTSCENE+".CNV"]);}


OBJECT=_VOLUME_
_VOLUME_:TYPE=BEHAVIOUR
_VOLUME_:CODE={DIALOGS^SETMUSICVOLUME([0.8*G_ARRSETTINGS^GET(1)]);}


OBJECT=_NEWGAME_
_NEWGAME_:TYPE=BEHAVIOUR
_NEWGAME_:CODE={S_IHILLNUMBER^SET(0);@IF(G_ARRDATAS^FIND(G_SARCADEOBJECTS),">","-1","BFITMP287","BFITMP288");}


OBJECT=_LOADGAME_
_LOADGAME_:TYPE=BEHAVIOUR
_LOADGAME_:CODE={S_IHILLNUMBER^SET(0);@IF(G_ARRDATAS^FIND(G_SARCADEOBJECTS),">","-1","BFITMP289","BFITMP290");}


OBJECT=__PAUSESTART__
__PAUSESTART__:TYPE=BEHAVIOUR
__PAUSESTART__:CODE={SCENENAME^SET(PRZYGODA^GETCURRENTSCENE());MOUSE^DISABLESIGNAL();__KEYB__^SET(KEYBOARD^ISENABLED());KEYBOARD^DISABLE();__HSPOTMAX__^SET(*SCENENAME^GETMAXHSPRIORITY());__HSPOTMIN__^SET(*SCENENAME^GETMINHSPRIORITY());*SCENENAME^GETPLAYINGANIMO("__GRHELP__");}


OBJECT=__PAUSEEND__
__PAUSEEND__:TYPE=BEHAVIOUR
__PAUSEEND__:CODE={MOUSE^ENABLESIGNAL();KEYBOARD^ENABLE();ARCADE^STARTMUSIC(VARSMUSIC);ARCADE^SETMUSICVOLUME(G_ARRSETTINGS^GET(1));__GRHELP__^REMOVEALL();}


OBJECT=BFITMP0
BFITMP0:TYPE=BEHAVIOUR
BFITMP0:CODE={BEHPLAYERMOVE^RUN();}


OBJECT=BFITMP1
BFITMP1:TYPE=BEHAVIOUR
BFITMP1:CODE={BEHFROGMOVE^RUN();}

#PATCHED
#FIX A BUG CAUSED BY OVERWRITING A VARIABLE IN THE MIDDLE OF FUNCTION EXECUTION
OBJECT=BFITMP2
BFITMP2:TYPE=BEHAVIOUR
BFITMP2:CODE={VARBUTTON^SET(CANVASOBSERVER^GETGRAPHICSAT(*VARPLAYERNAME^GETCENTERX(),*VARPLAYERNAME^GETCENTERY(),FALSE,201,202,FALSE));VARSWITCH^SET(VARBUTTON);VARSTRING2^SET(*VARPLAYERNAME^GETEVENTNAME());@IF(VARSTRING2^FIND("FROG"),"_","-1","BFITMP0","BFITMP1");};


OBJECT=BFITMP3
BFITMP3:TYPE=BEHAVIOUR
BFITMP3:CODE={*VARSTRING1^PLAY(*VARSTRING1^GETEVENTNAME());VARSTRING0^SET(["ANNPLAYERMASK_"+[ARRAYPLAYERS^FIND(VARSTRING1)+1]]);*VARSTRING0^PLAY("IDLE");*VARSTRING0^SETPOSITION(*VARSTRING1^GETCENTERX(),*VARSTRING1^GETCENTERY());*VARSTRING0^HIDE();}


OBJECT=BFITMP4
BFITMP4:TYPE=BEHAVIOUR
BFITMP4:CODE={BEHPLAYERMOVE^RUN();}


OBJECT=BFITMP5
BFITMP5:TYPE=BEHAVIOUR
BFITMP5:CODE={BEHFROGMOVE^RUN();}


#PATCHED
#FIX A BUG CAUSED BY OVERWRITING A VARIABLE IN THE MIDDLE OF FUNCTION EXECUTION
OBJECT=BFITMP6
BFITMP6:TYPE=BEHAVIOUR
BFITMP6:CODE={VARBUTTON^SET(CANVASOBSERVER^GETGRAPHICSAT(*VARPLAYERNAME^GETCENTERX(),*VARPLAYERNAME^GETCENTERY(),FALSE,201,202,FALSE));VARSWITCH^SET(VARBUTTON);VARSTRING2^SET(*VARPLAYERNAME^GETEVENTNAME());@IF(VARSTRING2^FIND("FROG"),"_","-1","BFITMP4","BFITMP5");};


OBJECT=BFITMP7
BFITMP7:TYPE=BEHAVIOUR
BFITMP7:CODE={*VARSTRING1^PLAY(*VARSTRING1^GETEVENTNAME());VARSTRING0^SET(["ANNPLAYERMASK_"+[ARRAYPLAYERS^FIND(VARSTRING1)+1]]);*VARSTRING0^PLAY("IDLE");*VARSTRING0^SETPOSITION(*VARSTRING1^GETCENTERX(),*VARSTRING1^GETCENTERY());*VARSTRING0^HIDE();}

#PATCHED
#CENTER IMGDARK AND FIX A GRAPHICS GLITCH BY THE WAY
OBJECT=BFITMP8
BFITMP8:TYPE=BEHAVIOUR
BFITMP8:CODE={VARINT1^SET(*VARSTRING0^GETCENTERX());VARINT2^SET(*VARSTRING0^GETCENTERY());IMGDARK^MERGEALPHA([VARINT1-60],[VARINT2-60],"IMGKOLKO");}


OBJECT=BFITMP9
BFITMP9:TYPE=BEHAVIOUR
BFITMP9:CODE={IMGDARK^HIDE();}


OBJECT=BFITMP10
BFITMP10:TYPE=BEHAVIOUR
BFITMP10:CODE={VARBUTTON^SET(CANVASOBSERVER^GETGRAPHICSAT(*VARPLAYERNAME^GETCENTERX(),*VARPLAYERNAME^GETCENTERY(),FALSE,201,202,FALSE));BEHPLAYERMOVE^RUN();}


OBJECT=BFITMP11
BFITMP11:TYPE=BEHAVIOUR
BFITMP11:CODE={*VARSTRING1^PLAY(*VARSTRING1^GETEVENTNAME());VARSTRING0^SET(["ANNPLAYERMASK_"+[ARRAYPLAYERS^FIND(VARSTRING1)+1]]);*VARSTRING0^PLAY("IDLE");*VARSTRING0^SETPOSITION(*VARSTRING1^GETCENTERX(),*VARSTRING1^GETCENTERY());*VARSTRING0^HIDE();}


OBJECT=BFITMP12
BFITMP12:TYPE=BEHAVIOUR
BFITMP12:CODE={VARBUTTON^SET(CANVASOBSERVER^GETGRAPHICSAT(*VARPLAYERNAME^GETCENTERX(),*VARPLAYERNAME^GETCENTERY(),FALSE,201,202,FALSE));BEHPLAYERMOVE^RUN();}


OBJECT=BFITMP13
BFITMP13:TYPE=BEHAVIOUR
BFITMP13:CODE={*VARSTRING1^PLAY(*VARSTRING1^GETEVENTNAME());VARSTRING0^SET(["ANNPLAYERMASK_"+[ARRAYPLAYERS^FIND(VARSTRING1)+1]]);*VARSTRING0^PLAY("IDLE");*VARSTRING0^SETPOSITION(*VARSTRING1^GETCENTERX(),*VARSTRING1^GETCENTERY());*VARSTRING0^HIDE();}


OBJECT=BFITMP14
BFITMP14:TYPE=BEHAVIOUR
BFITMP14:CODE={VARBUTTON^SET(CANVASOBSERVER^GETGRAPHICSAT(*VARPLAYERNAME^GETCENTERX(),*VARPLAYERNAME^GETCENTERY(),FALSE,201,202,FALSE));BEHPLAYERMOVE^RUN();}


OBJECT=BFITMP15
BFITMP15:TYPE=BEHAVIOUR
BFITMP15:CODE={*VARSTRING1^PLAY(*VARSTRING1^GETEVENTNAME());VARSTRING0^SET(["ANNPLAYERMASK_"+[ARRAYPLAYERS^FIND(VARSTRING1)+1]]);*VARSTRING0^PLAY("IDLE");*VARSTRING0^SETPOSITION(*VARSTRING1^GETCENTERX(),*VARSTRING1^GETCENTERY());*VARSTRING0^HIDE();}


OBJECT=BFITMP16
BFITMP16:TYPE=BEHAVIOUR
BFITMP16:CODE={VARBUTTON^SET(CANVASOBSERVER^GETGRAPHICSAT(*VARPLAYERNAME^GETCENTERX(),*VARPLAYERNAME^GETCENTERY(),FALSE,201,202,FALSE));BEHPLAYERMOVE^RUN();}


OBJECT=BFITMP17
BFITMP17:TYPE=BEHAVIOUR
BFITMP17:CODE={*VARSTRING1^PLAY(*VARSTRING1^GETEVENTNAME());VARSTRING0^SET(["ANNPLAYERMASK_"+[ARRAYPLAYERS^FIND(VARSTRING1)+1]]);*VARSTRING0^PLAY("IDLE");*VARSTRING0^SETPOSITION(*VARSTRING1^GETCENTERX(),*VARSTRING1^GETCENTERY());*VARSTRING0^HIDE();}


OBJECT=BFITMP18
BFITMP18:TYPE=BEHAVIOUR
BFITMP18:CODE={VARBUTTON^SET(CANVASOBSERVER^GETGRAPHICSAT(*VARPLAYERNAME^GETCENTERX(),*VARPLAYERNAME^GETCENTERY(),FALSE,201,202,FALSE));BEHPLAYERMOVE^RUN();}


OBJECT=BFITMP19
BFITMP19:TYPE=BEHAVIOUR
BFITMP19:CODE={*VARSTRING1^PLAY(*VARSTRING1^GETEVENTNAME());VARSTRING0^SET(["ANNPLAYERMASK_"+[ARRAYPLAYERS^FIND(VARSTRING1)+1]]);*VARSTRING0^PLAY("IDLE");*VARSTRING0^SETPOSITION(*VARSTRING1^GETCENTERX(),*VARSTRING1^GETCENTERY());*VARSTRING0^HIDE();}


OBJECT=BFITMP20
BFITMP20:TYPE=BEHAVIOUR
BFITMP20:CODE={VARBUTTON^SET(CANVASOBSERVER^GETGRAPHICSAT(*VARPLAYERNAME^GETCENTERX(),*VARPLAYERNAME^GETCENTERY(),FALSE,201,202,FALSE));BEHPLAYERMOVE^RUN();}


OBJECT=BFITMP21
BFITMP21:TYPE=BEHAVIOUR
BFITMP21:CODE={*VARSTRING1^PLAY(*VARSTRING1^GETEVENTNAME());VARSTRING0^SET(["ANNPLAYERMASK_"+[ARRAYPLAYERS^FIND(VARSTRING1)+1]]);*VARSTRING0^PLAY("IDLE");*VARSTRING0^SETPOSITION(*VARSTRING1^GETCENTERX(),*VARSTRING1^GETCENTERY());*VARSTRING0^HIDE();}


OBJECT=BFITMP22
BFITMP22:TYPE=BEHAVIOUR
BFITMP22:CODE={VARBUTTON^SET(CANVASOBSERVER^GETGRAPHICSAT(*VARPLAYERNAME^GETCENTERX(),*VARPLAYERNAME^GETCENTERY(),FALSE,201,202,FALSE));BEHPLAYERMOVE^RUN();}


OBJECT=BFITMP23
BFITMP23:TYPE=BEHAVIOUR
BFITMP23:CODE={*VARSTRING1^PLAY(*VARSTRING1^GETEVENTNAME());VARSTRING0^SET(["ANNPLAYERMASK_"+[ARRAYPLAYERS^FIND(VARSTRING1)+1]]);*VARSTRING0^PLAY("IDLE");*VARSTRING0^SETPOSITION(*VARSTRING1^GETCENTERX(),*VARSTRING1^GETCENTERY());*VARSTRING0^HIDE();}


OBJECT=BFITMP24
BFITMP24:TYPE=BEHAVIOUR
BFITMP24:CODE={ARRAYSAVE^CHANGEAT(2,0);ARRAYSAVE^CHANGEAT(3,0);ARRAYSAVE^CHANGEAT(4,0);ARRAYSAVE^CHANGEAT(5,0);ARRAYSAVE^CHANGEAT(6,0);ARRAYSAVE^CHANGEAT(7,0);ARRAYSAVE^CHANGEAT(8,0);ARRAYSAVE^SAVE(VARSAVENAME);}


OBJECT=BFITMP25
BFITMP25:TYPE=BEHAVIOUR
BFITMP25:CODE={@BREAK();}


OBJECT=BFITMP26
BFITMP26:TYPE=BEHAVIOUR
BFITMP26:CODE={__MMOVE__^RUN();}


OBJECT=BFITMP27
BFITMP27:TYPE=BEHAVIOUR
BFITMP27:CODE={BEHPLAYERSPELL^RUN();VARPLAYERSPELLTYPE^SET(-1);}


OBJECT=BFITMP28
BFITMP28:TYPE=BEHAVIOUR
BFITMP28:CODE={@IF("VARPLAYERSPELLTYPE","!_","-1","BFITMP27","");BEHPREPARESPELL^RUN();};


OBJECT=BFITMP29
BFITMP29:TYPE=BEHAVIOUR
BFITMP29:CODE={BEHRELEASESPELL^RUN();}


OBJECT=BFITMP181
BFITMP181:TYPE=BEHAVIOUR
BFITMP181:CODE={BEHONCHANGEDPLAYER^RUN();}


OBJECT=BFITMP182
BFITMP182:TYPE=BEHAVIOUR
BFITMP182:CODE={BEHONCHANGEDPLAYER^RUN();}


OBJECT=BFITMP183
BFITMP183:TYPE=BEHAVIOUR
BFITMP183:CODE={BEHONCHANGEDPLAYER^RUN();}


OBJECT=BFITMP184
BFITMP184:TYPE=BEHAVIOUR
BFITMP184:CODE={BEHONCHANGEDPLAYER^RUN();}


OBJECT=BFITMP185
BFITMP185:TYPE=BEHAVIOUR
BFITMP185:CODE={BEHONCHANGEDPLAYER^RUN();}


OBJECT=BFITMP186
BFITMP186:TYPE=BEHAVIOUR
BFITMP186:CODE={BEHONCHANGEDPLAYER^RUN();}


OBJECT=BFITMP187
BFITMP187:TYPE=BEHAVIOUR
BFITMP187:CODE={BEHONCHANGEDPLAYER^RUN();}


OBJECT=BFITMP188
BFITMP188:TYPE=BEHAVIOUR
BFITMP188:CODE={BEHONCHANGEDPLAYER^RUN();}


OBJECT=BFITMP189
BFITMP189:TYPE=BEHAVIOUR
BFITMP189:CODE={BEHONCHANGEDPLAYER^RUN();}


OBJECT=BFITMP190
BFITMP190:TYPE=BEHAVIOUR
BFITMP190:CODE={ARRAYSAVE^ADD(0,0,0,0,0,0,0,0,0);ARRAYSAVE^SAVE(VARSAVENAME);}


OBJECT=BFITMP191
BFITMP191:TYPE=BEHAVIOUR
BFITMP191:CODE={ARRAYSAVE^ADD(0,0,0,0,0,0,0,0,0);}


OBJECT=BFITMP192
BFITMP192:TYPE=BEHAVIOUR
BFITMP192:CODE={ARRAYSAVE^CHANGEAT(1,1);}


OBJECT=BFITMP193
BFITMP193:TYPE=BEHAVIOUR
BFITMP193:CODE={ARRAYSAVE^CHANGEAT(1,0);}


OBJECT=BFITMP194
BFITMP194:TYPE=BEHAVIOUR
BFITMP194:CODE={ARRAYSAVE^LOAD(VARSAVENAME);@IF(ARRAYSAVE^GETSIZE(),"_","0","BFITMP190","");VARLEVEL^SET(ARRAYSAVE^GET(0));};


OBJECT=BFITMP195
BFITMP195:TYPE=BEHAVIOUR
BFITMP195:CODE={VARLEVEL^SET(G_SARCADEOBJECTS);G_SARCADEOBJECTS^SET("LABIRYNT");ARRAYSAVE^LOAD(VARSAVENAME);@IF(ARRAYSAVE^GETSIZE(),"_","0","BFITMP191","");ARRAYSAVE^CHANGEAT(0,VARLEVEL);@IF("G_SLASTOBJECTS","_",""UNIVPIWNICA"","BFITMP192","BFITMP193");ARRAYSAVE^SAVE(VARSAVENAME);};


OBJECT=BFITMP196
BFITMP196:TYPE=BEHAVIOUR
BFITMP196:CODE={@LOOP("{VARINT0^SET(_I_);VARINT1^SET([VARINT0-1]);VARINT2^SET(ARRAYSAVE^GET(VARINT0));VARSTRING1^SET(["ANNSWITCHMASK_"+VARINT1]);VARSTRING2^SET(["ANNSWITCHGRAPH_"+VARINT1]);*VARSTRING1^SETFRAME(["A"+VARINT1],VARINT2);*VARSTRING2^SETFRAME(["A"+VARINT1],VARINT2);}",2,7,1);};


OBJECT=BFITMP197
BFITMP197:TYPE=BEHAVIOUR
BFITMP197:CODE={ANNKRETZYCIA^PLAY(VARKRETZYCIA);}


OBJECT=BFITMP198
BFITMP198:TYPE=BEHAVIOUR
BFITMP198:CODE={*VARSTRING0^PLAY("WAIT_DOWN");}


OBJECT=BFITMP199
BFITMP199:TYPE=BEHAVIOUR
BFITMP199:CODE={*VARSTRING0^PLAY("PRISONER");}


OBJECT=BFITMP200
BFITMP200:TYPE=BEHAVIOUR
BFITMP200:CODE={*VARMASKNAME^SETPOSITION(VARINT0,VARINT1);*VARPLAYERNAME^PLAY("UP_FROG");*VARMASKNAME^PLAY("UP");*VARMASKNAME^HIDE();@BREAK();}


OBJECT=BFITMP201
BFITMP201:TYPE=BEHAVIOUR
BFITMP201:CODE={VARWALL^SET(CANVASOBSERVER^GETGRAPHICSAT(VARINT0,[VARINT1-30],FALSE,110,130,FALSE));@IF("VARWALL","_",""NULL"","BFITMP200","");};


OBJECT=BFITMP202
BFITMP202:TYPE=BEHAVIOUR
BFITMP202:CODE={*VARMASKNAME^SETPOSITION(VARINT0,VARINT1);*VARPLAYERNAME^PLAY("DOWN_FROG");*VARMASKNAME^PLAY("DOWN");*VARMASKNAME^HIDE();@BREAK();}


OBJECT=BFITMP203
BFITMP203:TYPE=BEHAVIOUR
BFITMP203:CODE={VARWALL^SET(CANVASOBSERVER^GETGRAPHICSAT(VARINT0,[VARINT1+30],FALSE,110,130,FALSE));@IF("VARWALL","_",""NULL"","BFITMP202","");};


OBJECT=BFITMP204
BFITMP204:TYPE=BEHAVIOUR
BFITMP204:CODE={*VARMASKNAME^SETPOSITION(VARINT0,VARINT1);*VARPLAYERNAME^PLAY("LEFT_FROG");*VARMASKNAME^PLAY("LEFT");*VARMASKNAME^HIDE();@BREAK();}


OBJECT=BFITMP205
BFITMP205:TYPE=BEHAVIOUR
BFITMP205:CODE={VARWALL^SET(CANVASOBSERVER^GETGRAPHICSAT([VARINT0-30],VARINT1,FALSE,110,130,FALSE));@IF("VARWALL","_",""NULL"","BFITMP204","");};


OBJECT=BFITMP206
BFITMP206:TYPE=BEHAVIOUR
BFITMP206:CODE={*VARMASKNAME^SETPOSITION(VARINT0,VARINT1);*VARPLAYERNAME^PLAY("RIGHT_FROG");*VARMASKNAME^PLAY("RIGHT");*VARMASKNAME^HIDE();@BREAK();}


OBJECT=BFITMP207
BFITMP207:TYPE=BEHAVIOUR
BFITMP207:CODE={VARWALL^SET(CANVASOBSERVER^GETGRAPHICSAT([VARINT0+30],VARINT1,FALSE,110,130,FALSE));@IF("VARWALL","_",""NULL"","BFITMP206","");};


OBJECT=BFITMP208
BFITMP208:TYPE=BEHAVIOUR
BFITMP208:CODE={*VARPLAYERNAME^PLAY(["SPELL_"+VARLASTMOVE]);@BREAK();}


OBJECT=BFITMP209
BFITMP209:TYPE=BEHAVIOUR
BFITMP209:CODE={VARPLAYERCHANGED^SET(0);*VARMASKNAME^SETPOSITION(VARINT0,VARINT1);*VARPLAYERNAME^PLAY("UP");*VARMASKNAME^PLAY("UP");*VARMASKNAME^HIDE();@BREAK();}


OBJECT=BFITMP210
BFITMP210:TYPE=BEHAVIOUR
BFITMP210:CODE={VARWALL^SET(CANVASOBSERVER^GETGRAPHICSAT(VARINT0,[VARINT1-30],FALSE,110,130,FALSE));@IF("VARWALL","_",""NULL"","BFITMP209","");};


OBJECT=BFITMP211
BFITMP211:TYPE=BEHAVIOUR
BFITMP211:CODE={VARPLAYERCHANGED^SET(0);*VARMASKNAME^SETPOSITION(VARINT0,VARINT1);*VARPLAYERNAME^PLAY("DOWN");*VARMASKNAME^PLAY("DOWN");*VARMASKNAME^HIDE();@BREAK();}


OBJECT=BFITMP212
BFITMP212:TYPE=BEHAVIOUR
BFITMP212:CODE={VARWALL^SET(CANVASOBSERVER^GETGRAPHICSAT(VARINT0,[VARINT1+30],FALSE,110,130,FALSE));@IF("VARWALL","_",""NULL"","BFITMP211","");};


OBJECT=BFITMP213
BFITMP213:TYPE=BEHAVIOUR
BFITMP213:CODE={VARPLAYERCHANGED^SET(0);*VARMASKNAME^SETPOSITION(VARINT0,VARINT1);*VARPLAYERNAME^PLAY("LEFT");*VARMASKNAME^PLAY("LEFT");*VARMASKNAME^HIDE();@BREAK();}


OBJECT=BFITMP214
BFITMP214:TYPE=BEHAVIOUR
BFITMP214:CODE={VARWALL^SET(CANVASOBSERVER^GETGRAPHICSAT([VARINT0-30],VARINT1,FALSE,110,130,FALSE));@IF("VARWALL","_",""NULL"","BFITMP213","");};


OBJECT=BFITMP215
BFITMP215:TYPE=BEHAVIOUR
BFITMP215:CODE={VARPLAYERCHANGED^SET(0);*VARMASKNAME^SETPOSITION(VARINT0,VARINT1);*VARPLAYERNAME^PLAY("RIGHT");*VARMASKNAME^PLAY("RIGHT");*VARMASKNAME^HIDE();@BREAK();}


OBJECT=BFITMP216
BFITMP216:TYPE=BEHAVIOUR
BFITMP216:CODE={VARWALL^SET(CANVASOBSERVER^GETGRAPHICSAT([VARINT0+30],VARINT1,FALSE,110,130,FALSE));@IF("VARWALL","_",""NULL"","BFITMP215","");};


OBJECT=BFITMP217
BFITMP217:TYPE=BEHAVIOUR
BFITMP217:CODE={@IF(KEYBOARD^ISKEYDOWN(ARRAYKEYBOARD^GET(0)),"_","TRUE","BFITMP210","");@IF(KEYBOARD^ISKEYDOWN(ARRAYKEYBOARD^GET(1)),"_","TRUE","BFITMP212","");@IF(KEYBOARD^ISKEYDOWN(ARRAYKEYBOARD^GET(2)),"_","TRUE","BFITMP214","");@IF(KEYBOARD^ISKEYDOWN(ARRAYKEYBOARD^GET(3)),"_","TRUE","BFITMP216","");};


OBJECT=BFITMP218
BFITMP218:TYPE=BEHAVIOUR
BFITMP218:CODE={VARINT1^SUB(25);}


OBJECT=BFITMP219
BFITMP219:TYPE=BEHAVIOUR
BFITMP219:CODE={VARINT1^ADD(25);}


OBJECT=BFITMP220
BFITMP220:TYPE=BEHAVIOUR
BFITMP220:CODE={VARINT0^SUB(25);}


OBJECT=BFITMP221
BFITMP221:TYPE=BEHAVIOUR
BFITMP221:CODE={VARINT0^ADD(25);}


OBJECT=BFITMP222
BFITMP222:TYPE=BEHAVIOUR
BFITMP222:CODE={VARINT0^SET(*VARSTRING0^GETCENTERX());VARINT1^SET(*VARSTRING0^GETCENTERY());VARINT0^SET([VARINT0@40*40+20]);VARINT1^SET([VARINT1@40*40+20]);*VARSTRING0^SETPOSITION(VARINT0,VARINT1);}


OBJECT=BFITMP223
BFITMP223:TYPE=BEHAVIOUR
BFITMP223:CODE={VARPLAYERSPELLTYPE;ARRAYREXIMUNE^ADD(ARRAYSPELLTYPE^GET([VARPLAYERSPELLTYPE-6]));VARPLAYERSPELLTYPE^SET(-1);}


OBJECT=BFITMP224
BFITMP224:TYPE=BEHAVIOUR
BFITMP224:CODE={ARRAYSAVE^CHANGEAT(2,0);ARRAYSAVE^CHANGEAT(3,0);ARRAYSAVE^CHANGEAT(4,0);ARRAYSAVE^CHANGEAT(5,0);ARRAYSAVE^CHANGEAT(6,0);ARRAYSAVE^CHANGEAT(7,0);ARRAYSAVE^CHANGEAT(8,0);ARRAYSAVE^SAVE(VARSAVENAME);}


OBJECT=BFITMP225
BFITMP225:TYPE=BEHAVIOUR
BFITMP225:CODE={@IF("VARLEVEL","_","0","BFITMP224","");LABIRYNT^PAUSE();SEQLAB^PLAY("FAILED");@BREAK();};


OBJECT=BFITMP226
BFITMP226:TYPE=BEHAVIOUR
BFITMP226:CODE={ARRAYSAVE^CHANGEAT(2,0);ARRAYSAVE^CHANGEAT(3,0);ARRAYSAVE^CHANGEAT(4,0);ARRAYSAVE^CHANGEAT(5,0);ARRAYSAVE^CHANGEAT(6,0);ARRAYSAVE^CHANGEAT(7,0);ARRAYSAVE^CHANGEAT(8,0);ARRAYSAVE^SAVE(VARSAVENAME);}


OBJECT=BFITMP227
BFITMP227:TYPE=BEHAVIOUR
BFITMP227:CODE={@IF("VARLEVEL","_","0","BFITMP226","");LABIRYNT^PAUSE();SEQLAB^PLAY("FAILED");@BREAK();};


OBJECT=BFITMP228
BFITMP228:TYPE=BEHAVIOUR
BFITMP228:CODE={@IF("VARREXZYCIA","_","0","BFITMP225","");};


OBJECT=BFITMP229
BFITMP229:TYPE=BEHAVIOUR
BFITMP229:CODE={@IF("VARKRETZYCIA'0||VARREXZYCIA'0","BFITMP227","");};


OBJECT=BFITMP230
BFITMP230:TYPE=BEHAVIOUR
BFITMP230:CODE={*VARENEMYNAME^PLAY(["IDLE"+VARFROG]);@BREAK();}


OBJECT=BFITMP231
BFITMP231:TYPE=BEHAVIOUR
BFITMP231:CODE={VARSTRING0^SET([VARDIRECTION+VARFROG]);*VARENEMYNAME^PLAY([VARDIRECTION+VARFROG]);@BREAK();}


OBJECT=BFITMP232
BFITMP232:TYPE=BEHAVIOUR
BFITMP232:CODE={VARSTRING1^SET(CANVASOBSERVER^GETGRAPHICSAT(VARINT0,VARINT1,FALSE,130,150,FALSE));@IF("VARSTRING1","_",""NULL"","BFITMP231","");};


OBJECT=BFITMP233
BFITMP233:TYPE=BEHAVIOUR
BFITMP233:CODE={@BREAK();}


OBJECT=BFITMP234
BFITMP234:TYPE=BEHAVIOUR
BFITMP234:CODE={@BREAK();}


OBJECT=BFITMP235
BFITMP235:TYPE=BEHAVIOUR
BFITMP235:CODE={@BREAK();}


OBJECT=BFITMP236
BFITMP236:TYPE=BEHAVIOUR
BFITMP236:CODE={VARINT0^SUB(20);}


OBJECT=BFITMP237
BFITMP237:TYPE=BEHAVIOUR
BFITMP237:CODE={VARINT0^ADD(20);}


OBJECT=BFITMP238
BFITMP238:TYPE=BEHAVIOUR
BFITMP238:CODE={VARINT1^SUB(20);}


OBJECT=BFITMP239
BFITMP239:TYPE=BEHAVIOUR
BFITMP239:CODE={VARINT1^ADD(20);}


OBJECT=BFITMP240
BFITMP240:TYPE=BEHAVIOUR
BFITMP240:CODE={VARSTRING0^SET(["DARK_"+VARLASTMOVE+"_E"]);}


OBJECT=BFITMP241
BFITMP241:TYPE=BEHAVIOUR
BFITMP241:CODE={VARSTRING0^SET(["BUDYN_"+VARLASTMOVE+"_E"]);}


OBJECT=BFITMP242
BFITMP242:TYPE=BEHAVIOUR
BFITMP242:CODE={@BREAK();}


OBJECT=BFITMP243
BFITMP243:TYPE=BEHAVIOUR
BFITMP243:CODE={*VARENEMYNAME^PLAY("IDLE");}


OBJECT=BFITMP244
BFITMP244:TYPE=BEHAVIOUR
BFITMP244:CODE={VARINT0^SET(*VARENEMYNAME^GETCENTERX());VARINT1^SET(*VARENEMYNAME^GETCENTERY());VARINT0^SET([VARINT0@40*40+20]);VARINT1^SET([VARINT1@40*40+20]);*VARENEMYNAME^SETPOSITION(VARINT0,VARINT1);*VARENEMYNAME^PLAY("IDLE");}


OBJECT=BFITMP245
BFITMP245:TYPE=BEHAVIOUR
BFITMP245:CODE={*VARSTRING0^STOP(FALSE);*VARSTRING0^HIDE();@BREAK();}


OBJECT=BFITMP246
BFITMP246:TYPE=BEHAVIOUR
BFITMP246:CODE={BEHENEMYSPELLCOLL^RUN();@BREAK();}


OBJECT=BFITMP247
BFITMP247:TYPE=BEHAVIOUR
BFITMP247:CODE={BEHPLAYERSPELLCOLL^RUN();@BREAK();}


OBJECT=BFITMP248
BFITMP248:TYPE=BEHAVIOUR
BFITMP248:CODE={@BREAK();}


OBJECT=BFITMP249
BFITMP249:TYPE=BEHAVIOUR
BFITMP249:CODE={*VARCURSE^PLAY("SWIRL");@BREAK();}

#PATCHED
#ALIGN SPELL ANIMATIONS TO AN ENEMY AFTER IT IS PUT ASLEEP
OBJECT=BFITMP250
BFITMP250:TYPE=BEHAVIOUR
BFITMP250:CODE={VARINT0^SET(*VARENEMYNAME^GETCENTERX());VARINT1^SET(*VARENEMYNAME^GETCENTERY());VARINT0^SET([VARINT0@40*40+20]);VARINT1^SET([VARINT1@40*40+20]);*VARENEMYNAME^STOP(FALSE);*VARENEMYNAME^SETPOSITION(VARINT0,VARINT1);*VARENEMYMASK^PLAY("IDLE");*VARENEMYMASK^SETPOSITION(VARINT0,VARINT1);*VARENEMYMASK^HIDE();*VARENEMYFOV^PLAY("IDLE");*VARENEMYFOV^SETPOSITION(-40,-40);*VARENEMYFOV^HIDE();*VARCURSE^SETPOSITION(VARINT0,VARINT1);@BREAK();}


OBJECT=BFITMP251
BFITMP251:TYPE=BEHAVIOUR
BFITMP251:CODE={*VARENEMYNAME^SETFPS(4);*VARCURSE^PLAY("FLY");@BREAK();}


OBJECT=BFITMP252
BFITMP252:TYPE=BEHAVIOUR
BFITMP252:CODE={*VARENEMYNAME^SETFPS(8);*VARCURSE^PLAY("BUDYN");@BREAK();}

#PATCHED
#PRESERVE THE SLEEP SPELL EFFECT IF ACTIVE
OBJECT=BFITMP253
BFITMP253:TYPE=BEHAVIOUR
BFITMP253:CODE={VARINT0^SET(*VARENEMYNAME^GETCENTERX());VARINT1^SET(*VARENEMYNAME^GETCENTERY());VARINT0^SET([VARINT0@40*40+20]);VARINT1^SET([VARINT1@40*40+20]);*VARENEMYNAME^SETPOSITION(VARINT0,VARINT1);@IF("*VARENEMYNAME^ISPLAYING()'TRUE","{*VARENEMYNAME^PLAY("IDLE_FROG");}","{*VARENEMYNAME^PLAY("IDLE_FROG");*VARENEMYNAME^STOP(FALSE);}");@BREAK();}

#PATCHED
#PREVENT DISPLACEMENT OF AN ENEMY MOVE MASK
OBJECT=BFITMP254
BFITMP254:TYPE=BEHAVIOUR
BFITMP254:CODE={*VARENEMYFOV^PLAY("IDLE");*VARENEMYFOV^SETPOSITION(-40,-40);*VARENEMYFOV^HIDE();*VARENEMYMASK^HIDE();*VARCURSE^PLAY("DARK");}


OBJECT=BFITMP255
BFITMP255:TYPE=BEHAVIOUR
BFITMP255:CODE={ARRAYREXIMUNE^REMOVEAT(VARINT1);@BREAK();}


OBJECT=BFITMP256
BFITMP256:TYPE=BEHAVIOUR
BFITMP256:CODE={VARINT1^SET(ARRAYREXIMUNE^FIND(VARSPELLNAME));@IF("VARINT1","!_","-1","BFITMP255","");};


OBJECT=BFITMP257
BFITMP257:TYPE=BEHAVIOUR
BFITMP257:CODE={ARRAYPLAYERSSTATE^CHANGEAT(VARINT0,VARSPELLNAME);*VARSTRING1^STOP(FALSE);*VARSTRING3^PLAY("IDLE");*VARSTRING3^HIDE();@BREAK();}


OBJECT=BFITMP258
BFITMP258:TYPE=BEHAVIOUR
BFITMP258:CODE={ARRAYKEYBOARD^REMOVEALL();ARRAYKEYBOARD^ADD("DOWN","UP","RIGHT","LEFT");}

#PATCHED
#MAKE THE MOUSE SPEED DEBUFF APPEAR ONLY IF REKSIO IS HIT WITH THE SWIRL SPELL
OBJECT=BFITMP259
BFITMP259:TYPE=BEHAVIOUR
BFITMP259:CODE={ARRAYPLAYERSSTATE^CHANGEAT(VARINT0,VARSPELLNAME);@IF("VARSTRING1'"ANNPLAYER0"","{VARMOUSESPEED^SET(10);}","");@IF("VARPLAYERNAME","_","VARSTRING1","BFITMP258","");@BREAK();};


OBJECT=BFITMP260
BFITMP260:TYPE=BEHAVIOUR
BFITMP260:CODE={ARRAYPLAYERSSTATE^CHANGEAT(VARINT0,VARSPELLNAME);*VARSTRING1^SETFPS(16);@BREAK();}


OBJECT=BFITMP261
BFITMP261:TYPE=BEHAVIOUR
BFITMP261:CODE={ARRAYPLAYERSSTATE^CHANGEAT(VARINT0,VARSPELLNAME);*VARSTRING1^SETFPS(4);@BREAK();}

#PATCHED
#NULLIFY SPELL EFFECTS IF THE HIT PLAYER IS A FROG BY DEFINITION (DWARFS)
#PRESERVE THE SLEEP SPELL EFFECT IF ACTIVE
OBJECT=BFITMP262
BFITMP262:TYPE=BEHAVIOUR
BFITMP262:CODE={@IF("VARINT0>1","{@BREAK();}","");ARRAYPLAYERSSTATE^CHANGEAT(VARINT0,VARSPELLNAME);VARINT0^SET(*VARSTRING1^GETCENTERX());VARINT1^SET(*VARSTRING1^GETCENTERY());VARINT0^SET([VARINT0@40*40+20]);VARINT1^SET([VARINT1@40*40+20]);*VARSTRING1^SETPOSITION(VARINT0,VARINT1);@IF("*VARSTRING1^ISPLAYING()'TRUE","{*VARSTRING1^PLAY("IDLE_FROG");}","{*VARSTRING1^PLAY("IDLE_FROG");*VARSTRING1^STOP(FALSE);}");@BREAK();}


OBJECT=BFITMP263
BFITMP263:TYPE=BEHAVIOUR
BFITMP263:CODE={IMGDARK^SHOW();}


OBJECT=BFITMP264
BFITMP264:TYPE=BEHAVIOUR
BFITMP264:CODE={*VARSTRING4^PLAY("PLAY");@IF("VARSTRING1","_","VARPLAYERNAME","BFITMP263","");};


OBJECT=BFITMP265
BFITMP265:TYPE=BEHAVIOUR
BFITMP265:CODE={VARPLAYERCHANGED^SET(0);@BREAK();}


OBJECT=BFITMP266
BFITMP266:TYPE=BEHAVIOUR
BFITMP266:CODE={VARINT0^SET(*VARSWITCH^GETCLONEINDEX());}


OBJECT=BFITMP267
BFITMP267:TYPE=BEHAVIOUR
BFITMP267:CODE={VARINT0^SET(*VARSWITCH^GETFRAMENAME(*VARSWITCH^GETEVENTNAME(),_I_));}


OBJECT=BFITMP268
BFITMP268:TYPE=BEHAVIOUR
BFITMP268:CODE={VARPLAYERCHANGED^SET(0);@BREAK();}


OBJECT=BFITMP269
BFITMP269:TYPE=BEHAVIOUR
BFITMP269:CODE={*VARSTRING0^SETFRAME(["A"+VARINT0],0);*VARSTRING1^SETFRAME(["A"+VARINT0],0);}


OBJECT=BFITMP270
BFITMP270:TYPE=BEHAVIOUR
BFITMP270:CODE={VARINT0^SET(*VARSTRING1^GETCLONEINDEX());VARSTRING2^SET(["ANNBTNGRAPH_"+VARINT0]);VARSTRING3^SET(["ANNBTNMASK_"+VARINT0]);*VARSTRING2^SETFRAME(["A"+VARINT0],1);*VARSTRING3^SETFRAME(["A"+VARINT0],1);}


OBJECT=BFITMP271
BFITMP271:TYPE=BEHAVIOUR
BFITMP271:CODE={VARINT1^SET(*VARBUTTON^GETCENTERX());VARINT2^SET(*VARBUTTON^GETCENTERY());VARINT1^DIV(40);VARINT2^DIV(40);VARINT1^SET([40*VARINT1+20]);VARINT2^SET([40*VARINT2+20]);SNDTELE^PLAY();*VARPLAYERNAME^SETPOSITION(VARINT1,VARINT2);*VARBUTTON^SETFRAME(*VARBUTTON^GETEVENTNAME(),0);@BREAK();}


OBJECT=BFITMP272
BFITMP272:TYPE=BEHAVIOUR
BFITMP272:CODE={*VARSTRING1^SETFRAME(VARSTRING0,2);}


OBJECT=BFITMP273
BFITMP273:TYPE=BEHAVIOUR
BFITMP273:CODE={*VARSTRING1^SETFRAME(VARSTRING0,1);}


OBJECT=BFITMP274
BFITMP274:TYPE=BEHAVIOUR
BFITMP274:CODE={*VARSTRING1^SETFRAME(VARSTRING0,0);}


OBJECT=BFITMP275
BFITMP275:TYPE=BEHAVIOUR
BFITMP275:CODE={@IF("VARSTRING2","_",""PRISONER"","BFITMP272","BFITMP273");};


OBJECT=BFITMP276
BFITMP276:TYPE=BEHAVIOUR
BFITMP276:CODE={IMGDARK^HIDE();}


OBJECT=BFITMP277
BFITMP277:TYPE=BEHAVIOUR
BFITMP277:CODE={@BREAK();}


OBJECT=BFITMP278
BFITMP278:TYPE=BEHAVIOUR
BFITMP278:CODE={@BREAK();}


OBJECT=BFITMP279
BFITMP279:TYPE=BEHAVIOUR
BFITMP279:CODE={@IF("VARSTRING0","!_",""PRISONER"","BFITMP278","");};


OBJECT=BFITMP280
BFITMP280:TYPE=BEHAVIOUR
BFITMP280:CODE={@IF(VARSTRING0^FIND("WAIT"),"_","-1","BFITMP279","");};


OBJECT=BFITMP281
BFITMP281:TYPE=BEHAVIOUR
BFITMP281:CODE={ARRAYKEYBOARD^REMOVEALL();ARRAYKEYBOARD^ADD("DOWN","UP","RIGHT","LEFT");}


OBJECT=BFITMP282
BFITMP282:TYPE=BEHAVIOUR
BFITMP282:CODE={ARRAYKEYBOARD^REMOVEALL();ARRAYKEYBOARD^ADD("UP","DOWN","LEFT","RIGHT");}


OBJECT=BFITMP283
BFITMP283:TYPE=BEHAVIOUR
BFITMP283:CODE={IMGDARK^SHOW();}

#PATCHED
#MAKE USE OF NEWLY ADDED VARACTIVATIONEVENT MECHANISM IN ORDER TO MAKE PLAYER CHANGING SAFER AND PRESERVE SPELL EFFECTS
OBJECT=BFITMP284
BFITMP284:TYPE=BEHAVIOUR
BFITMP284:CODE={@IF("*VARPLAYERNAME^ISPLAYING()'TRUE","{VARACTIVATIONEVENT^SET(*VARPLAYERNAME^GETEVENTNAME());*VARPLAYERNAME^PLAY(VARACTIVATIONEVENT);}","");}

#PATCHED
#MAKE USE OF NEWLY ADDED VARACTIVATIONEVENTALT MECHANISM IN ORDER TO MAKE PLAYER CHANGING SAFER AND PRESERVE SPELL EFFECTS
OBJECT=BFITMP285
BFITMP285:TYPE=BEHAVIOUR
BFITMP285:CODE={@IF("*VARPLAYERNAME^ISPLAYING()'TRUE","{VARACTIVATIONEVENTALT^SET(*VARPLAYERNAME^GETEVENTNAME());*VARPLAYERNAME^PLAY(VARACTIVATIONEVENTALT);}","");}


OBJECT=BFITMP286
BFITMP286:TYPE=BEHAVIOUR
BFITMP286:CODE={SEQLAB^PLAY(["PLAYER"+VARINT0]);}


OBJECT=BFITMP287
BFITMP287:TYPE=BEHAVIOUR
BFITMP287:CODE={PRZYGODA^GOTO("ARCADE");@BREAK();}


OBJECT=BFITMP288
BFITMP288:TYPE=BEHAVIOUR
BFITMP288:CODE={PRZYGODA^GOTO(G_SARCADEOBJECTS);@BREAK();}


OBJECT=BFITMP289
BFITMP289:TYPE=BEHAVIOUR
BFITMP289:CODE={PRZYGODA^GOTO("ARCADE");@BREAK();}


OBJECT=BFITMP290
BFITMP290:TYPE=BEHAVIOUR
BFITMP290:CODE={PRZYGODA^GOTO(G_SARCADEOBJECTS);@BREAK();}


